<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>RecyclerViewæºç è§£æ</title>
      <link href="/2021/12/09/RecyclerView%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
      <url>/2021/12/09/RecyclerView%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="RecyclerViewæºç è§£æ"><a href="#RecyclerViewæºç è§£æ" class="headerlink" title="RecyclerViewæºç è§£æ"></a>RecyclerViewæºç è§£æ</h1><p>RecyclerView å¯ä»¥è®©æ‚¨è½»æ¾é«˜æ•ˆåœ°æ˜¾ç¤ºå¤§é‡æ•°æ®ã€‚æ‚¨æä¾›æ•°æ®å¹¶å®šä¹‰æ¯ä¸ªåˆ—è¡¨é¡¹çš„å¤–è§‚ï¼Œè€Œ RecyclerView åº“ä¼šæ ¹æ®éœ€è¦åŠ¨æ€åˆ›å»ºå…ƒç´ ã€‚</p><p>é¡¾åæ€ä¹‰ï¼ŒRecyclerView ä¼šå›æ”¶è¿™äº›å•ä¸ªçš„å…ƒç´ ã€‚å½“åˆ—è¡¨é¡¹æ»šåŠ¨å‡ºå±å¹•æ—¶ï¼ŒRecyclerView ä¸ä¼šé”€æ¯å…¶è§†å›¾ã€‚ç›¸åï¼ŒRecyclerView ä¼šå¯¹å±å¹•ä¸Šæ»šåŠ¨çš„æ–°åˆ—è¡¨é¡¹é‡ç”¨è¯¥è§†å›¾ã€‚è¿™ç§é‡ç”¨å¯ä»¥æ˜¾è‘—æé«˜æ€§èƒ½ï¼Œæ”¹å–„åº”ç”¨å“åº”èƒ½åŠ›å¹¶é™ä½åŠŸè€—ã€‚</p><p>è¯¦ç»†ä½¿ç”¨æ–¹æ³•è¯·å‚ç…§<a href="https://developer.android.com/guide/topics/ui/layout/recyclerview">å¼€å‘è€…æ–‡æ¡£</a><span class="github-emoji"><span>ğŸ˜ƒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>   </p><h2 id="å…³é”®ç±»"><a href="#å…³é”®ç±»" class="headerlink" title="å…³é”®ç±»"></a>å…³é”®ç±»</h2><h2 id="ç±»å®šä¹‰"><a href="#ç±»å®šä¹‰" class="headerlink" title="ç±»å®šä¹‰"></a>ç±»å®šä¹‰</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RecyclerView</span> <span class="keyword">extends</span> <span class="title">ViewGroup</span> <span class="keyword">implements</span> <span class="title">ScrollingView</span>,</span></span><br><span class="line"><span class="class">        <span class="title">NestedScrollingChild2</span>, <span class="title">NestedScrollingChild3</span> </span>{</span><br><span class="line">        ...</span><br><span class="line">        }</span><br></pre></td></tr></tbody></table></figure><p>å¯ä»¥çœ‹å‡º<code>RecyclerView</code>ç»§æ‰¿äº<code>ViewGroup</code>ï¼Œæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªè‡ªå®šä¹‰Viewï¼Œå®ç°äº†<code>ScrollingView</code>ç­‰æ¥å£ã€‚</p><h2 id="ç»˜åˆ¶è¿‡ç¨‹"><a href="#ç»˜åˆ¶è¿‡ç¨‹" class="headerlink" title="ç»˜åˆ¶è¿‡ç¨‹"></a>ç»˜åˆ¶è¿‡ç¨‹</h2><p>æœ¬è´¨ä¸Šæ˜¯è‡ªå®šä¹‰Viewï¼Œåˆ™æœ‰onMeasureã€onLayoutã€onDrawä¸‰æ­¥ç»˜åˆ¶è¿‡ç¨‹ã€‚</p><h3 id="onMeasure"><a href="#onMeasure" class="headerlink" title="onMeasure"></a>onMeasure</h3><p>è‡ªå®šä¹‰Viewçš„onMeausre çš„å…·ä½“é€»è¾‘ï¼Œåœ¨è¿™é‡Œï¼Œä¾ç„¶å¯ä»¥åšä¸ªå‚è€ƒï¼š</p><ol><li>super.onMeasure ä¼šå…ˆè®¡ç®—è‡ªå®šä¹‰ view çš„å¤§å°ï¼›</li><li>è°ƒç”¨ measureChild å¯¹å­ View è¿›è¡Œæµ‹é‡ï¼›</li><li>è‡ªå®šä¹‰ view è®¾ç½®çš„å®½é«˜å‚æ•°ä¸æ˜¯ MeasureSpec.EXACTLY çš„è¯ï¼Œå¯¹äºå­ View æ˜¯ match_parent éœ€è¦é¢å¤–å¤„ç†ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦å¯¹ MeasureSpec.AT_MOST æƒ…å†µè¿›è¡Œé¢å¤–å¤„ç†ã€‚</li><li> å½“è‡ªå®šä¹‰View çš„å¤§å°ç¡®å®šåï¼Œåœ¨å¯¹å­ View æ˜¯ match_parent é‡æ–°æµ‹é‡ï¼›</li></ol><p>åœ¨RecyclerViewçš„onMeasureä¸­æœ‰ä¸‰ç§æƒ…å†µï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onMeasure</span><span class="params">(<span class="keyword">int</span> widthSpec, <span class="keyword">int</span> heightSpec)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (mLayout == <span class="keyword">null</span>) {</span><br><span class="line">        <span class="comment">// æƒ…å†µ1</span></span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (mLayout.mAutoMeasure) {</span><br><span class="line">        <span class="comment">// æƒ…å†µ2</span></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="comment">// æƒ…å†µ3</span></span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><ol><li><code>mLayout==null</code>  <code>mLayout </code>å³ <code>LayoutManager </code>çš„å¯¹è±¡ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå½“ <code>RecyclerView </code>çš„ <code>LayoutManager </code>ä¸ºç©ºæ—¶ï¼Œ<code>RecyclerView </code>ä¸èƒ½æ˜¾ç¤ºä»»ä½•çš„æ•°æ®ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æ‰¾åˆ°ç­”æ¡ˆã€‚</li><li><code>LayoutManager </code>å¼€å¯äº†è‡ªåŠ¨æµ‹é‡æ—¶ï¼Œè¿™æ˜¯ä¸€ç§æƒ…å†µã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ‰å¯èƒ½ä¼šæµ‹é‡ä¸¤æ¬¡ã€‚</li><li>ç¬¬ä¸‰ç§æƒ…å†µå°±æ˜¯æ²¡æœ‰å¼€å¯è‡ªåŠ¨æµ‹é‡çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µæ¯”è¾ƒå°‘ï¼Œå› ä¸º <code>RecyclerView </code>ä¸ºäº†æ”¯æŒ <code>warp_content </code>å±æ€§ï¼Œç³»ç»Ÿæä¾›çš„ <code>LayoutManager </code>éƒ½å¼€å¯è‡ªåŠ¨æµ‹é‡çš„ï¼Œä¸è¿‡è¿˜æ˜¯è¦åˆ†æçš„ã€‚</li></ol><h4 id="æƒ…å†µä¸€"><a href="#æƒ…å†µä¸€" class="headerlink" title="æƒ…å†µä¸€"></a>æƒ…å†µä¸€</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (mLayout == <span class="keyword">null</span>) {</span><br><span class="line">    defaultOnMeasure(widthSpec, heightSpec);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è¿™é‡Œè°ƒç”¨äº†<code>defaultOnMeasure</code>æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * An implementation of {<span class="doctag">@link</span> View#onMeasure(int, int)} to fall back to in various scenarios</span></span><br><span class="line"><span class="comment"> * where this RecyclerView is otherwise lacking better information.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">defaultOnMeasure</span><span class="params">(<span class="keyword">int</span> widthSpec, <span class="keyword">int</span> heightSpec)</span> </span>{</span><br><span class="line">    <span class="comment">// calling LayoutManager here is not pretty but that API is already public and it is better</span></span><br><span class="line">    <span class="comment">// than creating another method since this is internal.</span></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span> width = LayoutManager.chooseSize(widthSpec,</span><br><span class="line">            getPaddingLeft() + getPaddingRight(),</span><br><span class="line">            ViewCompat.getMinimumWidth(<span class="keyword">this</span>));</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span> height = LayoutManager.chooseSize(heightSpec,</span><br><span class="line">            getPaddingTop() + getPaddingBottom(),</span><br><span class="line">            ViewCompat.getMinimumHeight(<span class="keyword">this</span>));</span><br><span class="line"></span><br><span class="line">    setMeasuredDimension(width, height);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è¯¥æ–¹æ³•ä¸­é€šè¿‡<code>LayoutManager.choose()</code>æ–¹æ³•æ¥è®¡ç®—å®½é«˜å€¼ï¼Œç„¶å<strong>è°ƒç”¨setMeasuredDimension()è®¾ç½®å®½é«˜</strong>ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Chooses a size from the given specs and parameters that is closest to the desired size</span></span><br><span class="line"><span class="comment"> * and also complies with the spec.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> spec The measureSpec</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> desired The preferred measurement</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> min The minimum value</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> A size that fits to the given specs</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">chooseSize</span><span class="params">(<span class="keyword">int</span> spec, <span class="keyword">int</span> desired, <span class="keyword">int</span> min)</span> </span>{</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span> mode = View.MeasureSpec.getMode(spec);</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span> size = View.MeasureSpec.getSize(spec);</span><br><span class="line">    <span class="keyword">switch</span> (mode) {</span><br><span class="line">        <span class="keyword">case</span> View.MeasureSpec.EXACTLY:</span><br><span class="line">            <span class="keyword">return</span> size;</span><br><span class="line">        <span class="keyword">case</span> View.MeasureSpec.AT_MOST:</span><br><span class="line">            <span class="keyword">return</span> Math.min(size, Math.max(desired, min));</span><br><span class="line">        <span class="keyword">case</span> View.MeasureSpec.UNSPECIFIED:</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> Math.max(desired, min);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>chooseSizeæ–¹æ³•å°±æ˜¯é€šè¿‡RecyclerViewçš„ä¸åŒæµ‹é‡æ¨¡å¼æ¥é€‰å–ä¸åŒçš„å€¼ã€‚è¿™é‡Œæ²¡æœ‰æµ‹é‡å­ view çš„å¤§å°ï¼Œè¿™ä¹Ÿæ˜¯ç™½å±çš„åŸå› ã€‚å› ä¸º RecyclerView çš„ç»˜åˆ¶å…¶å®æ˜¯å§”æ‰˜ç»™ LayoutManager æ¥ç®¡ç†ï¼ŒLayoutManager = null çš„æƒ…å†µä¸‹æµ‹é‡å­ view æ²¡æœ‰ä»»ä½•çš„æ„ä¹‰ã€‚</p><h4 id="æƒ…å†µäºŒ"><a href="#æƒ…å†µäºŒ" class="headerlink" title="æƒ…å†µäºŒ"></a>æƒ…å†µäºŒ</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (mLayout.isAutoMeasureEnabled()) {</span><br><span class="line">    <span class="comment">//å…ˆè·å–æµ‹é‡æ¨¡å¼</span></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span> widthMode = MeasureSpec.getMode(widthSpec);</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span> heightMode = MeasureSpec.getMode(heightSpec);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è°ƒç”¨LayoutManager.onMeasureæ–¹æ³•æµ‹é‡</span></span><br><span class="line">    mLayout.onMeasure(mRecycler, mState, widthSpec, heightSpec);</span><br><span class="line"><span class="comment">//åˆ¤æ–­æ˜¯å¦å¯ä»¥è·³è¿‡æµ‹é‡æˆ–è€…adapterä¸ºnullï¼Œç›´æ¥è¿”å›ã€‚</span></span><br><span class="line">    <span class="comment">/*è‡ªå®šä¹‰ view è®¾ç½®çš„å®½é«˜å‚æ•°ä¸æ˜¯ MeasureSpec.EXACTLY çš„è¯ï¼Œå¯¹äºå­ View æ˜¯ match_parent éœ€è¦é¢å¤–å¤„ç†ã€‚*/</span></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">boolean</span> measureSpecModeIsExactly =</span><br><span class="line">            widthMode == MeasureSpec.EXACTLY &amp;&amp; heightMode == MeasureSpec.EXACTLY;</span><br><span class="line">    <span class="keyword">if</span> (measureSpecModeIsExactly || mAdapter == <span class="keyword">null</span>) {</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line"><span class="comment">//å¼€å§‹æµ‹é‡</span></span><br><span class="line">    <span class="keyword">if</span> (mState.mLayoutStep == State.STEP_START) {</span><br><span class="line">        dispatchLayoutStep1();</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// set dimensions in 2nd step. Pre-layout should happen with old dimensions for</span></span><br><span class="line">    <span class="comment">// consistency</span></span><br><span class="line">    mLayout.setMeasureSpecs(widthSpec, heightSpec);</span><br><span class="line">    mState.mIsMeasuring = <span class="keyword">true</span>;</span><br><span class="line">    dispatchLayoutStep2();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// now we can get the width and height from the children.</span></span><br><span class="line">    mLayout.setMeasuredDimensionFromChildren(widthSpec, heightSpec);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// if RecyclerView has non-exact width and height and if there is at least one child</span></span><br><span class="line">    <span class="comment">// which also has non-exact width &amp; height, we have to re-measure.</span></span><br><span class="line">    <span class="comment">//ç¬¬äºŒæ¬¡</span></span><br><span class="line">    <span class="keyword">if</span> (mLayout.shouldMeasureTwice()) {</span><br><span class="line">        mLayout.setMeasureSpecs(</span><br><span class="line">                MeasureSpec.makeMeasureSpec(getMeasuredWidth(), MeasureSpec.EXACTLY),</span><br><span class="line">                MeasureSpec.makeMeasureSpec(getMeasuredHeight(), MeasureSpec.EXACTLY));</span><br><span class="line">        mState.mIsMeasuring = <span class="keyword">true</span>;</span><br><span class="line">        dispatchLayoutStep2();</span><br><span class="line">        <span class="comment">// now we can get the width and height from the children.</span></span><br><span class="line">        mLayout.setMeasuredDimensionFromChildren(widthSpec, heightSpec);</span><br><span class="line">        </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è¿™ç§æƒ…å†µä¸‹ï¼Œé¦–å…ˆè°ƒç”¨<code>LayoutManager.onMeasure</code>æ–¹æ³•æµ‹é‡ï¼Œä½†æ˜¯Androidå®˜æ–¹çš„ä¸‰ç§LayoutManager(LinearLayoutManagerã€GridLayoutManagerã€StaggeredGridLayoutManager)éƒ½æ²¡æœ‰å¤å†™æ­¤æ–¹æ³•ï¼Œæ­¤æ–¹æ³•æºç ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onMeasure</span><span class="params">(Recycler recycler, State state, <span class="keyword">int</span> widthSpec, <span class="keyword">int</span> heightSpec)</span> </span>{</span><br><span class="line">    mRecyclerView.defaultOnMeasure(widthSpec, heightSpec);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è¿™æ˜¯è‡ªå®šä¹‰Viewçš„onMeasureæ­¥éª¤ä¸­çš„æµ‹é‡è‡ªå·±æœ¬èº«çš„å¤§å°ã€‚</p><p>æ¥ä¸‹æ¥åˆ¤æ–­<code>mState.mLayoutStep</code>è¿™ä¸ªå˜é‡ï¼Œå³å½“å‰ç»˜åˆ¶çŠ¶æ€ï¼Œå¦‚æœä¸º<code>State.STEP_START</code>ï¼Œé‚£ä¹ˆä¾¿ä¼šæ‰§è¡Œ<code>dispatchLayoutStep1</code>æ–¹æ³•ï¼Œéšååˆè°ƒç”¨äº†<code>dispatchLayoutStep2</code>æ–¹æ³•ï¼Œæœ€åå¦‚æœéœ€è¦äºŒæ¬¡æµ‹é‡çš„è¯ï¼Œé‚£ä¹ˆä¼šå†è°ƒç”¨ä¸€æ¬¡<code>dispatchLayoutStep2</code>æ–¹æ³•ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥åˆ†åˆ«çœ‹ä¸€ä¸‹<code>mState.mLayoutStep</code>å˜é‡çš„å«ä¹‰å’Œ<code>dispatchLayoutStepX</code>ç³»åˆ—æ–¹æ³•çš„ä½œç”¨ã€‚</p><p><a href="https://imgtu.com/i/o4M6D1"><img src="https://s1.ax1x.com/2021/12/09/o4M6D1.jpg" alt="o4M6D1.jpg" style="zoom: 50%;"></a></p><p><a href="https://imgtu.com/i/o4MIvd"><img src="https://s1.ax1x.com/2021/12/09/o4MIvd.jpg" alt="o4MIvd.jpg" style="zoom: 50%;"></a></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dispatchLayoutStep1</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="comment">//è¿™é‡Œè¿˜ç”¨åˆ°äº†æ–­è¨€</span></span><br><span class="line">    mState.assertLayoutStep(State.STEP_START);</span><br><span class="line">    fillRemainingScrollValues(mState);</span><br><span class="line">    mState.mIsMeasuring = <span class="keyword">false</span>;</span><br><span class="line">    startInterceptRequestLayout();</span><br><span class="line">    mViewInfoStore.clear();</span><br><span class="line">    onEnterLayoutOrScroll();</span><br><span class="line">    <span class="comment">//å¤„ç†adapteræ›´æ–°</span></span><br><span class="line">    processAdapterUpdatesAndSetAnimationFlags();</span><br><span class="line">    saveFocusInfo();</span><br><span class="line">    mState.mTrackOldChangeHolders = mState.mRunSimpleAnimations &amp;&amp; mItemsChanged;</span><br><span class="line">    mItemsAddedOrRemoved = mItemsChanged = <span class="keyword">false</span>;</span><br><span class="line">    mState.mInPreLayout = mState.mRunPredictiveAnimations;</span><br><span class="line">    mState.mItemCount = mAdapter.getItemCount();</span><br><span class="line">    findMinMaxChildLayoutPositions(mMinMaxLayoutPositions);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ˜¯å¦è¦è¿è¡ŒåŠ¨ç”»</span></span><br><span class="line">    <span class="keyword">if</span> (mState.mRunSimpleAnimations) {</span><br><span class="line">        <span class="comment">// Step 0: Find out where all non-removed items are, pre-layout</span></span><br><span class="line">        <span class="comment">// æ‰¾å‡ºæ‰€æœ‰æœªç§»é™¤çš„ItemViewï¼Œè¿›è¡Œé¢„å¸ƒå±€</span></span><br><span class="line">        ......</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (mState.mRunPredictiveAnimations) {</span><br><span class="line">        <span class="comment">// Step 1: run prelayout: This will use the old positions of items. The layout manager</span></span><br><span class="line">        <span class="comment">// is expected to layout everything, even removed items (though not to add removed</span></span><br><span class="line">        <span class="comment">// items back to the container). This gives the pre-layout position of APPEARING views</span></span><br><span class="line">        <span class="comment">// which come into existence as part of the real layout.</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Save old positions so that LayoutManager can run its mapping logic.</span></span><br><span class="line">        <span class="comment">//ä¿å­˜æ—§çŠ¶æ€è¿›è¡Œé¢„å¸ƒå±€ã€‚</span></span><br><span class="line">        ......</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        clearOldPositions();</span><br><span class="line">    }</span><br><span class="line">    onExitLayoutOrScroll();</span><br><span class="line">    stopInterceptRequestLayout(<span class="keyword">false</span>);</span><br><span class="line">    <span class="comment">//æ”¹å˜çŠ¶æ€</span></span><br><span class="line">    mState.mLayoutStep = State.STEP_LAYOUT;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å¯ä»¥çœ‹åˆ°<code>dispatchLayoutStep1</code>æ–¹æ³•ä¸»è¦æ˜¯æ ¹æ®<code>mState.mRunPredictiveAnimations</code>å’Œ<code>mState.mRunPredictiveAnimations</code>ä¸¤ä¸ªå€¼åšå‡ºç›¸åº”çš„é€»è¾‘å¤„ç†ã€‚è€Œåœ¨<code>processAdapterUpdatesAndSetAnimationFlags</code>æ–¹æ³•ä¸­ï¼Œè®¡ç®—äº†è¿™ä¸¤ä¸ªå€¼ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">processAdapterUpdatesAndSetAnimationFlags</span><span class="params">()</span> </span>{</span><br><span class="line">    </span><br><span class="line">    ...</span><br><span class="line">        </span><br><span class="line">    mState.mRunSimpleAnimations = mFirstLayoutComplete</span><br><span class="line">        &amp;&amp; mItemAnimator != <span class="keyword">null</span></span><br><span class="line">        &amp;&amp; (mDataSetHasChangedAfterLayout</span><br><span class="line">            || animationTypeSupported</span><br><span class="line">            || mLayout.mRequestedSimpleAnimations)</span><br><span class="line">        &amp;&amp; (!mDataSetHasChangedAfterLayout</span><br><span class="line">            || mAdapter.hasStableIds());</span><br><span class="line">    mState.mRunPredictiveAnimations = mState.mRunSimpleAnimations</span><br><span class="line">        &amp;&amp; animationTypeSupported</span><br><span class="line">        &amp;&amp; !mDataSetHasChangedAfterLayout</span><br><span class="line">        &amp;&amp; predictiveItemAnimationsEnabled();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è¿™é‡Œæˆ‘ä»¬å…³æ³¨ä¸€ä¸‹<code>mFirstLayoutComplete</code>å˜é‡ï¼Œæˆ‘ä»¬å‘ç°<code>mRunSimpleAnimations</code>çš„å€¼ä¸<code>mFirstLayoutComplete</code>æœ‰å…³ï¼Œ<code>mRunPredictiveAnimations</code>åŒæ—¶è·Ÿ<code>mRunSimpleAnimations</code>æœ‰å…³ã€‚ç¬¬ä¸€æ¬¡ç»˜åˆ¶æµç¨‹è¿˜æœªå®Œæˆï¼Œ<code>mFirstLayoutComplete==false</code>æ‰€ä»¥<code>mRunSimpleAnimations = mRunPredictiveAnimations == false</code>ï¼Œå½“RecyclerViewç¬¬ä¸€æ¬¡åŠ è½½æ•°æ®æ—¶ï¼Œæ˜¯ä¸ä¼šæ‰§è¡ŒåŠ¨ç”»çš„ã€‚æ¯ä¸ªItemViewè¿˜æ²¡æœ‰layoutå®Œæ¯•ï¼Œæ˜¯ä¸ä¼šè¿›è¡ŒåŠ¨ç”»çš„ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹dispatchLayoutStep2æ–¹æ³•ï¼Œå…¶ä¸­ï¼Œå¯¹RecyclerViewçš„å­Viewè¿›è¡Œäº†Layoutï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dispatchLayoutStep2</span><span class="params">()</span> </span>{</span><br><span class="line">    startInterceptRequestLayout();</span><br><span class="line">    onEnterLayoutOrScroll();</span><br><span class="line">    mState.assertLayoutStep(State.STEP_LAYOUT | State.STEP_ANIMATIONS);</span><br><span class="line">    mAdapterHelper.consumeUpdatesInOnePass();</span><br><span class="line">    <span class="comment">//1</span></span><br><span class="line">    mState.mItemCount = mAdapter.getItemCount();</span><br><span class="line">    mState.mDeletedInvisibleItemCountSincePreviousLayout = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Step 2: Run layout</span></span><br><span class="line">    mState.mInPreLayout = <span class="keyword">false</span>;</span><br><span class="line">    <span class="comment">//2</span></span><br><span class="line">    mLayout.onLayoutChildren(mRecycler, mState);</span><br><span class="line"></span><br><span class="line">    mState.mStructureChanged = <span class="keyword">false</span>;</span><br><span class="line">    mPendingSavedState = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// onLayoutChildren may have caused client code to disable item animations; re-check</span></span><br><span class="line">    mState.mRunSimpleAnimations = mState.mRunSimpleAnimations &amp;&amp; mItemAnimator != <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">//æ”¹å˜çŠ¶æ€</span></span><br><span class="line">    mState.mLayoutStep = State.STEP_ANIMATIONS;</span><br><span class="line">    onExitLayoutOrScroll();</span><br><span class="line">    stopInterceptRequestLayout(<span class="keyword">false</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>1ã€2å¤„å¯ä»¥çœ‹åˆ°ï¼Œå¯¹childrenè¿›è¡Œäº†æµ‹é‡å’Œå¸ƒå±€ã€‚</p><p><code>LayoutManager</code>çš„<code>onLayoutChildren</code>æ–¹æ³•æ˜¯ä¸€ä¸ªç©ºæ–¹æ³•ï¼Œæ‰€ä»¥éœ€è¦<code>LayoutManager</code>çš„å­ç±»è‡ªå·±å®ç°ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onLayoutChildren</span><span class="params">(Recycler recycler, State state)</span> </span>{</span><br><span class="line">    Log.e(TAG, <span class="string">"You must override onLayoutChildren(Recycler recycler, State state) "</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h5 id="onLayoutChildren"><a href="#onLayoutChildren" class="headerlink" title="onLayoutChildren"></a>onLayoutChildren</h5><p>RecyclerViewå°†Viewçš„ç»˜åˆ¶äº¤ç»™äº†LayoutManagerã€‚å°†RecyclerViewå†…éƒ¨æŒæœ‰çš„<code>Recycler</code>å’Œ<code>state</code>ä¼ ç»™äº†<code>LayoutManager</code>çš„<code>onLayoutChildren</code>æ–¹æ³•ã€‚è¿™é‡Œæˆ‘ä»¬åˆ†æ<code>LinearLayoutManager</code>ã€‚</p><p>å¤§æ¦‚æµç¨‹ï¼š</p><ul><li>ç¡®å®šé”šç‚¹ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š1.<code>Children</code>çš„å¸ƒå±€æ–¹å‘ï¼Œæœ‰startå’Œendä¸¤ä¸ªæ–¹å‘ã€‚2.<code>mPosition</code>å’Œ<code>mCoordinate</code>ï¼Œåˆ†åˆ«è¡¨ç¤º<code>Children</code>å¼€å§‹å¡«å……çš„positionå’Œåæ ‡ã€‚</li><li>è°ƒç”¨<code>detachAndScrapAttachedViews</code>æ–¹æ³•ï¼Œ<code>detach</code>æ‰æˆ–è€…<code>remove</code>æ‰<code>RecyclerView</code>çš„<code>Children</code>ã€‚ï¼ˆä¸ç¼“å­˜æœºåˆ¶ç›¸å…³ï¼‰</li><li>æ ¹æ®é”šç‚¹ä¿¡æ¯ï¼Œè°ƒç”¨<code>fill</code>æ–¹æ³•è¿›è¡Œ<code>Children</code>çš„å¡«å……ã€‚æ ¹æ®é”šç‚¹ä¿¡æ¯çš„ä¸åŒï¼Œå¯èƒ½ä¼šè°ƒç”¨ä¸¤æ¬¡<code>fill</code>æ–¹æ³•ã€‚</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onLayoutChildren</span><span class="params">(RecyclerView.Recycler recycler, RecyclerView.State state)</span> </span>{</span><br><span class="line">    <span class="comment">// ç¬¬ä¸€æ­¥æ‰¾å¯»é”šç‚¹</span></span><br><span class="line">    <span class="comment">// ä¸¤ä¸ªæ–¹å‘å¡«å……ï¼Œä»é”šç‚¹å¾€ä¸Šå’Œé”šç‚¹å¾€ä¸‹</span></span><br><span class="line">    <span class="comment">// åˆ¤æ–­ç»˜åˆ¶æ–¹å‘ï¼Œç»™mShouldReverseLayoutèµ‹å€¼ï¼Œé»˜è®¤æ˜¯æ­£å‘ç»˜åˆ¶ï¼Œåˆ™mShouldReverseLayoutæ˜¯False</span></span><br><span class="line">    ...</span><br><span class="line">        </span><br><span class="line">    <span class="comment">// resolve layout direction</span></span><br><span class="line">    resolveShouldLayoutReverse();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> View focused = getFocusedChild();</span><br><span class="line">    <span class="comment">// mValid çš„é»˜è®¤å€¼æ˜¯falseï¼Œä¸€æ¬¡æµ‹é‡ä¹‹åè®¾ä¸ºtrueï¼ŒonLayout å®Œæˆåä¼šå›è°ƒæ‰§è¡Œresetæ–¹æ³•ï¼Œåˆå˜ä¸ºfalse</span></span><br><span class="line">    <span class="keyword">if</span> (!mAnchorInfo.mValid || mPendingScrollPosition != RecyclerView.NO_POSITION</span><br><span class="line">            || mPendingSavedState != <span class="keyword">null</span>) {</span><br><span class="line">        <span class="comment">// mStackFromEndé»˜è®¤æ˜¯falseï¼Œé™¤éæ‰‹åŠ¨è°ƒç”¨setStackFromEndæ–¹æ³•ï¼Œä¸¤ä¸ªéƒ½ä¼šfalseï¼Œå¼‚æˆ–ä¸ºfalse</span></span><br><span class="line">        mAnchorInfo.reset();</span><br><span class="line">        mAnchorInfo.mLayoutFromEnd = mShouldReverseLayout ^ mStackFromEnd;</span><br><span class="line">        <span class="comment">// calculate anchor position and coordinate</span></span><br><span class="line">        <span class="comment">// è®¡ç®—é”šç‚¹ä½ç½®å’Œåç§»é‡ã€‚</span></span><br><span class="line">        updateAnchorInfoForLayout(recycler, state, mAnchorInfo);</span><br><span class="line">        mAnchorInfo.mValid = <span class="keyword">true</span>;</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (focused != <span class="keyword">null</span> &amp;&amp; (mOrientationHelper.getDecoratedStart(focused)</span><br><span class="line">                    &gt;= mOrientationHelper.getEndAfterPadding()</span><br><span class="line">            || mOrientationHelper.getDecoratedEnd(focused)</span><br><span class="line">            &lt;= mOrientationHelper.getStartAfterPadding())) {</span><br><span class="line">        </span><br><span class="line">        mAnchorInfo.assignFromViewAndKeepVisibleRect(focused, getPosition(focused));</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//ç¬¬äºŒæ­¥</span></span><br><span class="line">    detachAndScrapAttachedViews(recycler);</span><br><span class="line">    mLayoutState.mInfinite = resolveIsInfinite();</span><br><span class="line">    mLayoutState.mIsPreLayout = state.isPreLayout();</span><br><span class="line">    </span><br><span class="line">   ...</span><br><span class="line">    <span class="comment">//mLayoutFromEndä¸ºfalse    </span></span><br><span class="line">    <span class="keyword">if</span> (mAnchorInfo.mLayoutFromEnd) {</span><br><span class="line">        <span class="comment">// ç¬¬ä¸‰æ­¥</span></span><br><span class="line">        <span class="comment">// å€’ç€ç»˜åˆ¶çš„è¯ï¼Œå…ˆå¾€ä¸Šç»˜åˆ¶ï¼Œå†å¾€ä¸‹ç»˜åˆ¶</span></span><br><span class="line">        <span class="comment">// fill towards start</span></span><br><span class="line">        <span class="comment">// ä»é”šç‚¹åˆ°å¾€ä¸Š</span></span><br><span class="line">        updateLayoutStateToFillStart(mAnchorInfo);</span><br><span class="line">        ...</span><br><span class="line">        fill(recycler, mLayoutState, state, <span class="keyword">false</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// fill towards end</span></span><br><span class="line">        <span class="comment">// ä»é”šç‚¹åˆ°å¾€ä¸‹</span></span><br><span class="line">        updateLayoutStateToFillEnd(mAnchorInfo);</span><br><span class="line">        ...</span><br><span class="line">        <span class="comment">//è°ƒä¸¤éfillæ–¹æ³•    </span></span><br><span class="line">        fill(recycler, mLayoutState, state, <span class="keyword">false</span>);</span><br><span class="line">...</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">if</span> (mLayoutState.mAvailable &gt; <span class="number">0</span>) {</span><br><span class="line">            <span class="comment">// end could not consume all. add more items towards start</span></span><br><span class="line">...</span><br><span class="line">            updateLayoutStateToFillStart(firstElement, startOffset);</span><br><span class="line">            mLayoutState.mExtraFillSpace = extraForStart;</span><br><span class="line">            fill(recycler, mLayoutState, state, <span class="keyword">false</span>);</span><br><span class="line">...</span><br><span class="line">        }</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="comment">// fill towards end</span></span><br><span class="line">        <span class="comment">// æ­£å¸¸ç»˜åˆ¶æµç¨‹çš„è¯ï¼Œå…ˆå¾€ä¸‹ç»˜åˆ¶ï¼Œå†å¾€ä¸Šç»˜åˆ¶</span></span><br><span class="line">        updateLayoutStateToFillEnd(mAnchorInfo);</span><br><span class="line">...</span><br><span class="line">        fill(recycler, mLayoutState, state, <span class="keyword">false</span>);</span><br><span class="line">        ...</span><br><span class="line">        <span class="comment">// fill towards start</span></span><br><span class="line">        updateLayoutStateToFillStart(mAnchorInfo);</span><br><span class="line">        ...</span><br><span class="line">            </span><br><span class="line">        fill(recycler, mLayoutState, state, <span class="keyword">false</span>);</span><br><span class="line">...</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">if</span> (mLayoutState.mAvailable &gt; <span class="number">0</span>) {</span><br><span class="line">            ...</span><br><span class="line">                </span><br><span class="line">            <span class="comment">// start could not consume all it should. add more items towards end</span></span><br><span class="line">            updateLayoutStateToFillEnd(lastElement, endOffset);</span><br><span class="line">...</span><br><span class="line">    fill(recycler, mLayoutState, state, <span class="keyword">false</span>);</span><br><span class="line">            ...</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">        </span><br><span class="line">    layoutForPredictiveAnimations(recycler, state, startOffset, endOffset);</span><br><span class="line">    <span class="comment">//å®Œæˆåé‡ç½®å‚æ•°</span></span><br><span class="line">    <span class="keyword">if</span> (!state.isPreLayout()) {</span><br><span class="line">        mOrientationHelper.onLayoutComplete();</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        mAnchorInfo.reset();</span><br><span class="line">    }</span><br><span class="line">    mLastStackFromEnd = mStackFromEnd;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h6 id="ç¡®å®šé”šç‚¹ä¿¡æ¯"><a href="#ç¡®å®šé”šç‚¹ä¿¡æ¯" class="headerlink" title="ç¡®å®šé”šç‚¹ä¿¡æ¯"></a>ç¡®å®šé”šç‚¹ä¿¡æ¯</h6><p>é¦–å…ˆæ‰§è¡Œ<code>resolveShouldLayoutReverse</code>æ–¹æ³•åˆ¤æ–­æ˜¯å¦éœ€è¦å€’ç€ç»˜åˆ¶ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">resolveShouldLayoutReverse</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="comment">// A == B is the same result, but we rather keep it readable</span></span><br><span class="line">    <span class="comment">//é»˜è®¤æƒ…å†µä¸‹ï¼Œ`mReverseLayout`ä¸ºfalseï¼Œæ˜¯ä¸ä¼šå€’ç€ç»˜åˆ¶çš„ã€‚æ‰‹åŠ¨è°ƒç”¨`setReverseLayout`æ–¹æ³•å¯ä»¥æ”¹å˜`mRverseLayout`çš„å€¼ã€‚</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (mOrientation == VERTICAL || !isLayoutRTL()) {</span><br><span class="line">        mShouldReverseLayout = mReverseLayout;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        mShouldReverseLayout = !mReverseLayout;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>æ¥ä¸‹é€šè¿‡<code>updateAnchorInfoForLayout</code>æ–¹æ³•æ¥è®¡ç®—é”šç‚¹ä¿¡æ¯ã€‚</p><p>é”šç‚¹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">AnchorInfo</span> </span>{</span><br><span class="line">    OrientationHelper mOrientationHelper;</span><br><span class="line">    <span class="keyword">int</span> mPosition;<span class="comment">//position</span></span><br><span class="line">    <span class="keyword">int</span> mCoordinate;  <span class="comment">//åæ ‡</span></span><br><span class="line">    <span class="keyword">boolean</span> mLayoutFromEnd;<span class="comment">//mLayoutFromEnd = mShouldReverseLayout ^ mStackFromEnd</span></span><br><span class="line">    <span class="keyword">boolean</span> mValid;  <span class="comment">//é»˜è®¤falseï¼Œä¸€æ¬¡æµ‹é‡åè®¾ä¸ºtrueï¼ŒonLayoutåå›è°ƒresetï¼Œé‡ç½®ä¸ºfalse</span></span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">updateAnchorInfoForLayout</span><span class="params">(RecyclerView.Recycler recycler, RecyclerView.State state,</span></span></span><br><span class="line"><span class="function"><span class="params">        AnchorInfo anchorInfo)</span> </span>{</span><br><span class="line">    <span class="comment">//ç¬¬ä¸€ç§è®¡ç®—æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">if</span> (updateAnchorFromPendingData(state, anchorInfo)) {</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line"><span class="comment">//ç¬¬äºŒç§è®¡ç®—æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">if</span> (updateAnchorFromChildren(recycler, state, anchorInfo)) {</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//ç¬¬ä¸‰ç§è®¡ç®—æ–¹æ³•</span></span><br><span class="line">    anchorInfo.assignCoordinateFromPadding();</span><br><span class="line">    anchorInfo.mPosition = mStackFromEnd ? state.getItemCount() - <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>ç¬¬ä¸€ç§ï¼š1.RecyclerViewè¢«é‡å»ºï¼ŒæœŸé—´è°ƒç”¨äº†<code>onSaveInstanceState</code>æ–¹æ³•ï¼Œç›®çš„æ˜¯ä¸ºäº†æ¢å¤ä¸Šæ¬¡çš„å¸ƒå±€ã€‚2.RecyclerViewè°ƒç”¨äº†<code>scrollToPosition</code>ä¹‹ç±»çš„æ–¹æ³•ï¼Œç›®çš„æ˜¯è®©RecyclerViewæ»šåˆ°å‡†ç¡®çš„ä½ç½®ä¸Šå»ã€‚</li><li>ç¬¬äºŒç§ï¼šæ ¹æ®å­Viewæ¥æ›´æ–°é”šç‚¹ä¿¡æ¯ï¼Œå¦‚æœä¸€ä¸ªå­Viewæœ‰ç„¦ç‚¹ï¼Œåˆ™æ ¹æ®å…¶æ¥è®¡ç®—é”šç‚¹ä¿¡æ¯ï¼›å¦‚æœæ²¡æœ‰ç„¦ç‚¹ï¼Œåˆ™æ ¹æ®å¸ƒå±€æ–¹å‘é€‰å–å¯è§çš„ç¬¬ä¸€ä¸ªItemViewæˆ–æœ€åä¸€ä¸ªItemView</li><li>ç¬¬ä¸‰ç§ï¼šå‰ä¸¤ç§éƒ½æœªé‡‡ç”¨ã€‚</li></ul><h4 id="æƒ…å†µä¸‰"><a href="#æƒ…å†µä¸‰" class="headerlink" title="æƒ…å†µä¸‰"></a>æƒ…å†µä¸‰</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">if</span> (mHasFixedSize<span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onLayoutChildren</span><span class="params">(RecyclerView.Recycler recycler, RecyclerView.State state)</span> </span>{</span><br><span class="line">        <span class="comment">// layout algorithm:</span></span><br><span class="line">        <span class="comment">// 1) by checking children and other variables, find an anchor coordinate and an anchor</span></span><br><span class="line">        <span class="comment">//  item position.</span></span><br><span class="line">        <span class="comment">// 2) fill towards start, stacking from bottom</span></span><br><span class="line">        <span class="comment">// 3) fill towards end, stacking from top</span></span><br><span class="line">        <span class="comment">// 4) scroll to fulfill requirements like stack from bottom.</span></span><br><span class="line">        <span class="comment">// create layout state</span></span><br><span class="line">        <span class="keyword">if</span> (DEBUG) {</span><br><span class="line">            Log.d(TAG, <span class="string">"is pre layout:"</span> + state.isPreLayout());</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (mPendingSavedState != <span class="keyword">null</span> || mPendingScrollPosition != RecyclerView.NO_POSITION) {</span><br><span class="line">            <span class="keyword">if</span> (state.getItemCount() == <span class="number">0</span>) {</span><br><span class="line">                removeAndRecycleAllViews(recycler);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (mPendingSavedState != <span class="keyword">null</span> &amp;&amp; mPendingSavedState.hasValidAnchor()) {</span><br><span class="line">            mPendingScrollPosition = mPendingSavedState.mAnchorPosition;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        ensureLayoutState();</span><br><span class="line">        mLayoutState.mRecycle = <span class="keyword">false</span>;</span><br><span class="line">        <span class="comment">// resolve layout direction</span></span><br><span class="line">        resolveShouldLayoutReverse();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> View focused = getFocusedChild();</span><br><span class="line">        <span class="keyword">if</span> (!mAnchorInfo.mValid || mPendingScrollPosition != RecyclerView.NO_POSITION</span><br><span class="line">                || mPendingSavedState != <span class="keyword">null</span>) {</span><br><span class="line">            mAnchorInfo.reset();</span><br><span class="line">            mAnchorInfo.mLayoutFromEnd = mShouldReverseLayout ^ mStackFromEnd;</span><br><span class="line">            <span class="comment">// calculate anchor position and coordinate</span></span><br><span class="line">            updateAnchorInfoForLayout(recycler, state, mAnchorInfo);</span><br><span class="line">            mAnchorInfo.mValid = <span class="keyword">true</span>;</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (focused != <span class="keyword">null</span> &amp;&amp; (mOrientationHelper.getDecoratedStart(focused)</span><br><span class="line">                        &gt;= mOrientationHelper.getEndAfterPadding()</span><br><span class="line">                || mOrientationHelper.getDecoratedEnd(focused)</span><br><span class="line">                &lt;= mOrientationHelper.getStartAfterPadding())) {</span><br><span class="line">            <span class="comment">// This case relates to when the anchor child is the focused view and due to layout</span></span><br><span class="line">            <span class="comment">// shrinking the focused view fell outside the viewport, e.g. when soft keyboard shows</span></span><br><span class="line">            <span class="comment">// up after tapping an EditText which shrinks RV causing the focused view (The tapped</span></span><br><span class="line">            <span class="comment">// EditText which is the anchor child) to get kicked out of the screen. Will update the</span></span><br><span class="line">            <span class="comment">// anchor coordinate in order to make sure that the focused view is laid out. Otherwise,</span></span><br><span class="line">            <span class="comment">// the available space in layoutState will be calculated as negative preventing the</span></span><br><span class="line">            <span class="comment">// focused view from being laid out in fill.</span></span><br><span class="line">            <span class="comment">// Note that we won't update the anchor position between layout passes (refer to</span></span><br><span class="line">            <span class="comment">// TestResizingRelayoutWithAutoMeasure), which happens if we were to call</span></span><br><span class="line">            <span class="comment">// updateAnchorInfoForLayout for an anchor that's not the focused view (e.g. a reference</span></span><br><span class="line">            <span class="comment">// child which can change between layout passes).</span></span><br><span class="line">            mAnchorInfo.assignFromViewAndKeepVisibleRect(focused, getPosition(focused));</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (DEBUG) {</span><br><span class="line">            Log.d(TAG, <span class="string">"Anchor info:"</span> + mAnchorInfo);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">// LLM may decide to layout items for "extra" pixels to account for scrolling target,</span></span><br><span class="line">        <span class="comment">// caching or predictive animations.</span></span><br><span class="line"></span><br><span class="line">        mLayoutState.mLayoutDirection = mLayoutState.mLastScrollDelta &gt;= <span class="number">0</span></span><br><span class="line">                ? LayoutState.LAYOUT_END : LayoutState.LAYOUT_START;</span><br><span class="line">        mReusableIntPair[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        mReusableIntPair[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">        calculateExtraLayoutSpace(state, mReusableIntPair);</span><br><span class="line">        <span class="keyword">int</span> extraForStart = Math.max(<span class="number">0</span>, mReusableIntPair[<span class="number">0</span>])</span><br><span class="line">                + mOrientationHelper.getStartAfterPadding();</span><br><span class="line">        <span class="keyword">int</span> extraForEnd = Math.max(<span class="number">0</span>, mReusableIntPair[<span class="number">1</span>])</span><br><span class="line">                + mOrientationHelper.getEndPadding();</span><br><span class="line">        <span class="keyword">if</span> (state.isPreLayout() &amp;&amp; mPendingScrollPosition != RecyclerView.NO_POSITION</span><br><span class="line">                &amp;&amp; mPendingScrollPositionOffset != INVALID_OFFSET) {</span><br><span class="line">            <span class="comment">// if the child is visible and we are going to move it around, we should layout</span></span><br><span class="line">            <span class="comment">// extra items in the opposite direction to make sure new items animate nicely</span></span><br><span class="line">            <span class="comment">// instead of just fading in</span></span><br><span class="line">            <span class="keyword">final</span> View existing = findViewByPosition(mPendingScrollPosition);</span><br><span class="line">            <span class="keyword">if</span> (existing != <span class="keyword">null</span>) {</span><br><span class="line">                <span class="keyword">final</span> <span class="keyword">int</span> current;</span><br><span class="line">                <span class="keyword">final</span> <span class="keyword">int</span> upcomingOffset;</span><br><span class="line">                <span class="keyword">if</span> (mShouldReverseLayout) {</span><br><span class="line">                    current = mOrientationHelper.getEndAfterPadding()</span><br><span class="line">                            - mOrientationHelper.getDecoratedEnd(existing);</span><br><span class="line">                    upcomingOffset = current - mPendingScrollPositionOffset;</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                    current = mOrientationHelper.getDecoratedStart(existing)</span><br><span class="line">                            - mOrientationHelper.getStartAfterPadding();</span><br><span class="line">                    upcomingOffset = mPendingScrollPositionOffset - current;</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">if</span> (upcomingOffset &gt; <span class="number">0</span>) {</span><br><span class="line">                    extraForStart += upcomingOffset;</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                    extraForEnd -= upcomingOffset;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span> startOffset;</span><br><span class="line">        <span class="keyword">int</span> endOffset;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> firstLayoutDirection;</span><br><span class="line">        <span class="keyword">if</span> (mAnchorInfo.mLayoutFromEnd) {</span><br><span class="line">            firstLayoutDirection = mShouldReverseLayout ? LayoutState.ITEM_DIRECTION_TAIL</span><br><span class="line">                    : LayoutState.ITEM_DIRECTION_HEAD;</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            firstLayoutDirection = mShouldReverseLayout ? LayoutState.ITEM_DIRECTION_HEAD</span><br><span class="line">                    : LayoutState.ITEM_DIRECTION_TAIL;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        onAnchorReady(recycler, state, mAnchorInfo, firstLayoutDirection);</span><br><span class="line">        detachAndScrapAttachedViews(recycler);</span><br><span class="line">        mLayoutState.mInfinite = resolveIsInfinite();</span><br><span class="line">        mLayoutState.mIsPreLayout = state.isPreLayout();</span><br><span class="line">        <span class="comment">// noRecycleSpace not needed: recycling doesn't happen in below's fill</span></span><br><span class="line">        <span class="comment">// invocations because mScrollingOffset is set to SCROLLING_OFFSET_NaN</span></span><br><span class="line">        mLayoutState.mNoRecycleSpace = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (mAnchorInfo.mLayoutFromEnd) {</span><br><span class="line">            <span class="comment">// fill towards start</span></span><br><span class="line">            updateLayoutStateToFillStart(mAnchorInfo);</span><br><span class="line">            mLayoutState.mExtraFillSpace = extraForStart;</span><br><span class="line">            fill(recycler, mLayoutState, state, <span class="keyword">false</span>);</span><br><span class="line">            startOffset = mLayoutState.mOffset;</span><br><span class="line">            <span class="keyword">final</span> <span class="keyword">int</span> firstElement = mLayoutState.mCurrentPosition;</span><br><span class="line">            <span class="keyword">if</span> (mLayoutState.mAvailable &gt; <span class="number">0</span>) {</span><br><span class="line">                extraForEnd += mLayoutState.mAvailable;</span><br><span class="line">            }</span><br><span class="line">            <span class="comment">// fill towards end</span></span><br><span class="line">            updateLayoutStateToFillEnd(mAnchorInfo);</span><br><span class="line">            mLayoutState.mExtraFillSpace = extraForEnd;</span><br><span class="line">            mLayoutState.mCurrentPosition += mLayoutState.mItemDirection;</span><br><span class="line">            fill(recycler, mLayoutState, state, <span class="keyword">false</span>);</span><br><span class="line">            endOffset = mLayoutState.mOffset;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (mLayoutState.mAvailable &gt; <span class="number">0</span>) {</span><br><span class="line">                <span class="comment">// end could not consume all. add more items towards start</span></span><br><span class="line">                extraForStart = mLayoutState.mAvailable;</span><br><span class="line">                updateLayoutStateToFillStart(firstElement, startOffset);</span><br><span class="line">                mLayoutState.mExtraFillSpace = extraForStart;</span><br><span class="line">                fill(recycler, mLayoutState, state, <span class="keyword">false</span>);</span><br><span class="line">                startOffset = mLayoutState.mOffset;</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="comment">// fill towards end</span></span><br><span class="line">            updateLayoutStateToFillEnd(mAnchorInfo);</span><br><span class="line">            mLayoutState.mExtraFillSpace = extraForEnd;</span><br><span class="line">            fill(recycler, mLayoutState, state, <span class="keyword">false</span>);</span><br><span class="line">            endOffset = mLayoutState.mOffset;</span><br><span class="line">            <span class="keyword">final</span> <span class="keyword">int</span> lastElement = mLayoutState.mCurrentPosition;</span><br><span class="line">            <span class="keyword">if</span> (mLayoutState.mAvailable &gt; <span class="number">0</span>) {</span><br><span class="line">                extraForStart += mLayoutState.mAvailable;</span><br><span class="line">            }</span><br><span class="line">            <span class="comment">// fill towards start</span></span><br><span class="line">            updateLayoutStateToFillStart(mAnchorInfo);</span><br><span class="line">            mLayoutState.mExtraFillSpace = extraForStart;</span><br><span class="line">            mLayoutState.mCurrentPosition += mLayoutState.mItemDirection;</span><br><span class="line">            fill(recycler, mLayoutState, state, <span class="keyword">false</span>);</span><br><span class="line">            startOffset = mLayoutState.mOffset;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (mLayoutState.mAvailable &gt; <span class="number">0</span>) {</span><br><span class="line">                extraForEnd = mLayoutState.mAvailable;</span><br><span class="line">                <span class="comment">// start could not consume all it should. add more items towards end</span></span><br><span class="line">                updateLayoutStateToFillEnd(lastElement, endOffset);</span><br><span class="line">                mLayoutState.mExtraFillSpace = extraForEnd;</span><br><span class="line">                fill(recycler, mLayoutState, state, <span class="keyword">false</span>);</span><br><span class="line">                endOffset = mLayoutState.mOffset;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">// changes may cause gaps on the UI, try to fix them.</span></span><br><span class="line">        <span class="comment">// TODO we can probably avoid this if neither stackFromEnd/reverseLayout/RTL values have</span></span><br><span class="line">        <span class="comment">// changed</span></span><br><span class="line">        <span class="keyword">if</span> (getChildCount() &gt; <span class="number">0</span>) {</span><br><span class="line">            <span class="comment">// because layout from end may be changed by scroll to position</span></span><br><span class="line">            <span class="comment">// we re-calculate it.</span></span><br><span class="line">            <span class="comment">// find which side we should check for gaps.</span></span><br><span class="line">            <span class="keyword">if</span> (mShouldReverseLayout ^ mStackFromEnd) {</span><br><span class="line">                <span class="keyword">int</span> fixOffset = fixLayoutEndGap(endOffset, recycler, state, <span class="keyword">true</span>);</span><br><span class="line">                startOffset += fixOffset;</span><br><span class="line">                endOffset += fixOffset;</span><br><span class="line">                fixOffset = fixLayoutStartGap(startOffset, recycler, state, <span class="keyword">false</span>);</span><br><span class="line">                startOffset += fixOffset;</span><br><span class="line">                endOffset += fixOffset;</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                <span class="keyword">int</span> fixOffset = fixLayoutStartGap(startOffset, recycler, state, <span class="keyword">true</span>);</span><br><span class="line">                startOffset += fixOffset;</span><br><span class="line">                endOffset += fixOffset;</span><br><span class="line">                fixOffset = fixLayoutEndGap(endOffset, recycler, state, <span class="keyword">false</span>);</span><br><span class="line">                startOffset += fixOffset;</span><br><span class="line">                endOffset += fixOffset;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        layoutForPredictiveAnimations(recycler, state, startOffset, endOffset);</span><br><span class="line">        <span class="keyword">if</span> (!state.isPreLayout()) {</span><br><span class="line">            mOrientationHelper.onLayoutComplete();</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            mAnchorInfo.reset();</span><br><span class="line">        }</span><br><span class="line">        mLastStackFromEnd = mStackFromEnd;</span><br><span class="line">        <span class="keyword">if</span> (DEBUG) {</span><br><span class="line">            validateChildOrder();</span><br><span class="line">        }</span><br><span class="line">    }) {</span><br><span class="line">        mLayout.onMeasure(mRecycler, mState, widthSpec, heightSpec);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// custom onMeasure</span></span><br><span class="line">    <span class="keyword">if</span> (mAdapterUpdateDuringMeasure) {</span><br><span class="line">        startInterceptRequestLayout();</span><br><span class="line">        onEnterLayoutOrScroll();</span><br><span class="line">        processAdapterUpdatesAndSetAnimationFlags();</span><br><span class="line">        onExitLayoutOrScroll();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (mState.mRunPredictiveAnimations) {</span><br><span class="line">            mState.mInPreLayout = <span class="keyword">true</span>;</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="comment">// consume remaining updates to provide a consistent state with the layout pass.</span></span><br><span class="line">            mAdapterHelper.consumeUpdatesInOnePass();</span><br><span class="line">            mState.mInPreLayout = <span class="keyword">false</span>;</span><br><span class="line">        }</span><br><span class="line">        mAdapterUpdateDuringMeasure = <span class="keyword">false</span>;</span><br><span class="line">        stopInterceptRequestLayout(<span class="keyword">false</span>);</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (mState.mRunPredictiveAnimations) {</span><br><span class="line">        <span class="comment">// If mAdapterUpdateDuringMeasure is false and mRunPredictiveAnimations is true:</span></span><br><span class="line">        <span class="comment">// this means there is already an onMeasure() call performed to handle the pending</span></span><br><span class="line">        <span class="comment">// adapter change, two onMeasure() calls can happen if RV is a child of LinearLayout</span></span><br><span class="line">        <span class="comment">// with layout_width=MATCH_PARENT. RV cannot call LM.onMeasure() second time</span></span><br><span class="line">        <span class="comment">// because getViewForPosition() will crash when LM uses a child to measure.</span></span><br><span class="line">        setMeasuredDimension(getMeasuredWidth(), getMeasuredHeight());</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (mAdapter != <span class="keyword">null</span>) {</span><br><span class="line">        mState.mItemCount = mAdapter.getItemCount();</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        mState.mItemCount = <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">    startInterceptRequestLayout();</span><br><span class="line">    mLayout.onMeasure(mRecycler, mState, widthSpec, heightSpec);</span><br><span class="line">    stopInterceptRequestLayout(<span class="keyword">false</span>);</span><br><span class="line">    mState.mInPreLayout = <span class="keyword">false</span>; <span class="comment">// clear</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è¿™é‡Œä¸»è¦åšäº†ä¸¤ä»¶äº‹ï¼Œæœ€ç»ˆéƒ½ä¼šè°ƒç”¨<code>LayoutManager</code>çš„<code>onMeasure</code>æ–¹æ³•è¿›è¡Œæµ‹é‡ã€‚</p><ul><li>å¦‚æœ<code>mHasFixedSize</code>ä¸ºtrueï¼ˆä¹Ÿå°±æ˜¯è°ƒç”¨äº†<code>setHasFixedSize</code>æ–¹æ³•ï¼‰ï¼Œå°†ç›´æ¥è°ƒç”¨<code>LayoutManager</code>çš„<code>onMeasure</code>æ–¹æ³•è¿›è¡Œæµ‹é‡ã€‚</li><li>å¦‚æœä¸ºfalseï¼ŒåŒæ—¶æ­¤æ—¶å¦‚æœæœ‰æ•°æ®æ›´æ–°ï¼Œåˆ™å…ˆå¤„ç†æ•°æ®æ›´æ–°çš„äº‹åŠ¡ï¼Œç„¶åè°ƒç”¨<code>LayoutManager</code>çš„<code>onMeasure</code>æ–¹æ³•è¿›è¡Œæµ‹é‡ã€‚</li></ul><h3 id="onLayout"><a href="#onLayout" class="headerlink" title="onLayout"></a>onLayout</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onLayout</span><span class="params">(<span class="keyword">boolean</span> changed, <span class="keyword">int</span> l, <span class="keyword">int</span> t, <span class="keyword">int</span> r, <span class="keyword">int</span> b)</span> </span>{</span><br><span class="line">    TraceCompat.beginSection(TRACE_ON_LAYOUT_TAG);</span><br><span class="line">    dispatchLayout();<span class="comment">// è¿›è¡Œlayoutæ“ä½œ</span></span><br><span class="line">    TraceCompat.endSection();</span><br><span class="line">    mFirstLayoutComplete = <span class="keyword">true</span>;<span class="comment">//èµ‹å€¼ä¸ºtrueï¼Œå³å·²ç»layoutä¸€æ¬¡äº†</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>æˆ‘ä»¬çœ‹ä¸€ä¸‹<code>dispatchLayout</code>æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dispatchLayout</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (mAdapter == <span class="keyword">null</span>) {</span><br><span class="line">        Log.e(TAG, <span class="string">"No adapter attached; skipping layout"</span>);</span><br><span class="line">        <span class="comment">// leave the state in START</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (mLayout == <span class="keyword">null</span>) {</span><br><span class="line">        Log.e(TAG, <span class="string">"No layout manager attached; skipping layout"</span>);</span><br><span class="line">        <span class="comment">// leave the state in START</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    mState.mIsMeasuring = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (mState.mLayoutStep == State.STEP_START) {</span><br><span class="line">        dispatchLayoutStep1();</span><br><span class="line">        mLayout.setExactMeasureSpecsFrom(<span class="keyword">this</span>);</span><br><span class="line">        dispatchLayoutStep2();</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (mAdapterHelper.hasUpdates() || mLayout.getWidth() != getWidth()</span><br><span class="line">            || mLayout.getHeight() != getHeight()) {</span><br><span class="line">        <span class="comment">// First 2 steps are done in onMeasure but looks like we have to run again due to</span></span><br><span class="line">        <span class="comment">// changed size.</span></span><br><span class="line">        mLayout.setExactMeasureSpecsFrom(<span class="keyword">this</span>);</span><br><span class="line">        dispatchLayoutStep2();</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="comment">// always make sure we sync them (to ensure mode is exact)</span></span><br><span class="line">        mLayout.setExactMeasureSpecsFrom(<span class="keyword">this</span>);</span><br><span class="line">    }</span><br><span class="line">    dispatchLayoutStep3();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è¿™ä¸ªæ–¹æ³•é‡Œï¼Œåˆ†åˆ«åˆ¤æ–­äº†<code>mAdapter</code>å’Œ<code>mLayout</code>ï¼Œåªè¦å…¶ä¸­ä¸€ä¸ªä¸ºnullï¼Œåˆ™ç›´æ¥è¿”å›ã€‚æ³¨æ„åˆ°å½“<code>mLayout</code>ä¸ºnullæ—¶ï¼Œå³RecyclerViewæ²¡æœ‰è®¾ç½®<code>LayoutManager</code>æ—¶ï¼Œ<code>dispatchLayout</code>æ–¹æ³•ç›´æ¥è¿”å›äº†ï¼Œå› æ­¤ä¸ä¼šå¤„ç†layoutè¿‡ç¨‹ï¼ŒRecyclerViewä¸ä¼šåŠ è½½æ•°æ®ã€‚</p><p>è¿™ä¸ªæ–¹æ³•ä¸­ä¿è¯äº†RecyclerViewå¿…é¡»ç»å†çš„ä¸‰ä¸ªè¿‡ç¨‹ï¼Œå³<code>dispatchLayoutStep1</code>ã€<code>dispatchLayoutStep2</code>ã€<code>dispatchLayoutStep3</code>ã€‚</p><p>å‰ä¸¤ä¸ªå·²ç»ä»‹ç»è¿‡ï¼Œæˆ‘ä»¬æ¥çœ‹<code>dispatchLayoutStep3</code>æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dispatchLayoutStep3</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">    mState.mLayoutStep = State.STEP_START;</span><br><span class="line">    <span class="comment">// Â·Â·Â·Â·Â·Â·</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å®ƒå°†<code>mState.mLayoutStep</code>é‡ç½®ä¸ºäº†<code>State.STEP_START</code>ã€‚å°±æ˜¯è¯´ä¸‹ä¸€æ¬¡é‡æ–°å¼€å§‹<code>dispatchLayout</code>æ—¶ï¼Œä¹Ÿä¼šç»å†3ä¸ªæ–¹æ³•ã€‚</p><p>æ–¹æ³•çš„å…¶ä»–éƒ¨åˆ†ä¸»è¦æ˜¯åšItemçš„åŠ¨ç”»ï¼Œæˆ‘ä»¬ä¸å†å…³æ³¨ã€‚</p><h3 id="onDraw"><a href="#onDraw" class="headerlink" title="onDraw"></a>onDraw</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas c)</span> </span>{</span><br><span class="line">    <span class="comment">// 1</span></span><br><span class="line">    <span class="keyword">super</span>.onDraw(c);</span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span> count = mItemDecorations.size();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) {</span><br><span class="line">        mItemDecorations.get(i).onDraw(c, <span class="keyword">this</span>, mState);</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// 3</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>RecyclerViewçš„drawæµç¨‹åˆ†ä¸ºä¸‰æ­¥ï¼š</p><ul><li>è°ƒç”¨<code>super.draw</code>æ–¹æ³•ã€‚è¿™é‡Œä¸»è¦åšä¸¤ä»¶äº‹ï¼š1.å°†<code>children</code>çš„ç»˜åˆ¶åˆ†å‘ç»™<code>ViewGroup</code>ã€‚2.å°†åˆ†å‰²çº¿çš„ç»˜åˆ¶åˆ†å‘ç»™<code>ItemDecoration</code>ã€‚</li><li>å¦‚æœéœ€è¦çš„è¯ï¼Œè°ƒç”¨<code>ItemDecoration</code>çš„<code>onDrawOver</code>æ–¹æ³•ã€‚é€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨æ¯ä¸ªItemä¸Šè‡ªå®šä¹‰ä¸€äº›è£…é¥°ã€‚</li><li>å¦‚æœRecyclerViewè°ƒç”¨äº†<code>setClipToPadding</code>ï¼Œä¼šå®ç°ä¸€ç§ç‰¹æ®Šçš„æ»‘åŠ¨æ•ˆæœâ€”â€”æ¯ä¸ªItemViewå¯ä»¥æ»‘åŠ¨åˆ°paddingåŒºåŸŸã€‚</li></ul><h2 id="å¤ç”¨åŠç¼“å­˜æœºåˆ¶"><a href="#å¤ç”¨åŠç¼“å­˜æœºåˆ¶" class="headerlink" title="å¤ç”¨åŠç¼“å­˜æœºåˆ¶"></a>å¤ç”¨åŠç¼“å­˜æœºåˆ¶</h2>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaæ³›å‹</title>
      <link href="/2021/11/25/java%E6%B3%9B%E5%9E%8B/"/>
      <url>/2021/11/25/java%E6%B3%9B%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="æ³›å‹ç¨‹åºè®¾è®¡"><a href="#æ³›å‹ç¨‹åºè®¾è®¡" class="headerlink" title="æ³›å‹ç¨‹åºè®¾è®¡"></a>æ³›å‹ç¨‹åºè®¾è®¡</h1><h2 id="ä»€ä¹ˆæ˜¯æ³›å‹ç¨‹åºè®¾è®¡ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ³›å‹ç¨‹åºè®¾è®¡ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ³›å‹ç¨‹åºè®¾è®¡ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æ³›å‹ç¨‹åºè®¾è®¡ï¼Ÿ</h2><p><strong>æ³›å‹ç¨‹åºè®¾è®¡</strong>ï¼ˆgeneric programmingï¼‰æ˜¯<a href="https://zh.wikipedia.org/wiki/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E8%AF%AD%E8%A8%80">ç¨‹åºè®¾è®¡è¯­è¨€</a>çš„ä¸€ç§é£æ ¼æˆ–<a href="https://zh.wikipedia.org/wiki/%E7%BC%96%E7%A8%8B%E8%8C%83%E5%9E%8B">èŒƒå¼</a>ã€‚æ³›å‹å…è®¸ç¨‹åºå‘˜åœ¨<a href="https://zh.wikipedia.org/wiki/%E5%BC%B7%E9%A1%9E%E5%9E%8B%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80">å¼ºç±»å‹ç¨‹åºè®¾è®¡è¯­è¨€</a>ä¸­ç¼–å†™ä»£ç æ—¶ä½¿ç”¨ä¸€äº›ä»¥åæ‰æŒ‡å®šçš„<a href="https://zh.wikipedia.org/wiki/%E7%B1%BB%E5%9E%8B">ç±»å‹</a>ï¼Œåœ¨<a href="https://zh.wikipedia.org/wiki/%E5%AE%9E%E4%BE%8B">å®ä¾‹åŒ–</a>æ—¶ä½œä¸ºå‚æ•°æŒ‡æ˜è¿™äº›ç±»å‹ã€‚å„ç§ç¨‹åºè®¾è®¡è¯­è¨€å’Œå…¶ç¼–è¯‘å™¨ã€è¿è¡Œç¯å¢ƒå¯¹æ³›å‹çš„æ”¯æŒå‡ä¸ä¸€æ ·ã€‚<a href="https://zh.wikipedia.org/wiki/Ada">Ada</a>ã€<a href="https://zh.wikipedia.org/wiki/Delphi">Delphi</a>ã€<a href="https://zh.wikipedia.org/wiki/Eiffel">Eiffel</a>ã€<a href="https://zh.wikipedia.org/wiki/Java">Java</a>ã€<a href="https://zh.wikipedia.org/wiki/C%E2%99%AF">C#</a>ã€<a href="https://zh.wikipedia.org/wiki/F">F#</a>ã€<a href="https://zh.wikipedia.org/wiki/Swift_(%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80)">Swift</a> å’Œ <a href="https://zh.wikipedia.org/wiki/Visual_Basic_.NET">Visual Basic .NET</a> ç§°ä¹‹ä¸ºæ³›å‹ï¼ˆgenericsï¼‰ï¼›<a href="https://zh.wikipedia.org/wiki/ML%E8%AF%AD%E8%A8%80">ML</a>ã€<a href="https://zh.wikipedia.org/wiki/Scala">Scala</a> å’Œ <a href="https://zh.wikipedia.org/wiki/Haskell">Haskell</a> ç§°ä¹‹ä¸º<a href="https://zh.wikipedia.org/wiki/%E5%8F%82%E6%95%B0%E5%A4%9A%E6%80%81">å‚æ•°å¤šæ€</a>ï¼ˆparametric polymorphismï¼‰ï¼›<a href="https://zh.wikipedia.org/wiki/C%2B%2B">C++</a> å’Œ <a href="https://zh.wikipedia.org/wiki/D%E8%AA%9E%E8%A8%80">D</a>ç§°ä¹‹ä¸º<a href="https://zh.wikipedia.org/wiki/%E6%A8%A1%E6%9D%BF_(C%2B%2B)">æ¨¡æ¿</a>ã€‚å…·æœ‰å¹¿æ³›å½±å“çš„1994å¹´ç‰ˆçš„ã€ŠDesign Patternsã€‹ä¸€ä¹¦ç§°ä¹‹ä¸ºå‚æ•°åŒ–ç±»å‹ï¼ˆparameterized typeï¼‰ã€‚</p><h2 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ³›å‹ç¨‹åºè®¾è®¡ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ³›å‹ç¨‹åºè®¾è®¡ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ³›å‹ç¨‹åºè®¾è®¡ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ³›å‹ç¨‹åºè®¾è®¡ï¼Ÿ</h2><ul><li><p><strong>æ³›å‹ç¼–ç¨‹å¯ä»¥å®ç°é€šç”¨ç®—æ³•</strong></p><p>åœ¨æœ‰æ³›å‹ç±»ä¹‹å‰ï¼Œæ³›å‹ç¨‹åºè®¾è®¡æ˜¯ç”¨<strong>ç»§æ‰¿</strong>å®ç°çš„ã€‚ç¨‹åºå‘˜å¿…é¡»ä½¿ç”¨<code>Object</code>ç¼–å†™ä½¿ç”¨äºå¤šç§ç±»å‹çš„ä»£ç ï¼Œè¿™å¾ˆç¹çï¼Œä¹Ÿå¾ˆä¸å®‰å…¨ã€‚</p><p>é€šè¿‡ä½¿ç”¨æ³›å‹ï¼Œç¨‹åºå‘˜å¯ä»¥å®ç°é€šç”¨ç®—æ³•ï¼Œè¿™äº›ç®—æ³•å¯ä»¥å¤„ç†ä¸åŒç±»å‹çš„é›†åˆï¼Œå¯ä»¥è‡ªå®šä¹‰ï¼Œå¹¶ä¸”ç±»å‹å®‰å…¨ä¸”æ˜“äºé˜…è¯»ã€‚æ³›å‹ç¨‹åºè®¾è®¡æ„å‘³ç€ç¼–å†™çš„ä»£ç å¯ä»¥å¯¹å¤šç§ä¸åŒç±»å‹çš„å¯¹è±¡é‡ç”¨ã€‚</p></li><li><p><strong>ç¼–è¯‘æ—¶çš„å¼ºç±»å‹æ£€æŸ¥</strong></p><p>æ³›å‹è¦æ±‚åœ¨å£°æ˜æ—¶æŒ‡å®šå®é™…æ•°æ®ç±»å‹ï¼ŒJava ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶ä¼šå¯¹æ³›å‹ä»£ç åšå¼ºç±»å‹æ£€æŸ¥ï¼Œå¹¶åœ¨ä»£ç è¿åç±»å‹å®‰å…¨æ—¶å‘å‡ºå‘Šè­¦ã€‚æ—©å‘ç°ï¼Œæ—©æ²»ç†ï¼ŒæŠŠéšæ‚£æ‰¼æ€äºæ‘‡ç¯®ï¼Œåœ¨ç¼–è¯‘æ—¶å‘ç°å¹¶ä¿®å¤é”™è¯¯æ‰€ä»˜å‡ºçš„ä»£ä»·è¿œæ¯”åœ¨è¿è¡Œæ—¶å°ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;String&gt; files = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">files.add(<span class="string">"..."</span>) <span class="comment">//true</span></span><br><span class="line">files.add(<span class="number">1</span>) <span class="comment">//can't</span></span><br></pre></td></tr></tbody></table></figure></li><li><p><strong>é¿å…äº†ç±»å‹è½¬æ¢</strong></p><p>æœªä½¿ç”¨æ³›å‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List list = <span class="keyword">new</span> ArrayList();</span><br><span class="line">list.add(<span class="string">"hello"</span>);</span><br><span class="line">String s = (String) list.get(<span class="number">0</span>);</span><br></pre></td></tr></tbody></table></figure><p>ä½¿ç”¨æ³›å‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">list.add(<span class="string">"hello"</span>);</span><br><span class="line">String s = list.get(<span class="number">0</span>);   <span class="comment">// no cast</span></span><br></pre></td></tr></tbody></table></figure></li></ul><h2 id="å®šä¹‰ç®€å•æ³›å‹"><a href="#å®šä¹‰ç®€å•æ³›å‹" class="headerlink" title="å®šä¹‰ç®€å•æ³›å‹"></a>å®šä¹‰ç®€å•æ³›å‹</h2><h3 id="æ³›å‹ç±»"><a href="#æ³›å‹ç±»" class="headerlink" title="æ³›å‹ç±»"></a>æ³›å‹ç±»</h3><p><strong>æ³›å‹ç±»</strong>å°±æ˜¯æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªç±»å‹å˜é‡çš„ç±»ã€‚</p><p>åœ¨æ³›å‹å‡ºç°ä¹‹å‰ï¼Œå¦‚æœä¸€ä¸ªç±»æƒ³æŒæœ‰ä¸€ä¸ªå¯ä»¥ä¸ºä»»æ„ç±»å‹çš„æ•°æ®ï¼Œåªèƒ½ä½¿ç”¨ <code>Object</code> åšç±»å‹è½¬æ¢ã€‚</p><ul><li>ä¸€ä¸ªç±»å‹å‚æ•°</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pair</span>&lt;<span class="title">T</span>&gt;</span>{</span><br><span class="line">    <span class="keyword">private</span> T first;</span><br><span class="line">    <span class="keyword">private</span> T second;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Pair</span><span class="params">()</span></span>{</span><br><span class="line">        first = <span class="keyword">null</span>;</span><br><span class="line">        second = <span class="keyword">null</span>;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Pair</span><span class="params">(T first, T second)</span></span>{</span><br><span class="line">        <span class="keyword">this</span>.first = first;</span><br><span class="line">        <span class="keyword">this</span>.second = second;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getFirst</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> first;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getSecond</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> second;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFirst</span><span class="params">(T newValue)</span></span>{</span><br><span class="line">        first = newValue;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSecond</span><span class="params">(T newValue)</span></span>{</span><br><span class="line">        second = newValue;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è¿™ä¸ªç±»ä¸­å¼•å…¥äº†ä¸€ä¸ªç±»å‹å˜é‡Tï¼Œç”¨å°–æ‹¬å·&lt;&gt;æ‹¬èµ·æ¥ï¼Œæ”¾åœ¨ç±»åçš„åé¢ã€‚</p><ul><li>æ³›å‹ç±»å¯ä»¥æœ‰å¾ˆå¤šä¸åŒç±»å‹çš„å˜é‡</li></ul><p>ä¾‹å¦‚æˆ‘ä»¬å®šä¹‰çš„Pairç±»ï¼Œç¬¬ä¸€ä¸ªå­—æ®µå’Œç¬¬äºŒä¸ªå­—æ®µå¯ä»¥ä½¿ç”¨ä¸åŒç±»å‹</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pair</span>&lt;<span class="title">T</span>, <span class="title">U</span>&gt;</span>{</span><br><span class="line">    <span class="keyword">private</span> T first;</span><br><span class="line">    <span class="keyword">private</span> U second;</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><blockquote><p><em>å¸¸è§çš„åšæ³•æ˜¯ç±»å‹å˜é‡ä½¿ç”¨å¤§å†™å­—æ¯ï¼Œè€Œä¸”å¾ˆç®€çŸ­ã€‚</em></p><p><em>javaåº“ä¸­ä½¿ç”¨å˜é‡Eè¡¨ç¤ºé›†åˆçš„å…ƒç´ ç±»å‹ï¼Œ</em></p><p><em>Kå’ŒVåˆ†åˆ«è¡¨ç¤ºè¡¨çš„é”®å’Œå€¼çš„ç±»å‹ã€‚</em></p><p><em>Tï¼ˆUã€Sï¼‰è¡¨ç¤ºâ€œä»»æ„ç±»å‹â€ã€‚</em></p></blockquote><ul><li>æ³›å‹ç±»å¯ä»¥ç±»å‹åµŒå¥—</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        Pair&lt;String&gt; info = <span class="keyword">new</span> Pair(<span class="string">"Hello"</span>);</span><br><span class="line">        MyMap&lt;Integer, Pair&lt;String&gt;&gt; map = <span class="keyword">new</span> MyMap&lt;&gt;(<span class="number">1</span>, info);</span><br><span class="line">        System.out.println(map);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="comment">// Output:</span></span><br><span class="line"><span class="comment">// MyMap{key=1, value=Pair{value=Hello}}</span></span><br></pre></td></tr></tbody></table></figure><p>å¯ä»¥ç”¨å…·ä½“çš„ç±»å‹æ›¿æ¢ç±»å‹å˜é‡æ¥<strong>å®ä¾‹åŒ–</strong>æ³›å‹ç±»å‹ã€‚</p><p>å¦‚ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        Pair&lt;Integer&gt; pair = <span class="keyword">new</span> Info&lt;&gt;();</span><br><span class="line">        pair.setFirst(<span class="number">10</span>);</span><br><span class="line">        System.out.println(pair.getFirst());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å¯ä»¥æŠŠå®ä¾‹åŒ–çš„ç»“æœæƒ³è±¡æˆä¸€ä¸ªæ™®é€šç±»ã€‚</p><p><strong>æ³›å‹ç±»ç›¸å½“äºæ™®é€šç±»çš„å·¥å‚</strong>ã€‚</p><h3 id="æ³›å‹æ¥å£"><a href="#æ³›å‹æ¥å£" class="headerlink" title="æ³›å‹æ¥å£"></a>æ³›å‹æ¥å£</h3><p>æ¥å£ä¹Ÿå¯ä»¥å£°æ˜æ³›å‹ã€‚</p><p>æ³›å‹æ¥å£è¯­æ³•å½¢å¼ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Content</span>&lt;<span class="title">T</span>&gt; </span>{</span><br><span class="line">    <span class="function">T <span class="title">text</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>æ³›å‹æ¥å£æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š</p><ul><li>å®ç°æ¥å£çš„å­ç±»æ˜ç¡®å£°æ˜æ³›å‹ç±»å‹</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericsInterfaceDemo01</span> <span class="keyword">implements</span> <span class="title">Content</span>&lt;<span class="title">Integer</span>&gt; </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> text;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">GenericsInterfaceDemo01</span><span class="params">(<span class="keyword">int</span> text)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.text = text;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">text</span><span class="params">()</span> </span>{ <span class="keyword">return</span> text; }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        GenericsInterfaceDemo01 demo = <span class="keyword">new</span> GenericsInterfaceDemo01(<span class="number">10</span>);</span><br><span class="line">        System.out.print(demo.text());</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="comment">// Output:</span></span><br><span class="line"><span class="comment">// 10</span></span><br></pre></td></tr></tbody></table></figure><ul><li>å®ç°æ¥å£çš„å­ç±»ä¸æ˜ç¡®å£°æ˜æ³›å‹ç±»å‹</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericsInterfaceDemo02</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">Content</span>&lt;<span class="title">T</span>&gt; </span>{</span><br><span class="line">    <span class="keyword">private</span> T text;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">GenericsInterfaceDemo02</span><span class="params">(T text)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.text = text;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">text</span><span class="params">()</span> </span>{ <span class="keyword">return</span> text; }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        GenericsInterfaceDemo02&lt;String&gt; gen = <span class="keyword">new</span> GenericsInterfaceDemo02&lt;&gt;(<span class="string">"ABC"</span>);</span><br><span class="line">        System.out.print(gen.text());</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="comment">// Output:</span></span><br><span class="line"><span class="comment">// ABC</span></span><br></pre></td></tr></tbody></table></figure><h3 id="æ³›å‹æ–¹æ³•"><a href="#æ³›å‹æ–¹æ³•" class="headerlink" title="æ³›å‹æ–¹æ³•"></a>æ³›å‹æ–¹æ³•</h3><p>è¿˜å¯ä»¥å®šä¹‰å¸¦æœ‰ç±»å‹å‚æ•°çš„æ–¹æ³•ã€‚</p><p>æ³›å‹æ–¹æ³•å¯ä»¥åœ¨æ³›å‹ç±»æˆ–æ™®é€šç±»ä¸­å®šä¹‰ã€‚</p><p><strong>ç±»å‹å˜é‡æ”¾åœ¨ä¿®é¥°ç¬¦åé¢ï¼Œè¿”å›ç±»å‹å‰é¢</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArrayAlg</span></span>{</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">getMiddle</span><span class="params">(T... a)</span></span>{</span><br><span class="line">        <span class="keyword">return</span> a[a.length / <span class="number">2</span>];</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">String middle = ArrayAlg.&lt;String&gt;getMiddle(<span class="string">"john"</span>, <span class="string">"Q."</span>, <span class="string">"public"</span>);</span><br><span class="line"><span class="comment">//å¯ä»¥çœç•¥&lt;String&gt;ç±»å‹å‚æ•°ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ç¼–è¯‘å™¨å¯ä»¥æ¨æ–­ã€‚ç±»å‹æ¨æ–­åªå¯¹èµ‹å€¼æ“ä½œæœ‰æ•ˆï¼Œå…¶ä»–æ—¶å€™å¹¶ä¸èµ·ä½œç”¨ã€‚</span></span><br><span class="line">String middle = ArrayAlg.getMiddle(<span class="string">"john"</span>, <span class="string">"Q."</span>, <span class="string">"public"</span>);</span><br></pre></td></tr></tbody></table></figure><h3 id="å˜é‡ç±»å‹çš„é™å®š"><a href="#å˜é‡ç±»å‹çš„é™å®š" class="headerlink" title="å˜é‡ç±»å‹çš„é™å®š"></a>å˜é‡ç±»å‹çš„é™å®š</h3><p>æœ‰æ—¶ï¼Œç±»æˆ–æ–¹æ³•éœ€è¦å¯¹ç±»å‹å˜é‡åŠ ä»¥çº¦æŸã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArrayAlg</span></span>{</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">min</span><span class="params">(T[] a)</span></span>{</span><br><span class="line">        <span class="keyword">if</span>(a == <span class="keyword">null</span> || a.length == <span class="number">0</span>)<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        T smallest = a[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; a.length; i++){</span><br><span class="line">            <span class="keyword">if</span>(smallest.compareTo(a[i]) &gt; <span class="number">0</span>){</span><br><span class="line">                smallest = a[i];</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> smallest;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼šå˜é‡smallestçš„ç±»å‹ä¸ºTï¼Œæ„å‘³ç€å®ƒå¯ä»¥ä½¿ä»»ä½•ä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½ä¿è¯Tæ‰€å±çš„ç±»æœ‰ä¸€ä¸ªcompareToæ–¹æ³•ã€‚</p><p>è§£å†³æ–¹æ³•æ˜¯é™åˆ¶Tåªèƒ½æ˜¯å®ç°äº†Comparableæ¥å£çš„ç±»</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T extends Comparable&gt; <span class="function">T <span class="title">min</span><span class="params">(T[] a)</span> ...</span></span><br></pre></td></tr></tbody></table></figure><p>ä¸€ä¸ªç±»å‹å˜é‡æˆ–é€šé…ç¬¦å¯ä»¥æœ‰å¤šä¸ªé™å®š</p><p><code>T extends Comparable &amp; Serializable</code></p><p>é™å®šç±»å‹ç”¨&amp;åˆ†éš”ã€‚<strong>å¯ä»¥æ ¹æ®éœ€è¦æ‹¥æœ‰å¤šä¸ªæ¥å£è¶…ç±»å‹ï¼Œä½†æœ€å¤šæœ‰ä¸€ä¸ªé™å®šå¯ä»¥æ˜¯ç±»ï¼Œä¸”è¯¥ç±»å¿…é¡»æ˜¯é™å®šåˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªé™å®šã€‚</strong></p><h2 id="æ³›å‹ä»£ç å’Œè™šæ‹Ÿæœº"><a href="#æ³›å‹ä»£ç å’Œè™šæ‹Ÿæœº" class="headerlink" title="æ³›å‹ä»£ç å’Œè™šæ‹Ÿæœº"></a>æ³›å‹ä»£ç å’Œè™šæ‹Ÿæœº</h2><h3 id="ç±»å‹æ“¦é™¤"><a href="#ç±»å‹æ“¦é™¤" class="headerlink" title="ç±»å‹æ“¦é™¤"></a>ç±»å‹æ“¦é™¤</h3><p>Java è¯­è¨€å¼•å…¥æ³›å‹æ˜¯ä¸ºäº†åœ¨ç¼–è¯‘æ—¶æä¾›æ›´ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥ï¼Œå¹¶æ”¯æŒæ³›å‹ç¼–ç¨‹ã€‚ä¸åŒäº C++ çš„æ¨¡æ¿æœºåˆ¶ï¼Œ<strong>Java æ³›å‹æ˜¯ä½¿ç”¨ç±»å‹æ“¦é™¤æ¥å®ç°çš„ï¼Œä½¿ç”¨æ³›å‹æ—¶ï¼Œä»»ä½•å…·ä½“çš„ç±»å‹ä¿¡æ¯éƒ½è¢«æ“¦é™¤äº†</strong>ã€‚</p><p>é‚£ä¹ˆï¼Œç±»å‹æ“¦é™¤åšäº†ä»€ä¹ˆå‘¢ï¼Ÿå®ƒåšäº†ä»¥ä¸‹å·¥ä½œï¼š</p><ul><li>æŠŠæ³›å‹ä¸­çš„æ‰€æœ‰ç±»å‹å‚æ•°æ›¿æ¢ä¸º Objectï¼Œå¦‚æœæŒ‡å®šç±»å‹è¾¹ç•Œï¼Œåˆ™ä½¿ç”¨ç±»å‹è¾¹ç•Œæ¥æ›¿æ¢ã€‚å› æ­¤ï¼Œç”Ÿæˆçš„å­—èŠ‚ç ä»…åŒ…å«æ™®é€šçš„ç±»ï¼Œæ¥å£å’Œæ–¹æ³•ã€‚</li><li>æ“¦é™¤å‡ºç°çš„ç±»å‹å£°æ˜ï¼Œå³å»æ‰ <code>&lt;&gt;</code> çš„å†…å®¹ã€‚æ¯”å¦‚ <code>T get()</code> æ–¹æ³•å£°æ˜å°±å˜æˆäº† <code>Object get()</code> ï¼›<code>List&lt;String&gt;</code> å°±å˜æˆäº† <code>List</code>ã€‚å¦‚æœ‰å¿…è¦ï¼Œæ’å…¥ç±»å‹è½¬æ¢ä»¥ä¿æŒç±»å‹å®‰å…¨ã€‚</li><li>ç”Ÿæˆæ¡¥æ¥æ–¹æ³•ä»¥ä¿ç•™æ‰©å±•æ³›å‹ç±»å‹ä¸­çš„å¤šæ€æ€§ã€‚ç±»å‹æ“¦é™¤ç¡®ä¿ä¸ä¸ºå‚æ•°åŒ–ç±»å‹åˆ›å»ºæ–°ç±»ï¼›å› æ­¤ï¼Œæ³›å‹ä¸ä¼šäº§ç”Ÿè¿è¡Œæ—¶å¼€é”€ã€‚</li></ul><h4 id="ç±»å‹å˜é‡æœªç»™å‡ºé™å®šæ—¶"><a href="#ç±»å‹å˜é‡æœªç»™å‡ºé™å®šæ—¶" class="headerlink" title="ç±»å‹å˜é‡æœªç»™å‡ºé™å®šæ—¶"></a>ç±»å‹å˜é‡æœªç»™å‡ºé™å®šæ—¶</h4><p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericsErasureTypeDemo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        List&lt;Object&gt; list1 = <span class="keyword">new</span> ArrayList&lt;Object&gt;();</span><br><span class="line">        List&lt;String&gt; list2 = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">        System.out.println(list1.getClass());</span><br><span class="line">        System.out.println(list2.getClass());</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="comment">// Output:</span></span><br><span class="line"><span class="comment">// class java.util.ArrayList</span></span><br><span class="line"><span class="comment">// class java.util.ArrayList</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p>ç¤ºä¾‹è¯´æ˜ï¼š</p><p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè™½ç„¶æŒ‡å®šäº†ä¸åŒçš„ç±»å‹å‚æ•°ï¼Œä½†æ˜¯ list1 å’Œ list2 çš„ç±»ä¿¡æ¯å´æ˜¯ä¸€æ ·çš„ã€‚</p><p>è¿™æ˜¯å› ä¸ºï¼š<strong>ä½¿ç”¨æ³›å‹æ—¶ï¼Œä»»ä½•å…·ä½“çš„ç±»å‹ä¿¡æ¯éƒ½è¢«æ“¦é™¤äº†</strong>ã€‚ç”¨Objectä»£æ›¿äº†ç±»å‹å˜é‡Tã€‚è¿™æ„å‘³ç€ï¼š<code>ArrayList&lt;Object&gt;</code> å’Œ <code>ArrayList&lt;String&gt;</code> åœ¨è¿è¡Œæ—¶ï¼ŒJVM å°†å®ƒä»¬è§†ä¸ºåŒä¸€ç±»å‹ã€‚</p><p>åœ¨list2ä¸­æˆ‘ä»¬ä¸èƒ½ç›´æ¥å¡«å…¥å…¶ä»–ç±»å‹çš„æ•°æ®ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡åå°„å¼ºè¡Œæ·»åŠ ã€‚</p></blockquote><h4 id="ç±»å‹å˜é‡ç»™å‡ºäº†é™å®š"><a href="#ç±»å‹å˜é‡ç»™å‡ºäº†é™å®š" class="headerlink" title="ç±»å‹å˜é‡ç»™å‡ºäº†é™å®š"></a>ç±»å‹å˜é‡ç»™å‡ºäº†é™å®š</h4><p>å¦‚ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Interval</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Comparable</span> &amp; <span class="title">Serializable</span>&gt; <span class="keyword">implements</span> <span class="title">Serializeable</span></span>{</span><br><span class="line">...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><blockquote><p>è¿™æ—¶ï¼Œä¼šç”¨Comparable æ›¿æ¢ç±»ä¸­çš„Tã€‚</p><p>å½“é™å®šç±»å‹åˆ‡æ¢ä¸º&lt;T extends  Serializable  &amp; Comparable&gt;æ—¶ï¼ŒåŸå§‹ç±»å‹ä¼šç”¨Serializableæ›¿æ¢Tï¼Œç¼–è¯‘å™¨ä¼šåœ¨å¿…è¦æ—¶å‘Comparableæ’å…¥å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚ä¸ºäº†æé«˜æ•ˆç‡ï¼Œåº”è¯¥å°†æ ‡ç­¾æ¥å£ï¼ˆå³æ²¡æœ‰æ–¹æ³•çš„æ¥å£ï¼‰æ”¾åœ¨é™å®šåˆ—è¡¨çš„æœ«å°¾ã€‚</p></blockquote><h3 id="è½¬æ¢æ³›å‹è¡¨è¾¾å¼"><a href="#è½¬æ¢æ³›å‹è¡¨è¾¾å¼" class="headerlink" title="è½¬æ¢æ³›å‹è¡¨è¾¾å¼"></a>è½¬æ¢æ³›å‹è¡¨è¾¾å¼</h3><p>ç¼–å†™ä¸€ä¸ªæ³›å‹æ–¹æ³•è°ƒç”¨æ—¶ï¼Œå¦‚æœæ“¦é™¤äº†è¿”å›ç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šæ’å…¥å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚</p><p>ä¾‹å¦‚:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Pair&lt;Employee&gt; buddies = ...;</span><br><span class="line">Employee buddy = buddies.getFirst();</span><br></pre></td></tr></tbody></table></figure><p>getFirstç±»å‹æ“¦å‡ºåè¿”å›ç±»å‹æ˜¯Objectã€‚ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ’å…¥è½¬æ¢åˆ°Employeeçš„å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚å³ï¼Œç¼–è¯‘å™¨æŠŠè¿™ä¸ªæ–¹æ³•è°ƒç”¨è½¬æ¢ä¸ºä¸¤æ¡è™šæ‹ŸæœºæŒ‡ä»¤ï¼š</p><ul><li>å¯¹åŸå§‹æ–¹æ³•Pair.getFirstçš„è°ƒç”¨ã€‚</li><li>å°†è¿”å›çš„Objectç±»å‹å¼ºåˆ¶è½¬æ¢ä¸ºEmployeeç±»å‹ã€‚</li></ul><h3 id="è½¬æ¢æ³›å‹æ–¹æ³•"><a href="#è½¬æ¢æ³›å‹æ–¹æ³•" class="headerlink" title="è½¬æ¢æ³›å‹æ–¹æ³•"></a>è½¬æ¢æ³›å‹æ–¹æ³•</h3><p>ç±»å‹æ“¦é™¤ä¼šé€ æˆå¤šæ€çš„å†²çªï¼Œè€ŒJVMè§£å†³æ–¹æ³•å°±æ˜¯<strong>æ¡¥æ¥æ–¹æ³•</strong>ã€‚</p><p>ç°åœ¨æœ‰è¿™æ ·ä¸€ä¸ªæ³›å‹ç±»ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pair</span>&lt;<span class="title">T</span>&gt; </span>{  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> T value;  </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getValue</span><span class="params">()</span> </span>{  </span><br><span class="line">        <span class="keyword">return</span> value;  </span><br><span class="line">    }  </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(T value)</span> </span>{  </span><br><span class="line">        <span class="keyword">this</span>.value = value;  </span><br><span class="line">    }  </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ç„¶åæˆ‘ä»¬æƒ³è¦ä¸€ä¸ªå­ç±»ç»§æ‰¿å®ƒã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DateInter</span> <span class="keyword">extends</span> <span class="title">Pair</span>&lt;<span class="title">Date</span>&gt; </span>{  </span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(Date value)</span> </span>{  </span><br><span class="line">        <span class="keyword">super</span>.setValue(value);  </span><br><span class="line">    }  </span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">getValue</span><span class="params">()</span> </span>{  </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.getValue();  </span><br><span class="line">    }  </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>åœ¨è¿™ä¸ªå­ç±»ä¸­ï¼Œæˆ‘ä»¬è®¾å®šçˆ¶ç±»çš„æ³›å‹ç±»å‹ä¸º<code>Pair&lt;Date&gt;</code>ï¼Œåœ¨å­ç±»ä¸­ï¼Œæˆ‘ä»¬è¦†ç›–äº†çˆ¶ç±»çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬çš„åŸæ„æ˜¯è¿™æ ·çš„ï¼šå°†çˆ¶ç±»çš„æ³›å‹ç±»å‹é™å®šä¸ºDateï¼Œé‚£ä¹ˆçˆ¶ç±»é‡Œé¢çš„ä¸¤ä¸ªæ–¹æ³•çš„å‚æ•°éƒ½ä¸ºDateç±»å‹ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨å­ç±»ä¸­é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•ä¸€ç‚¹é—®é¢˜ä¹Ÿæ²¡æœ‰ï¼Œä»ä»–ä»¬çš„<code>@Override</code>æ ‡ç­¾ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œä¸€ç‚¹é—®é¢˜ä¹Ÿæ²¡æœ‰ï¼Œå®é™…ä¸Šæ˜¯è¿™æ ·çš„å—ï¼Ÿ</p><p>åˆ†æï¼šå®é™…ä¸Šï¼Œç±»å‹æ“¦é™¤åï¼Œçˆ¶ç±»çš„çš„æ³›å‹ç±»å‹å…¨éƒ¨å˜ä¸ºäº†åŸå§‹ç±»å‹Objectï¼Œæ‰€ä»¥çˆ¶ç±»ç¼–è¯‘ä¹‹åä¼šå˜æˆä¸‹é¢çš„æ ·å­ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pair</span> </span>{  </span><br><span class="line">    <span class="keyword">private</span> Object value;  </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getValue</span><span class="params">()</span> </span>{  </span><br><span class="line">        <span class="keyword">return</span> value;  </span><br><span class="line">    }  </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(Object  value)</span> </span>{  </span><br><span class="line">        <span class="keyword">this</span>.value = value;  </span><br><span class="line">    }  </span><br><span class="line">} </span><br></pre></td></tr></tbody></table></figure><p>å†çœ‹å­ç±»çš„ä¸¤ä¸ªé‡å†™çš„æ–¹æ³•çš„ç±»å‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span>  </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(Date value)</span> </span>{  </span><br><span class="line">    <span class="keyword">super</span>.setValue(value);  </span><br><span class="line">}  </span><br><span class="line"><span class="meta">@Override</span>  </span><br><span class="line"><span class="function"><span class="keyword">public</span> Date <span class="title">getValue</span><span class="params">()</span> </span>{  </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.getValue();  </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å…ˆæ¥åˆ†æsetValueæ–¹æ³•ï¼Œçˆ¶ç±»çš„ç±»å‹æ˜¯Objectï¼Œè€Œå­ç±»çš„ç±»å‹æ˜¯Dateï¼Œå‚æ•°ç±»å‹ä¸ä¸€æ ·ï¼Œè¿™å¦‚æœæ˜¯åœ¨æ™®é€šçš„ç»§æ‰¿å…³ç³»ä¸­ï¼Œæ ¹æœ¬å°±ä¸ä¼šæ˜¯é‡å†™ï¼Œè€Œæ˜¯é‡è½½ã€‚ </p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªå·±çš„</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(Date value)</span></span>{...}</span><br><span class="line"><span class="comment">// ä»çˆ¶ç±»ç»§æ‰¿çš„</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(Object value)</span></span>{...}</span><br></pre></td></tr></tbody></table></figure><p>æˆ‘ä»¬åœ¨ä¸€ä¸ªmainæ–¹æ³•æµ‹è¯•ä¸€ä¸‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException </span>{  </span><br><span class="line">        DateInter dateInter = <span class="keyword">new</span> DateInter();  </span><br><span class="line">        dateInter.setValue(<span class="keyword">new</span> Date());                  </span><br><span class="line">        dateInter.setValue(<span class="keyword">new</span> Object()); <span class="comment">//ç¼–è¯‘é”™è¯¯  </span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœæ˜¯é‡è½½ï¼Œé‚£ä¹ˆå­ç±»ä¸­ä¸¤ä¸ªsetValueæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯å‚æ•°Objectç±»å‹ï¼Œä¸€ä¸ªæ˜¯Dateç±»å‹ï¼Œå¯æ˜¯æˆ‘ä»¬å‘ç°ï¼Œæ ¹æœ¬å°±æ²¡æœ‰è¿™æ ·çš„ä¸€ä¸ªå­ç±»ç»§æ‰¿è‡ªçˆ¶ç±»çš„Objectç±»å‹å‚æ•°çš„æ–¹æ³•ã€‚æ‰€ä»¥è¯´ï¼Œç¡®å®æ˜¯é‡å†™äº†ï¼Œè€Œä¸æ˜¯é‡è½½äº†ã€‚</p><p><strong>ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢</strong>ï¼Ÿ</p><p>åŸå› æ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä»¬ä¼ å…¥çˆ¶ç±»çš„æ³›å‹ç±»å‹æ˜¯<code>Date</code>ï¼Œ<code>Pair&lt;Date&gt;</code>ï¼Œæˆ‘ä»¬çš„æœ¬æ„æ˜¯å°†æ³›å‹ç±»å˜ä¸ºå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pair</span> </span>{  </span><br><span class="line">    <span class="keyword">private</span> Date value;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">getValue</span><span class="params">()</span> </span>{  </span><br><span class="line">        <span class="keyword">return</span> value;  </span><br><span class="line">    }  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(Date value)</span> </span>{  </span><br><span class="line">        <span class="keyword">this</span>.value = value;  </span><br><span class="line">    }  </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ç„¶ååœ¨å­ç±»ä¸­é‡å†™å‚æ•°ç±»å‹ä¸ºDateçš„é‚£ä¸¤ä¸ªæ–¹æ³•ï¼Œå®ç°ç»§æ‰¿ä¸­çš„å¤šæ€ã€‚</p><p>å¯æ˜¯ç”±äºç§ç§åŸå› ï¼Œè™šæ‹Ÿæœºå¹¶ä¸èƒ½å°†æ³›å‹ç±»å‹å˜ä¸ºDateï¼Œåªèƒ½å°†ç±»å‹æ“¦é™¤æ‰ï¼Œå˜ä¸ºåŸå§‹ç±»å‹Objectã€‚è¿™æ ·ï¼Œæˆ‘ä»¬çš„æœ¬æ„æ˜¯è¿›è¡Œé‡å†™ï¼Œå®ç°å¤šæ€ã€‚å¯æ˜¯ç±»å‹æ“¦é™¤åï¼Œåªèƒ½å˜ä¸ºäº†é‡è½½ã€‚è¿™æ ·ï¼Œç±»å‹æ“¦é™¤å°±å’Œå¤šæ€æœ‰äº†å†²çªã€‚JVMçŸ¥é“ä½ çš„æœ¬æ„å—ï¼ŸçŸ¥é“ï¼ï¼ï¼å¯æ˜¯å®ƒèƒ½ç›´æ¥å®ç°å—ï¼Œä¸èƒ½ï¼ï¼ï¼å¦‚æœçœŸçš„ä¸èƒ½çš„è¯ï¼Œé‚£æˆ‘ä»¬æ€ä¹ˆå»é‡å†™æˆ‘ä»¬æƒ³è¦çš„Dateç±»å‹å‚æ•°çš„æ–¹æ³•å‘¢ï¼Ÿ<span class="github-emoji"><span>ğŸ˜¢</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f622.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> </p><p><strong>äºæ˜¯JVMé‡‡ç”¨äº†ä¸€ä¸ªç‰¹æ®Šçš„æ–¹æ³•ï¼Œæ¥å®Œæˆè¿™é¡¹åŠŸèƒ½ï¼Œé‚£å°±æ˜¯æ¡¥æ–¹æ³•ã€‚</strong></p><p>é¦–å…ˆï¼Œæˆ‘ä»¬ç”¨javap -c classNameçš„æ–¹å¼åç¼–è¯‘ä¸‹DateInterå­ç±»çš„å­—èŠ‚ç ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">tao</span>.<span class="title">test</span>.<span class="title">DateInter</span> <span class="keyword">extends</span> <span class="title">com</span>.<span class="title">tao</span>.<span class="title">test</span>.<span class="title">Pair</span>&lt;<span class="title">java</span>.<span class="title">util</span>.<span class="title">Date</span>&gt; </span>{  </span><br><span class="line">  com.tao.test.DateInter();  </span><br><span class="line">    Code:  </span><br><span class="line">       <span class="number">0</span>: aload_0  </span><br><span class="line">       1: invokespecial #8                  // Method com/tao/test/Pair."&lt;init&gt;":()V  </span><br><span class="line">       <span class="number">4</span>: <span class="keyword">return</span>  </span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(java.util.Date)</span></span>;  <span class="comment">//æˆ‘ä»¬é‡å†™çš„setValueæ–¹æ³•  </span></span><br><span class="line">    Code:  </span><br><span class="line">       <span class="number">0</span>: aload_0  </span><br><span class="line">       <span class="number">1</span>: aload_1  </span><br><span class="line">       2: invokespecial #16                 // Method com/tao/test/Pair.setValue:(Ljava/lang/Object;)V  </span><br><span class="line">       <span class="number">5</span>: <span class="keyword">return</span>  </span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> java.util.<span class="function">Date <span class="title">getValue</span><span class="params">()</span></span>;    <span class="comment">//æˆ‘ä»¬é‡å†™çš„getValueæ–¹æ³•  </span></span><br><span class="line">    Code:  </span><br><span class="line">       <span class="number">0</span>: aload_0  </span><br><span class="line">       1: invokespecial #23                 // Method com/tao/test/Pair.getValue:()Ljava/lang/Object;  </span><br><span class="line">       4: checkcast     #26                 // class java/util/Date  </span><br><span class="line">       <span class="number">7</span>: areturn  </span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> java.lang.<span class="function">Object <span class="title">getValue</span><span class="params">()</span></span>;     <span class="comment">//ç¼–è¯‘æ—¶ç”±ç¼–è¯‘å™¨ç”Ÿæˆçš„æ¡¥æ–¹æ³•  </span></span><br><span class="line">    Code:  </span><br><span class="line">       <span class="number">0</span>: aload_0  </span><br><span class="line">       1: invokevirtual #28                 // Method getValue:()Ljava/util/Date å»è°ƒç”¨æˆ‘ä»¬é‡å†™çš„getValueæ–¹æ³•;  </span><br><span class="line">       <span class="number">4</span>: areturn  </span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(java.lang.Object)</span></span>;   <span class="comment">//ç¼–è¯‘æ—¶ç”±ç¼–è¯‘å™¨ç”Ÿæˆçš„æ¡¥æ–¹æ³•  </span></span><br><span class="line">    Code:  </span><br><span class="line">       <span class="number">0</span>: aload_0  </span><br><span class="line">       <span class="number">1</span>: aload_1  </span><br><span class="line">       2: checkcast     #26                 // class java/util/Date  </span><br><span class="line">       5: invokevirtual #30                 // Method setValue:(Ljava/util/Date; å»è°ƒç”¨æˆ‘ä»¬é‡å†™çš„setValueæ–¹æ³•)V  </span><br><span class="line">       <span class="number">8</span>: <span class="keyword">return</span>  </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ä»ç¼–è¯‘çš„ç»“æœæ¥çœ‹ï¼Œæˆ‘ä»¬æœ¬æ„é‡å†™setValueå’ŒgetValueæ–¹æ³•çš„å­ç±»ï¼Œç«Ÿç„¶æœ‰4ä¸ªæ–¹æ³•ï¼Œå…¶å®ä¸ç”¨æƒŠå¥‡ï¼Œæœ€åçš„ä¸¤ä¸ªæ–¹æ³•ï¼Œå°±æ˜¯ç¼–è¯‘å™¨è‡ªå·±ç”Ÿæˆçš„æ¡¥æ–¹æ³•ã€‚å¯ä»¥çœ‹åˆ°æ¡¥æ–¹æ³•çš„å‚æ•°ç±»å‹éƒ½æ˜¯Objectï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå­ç±»ä¸­çœŸæ­£è¦†ç›–çˆ¶ç±»ä¸¤ä¸ªæ–¹æ³•çš„å°±æ˜¯è¿™ä¸¤ä¸ªæˆ‘ä»¬çœ‹ä¸åˆ°çš„æ¡¥æ–¹æ³•ã€‚è€Œæ‰“åœ¨æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„setvalueå’ŒgetValueæ–¹æ³•ä¸Šé¢çš„@Overrideåªä¸è¿‡æ˜¯å‡è±¡ã€‚è€Œæ¡¥æ–¹æ³•çš„å†…éƒ¨å®ç°ï¼Œå°±åªæ˜¯å»è°ƒç”¨æˆ‘ä»¬è‡ªå·±é‡å†™çš„é‚£ä¸¤ä¸ªæ–¹æ³•ã€‚</p><p>å…³äºsetValue()æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(Date value)</span></span>{...}</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(Object value)</span></span>{</span><br><span class="line">    setValue((String)value);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>æ¡¥æ–¹æ³•å†…éƒ¨å…¶å®å°±æ˜¯è°ƒç”¨äº†æˆ‘ä»¬è‡ªå·±çš„ setValue æ–¹æ³•ï¼Œè¿™æ ·å°±é¿å…äº†åœ¨é‡å†™çš„æ—¶å€™æˆ‘ä»¬è¿˜èƒ½è°ƒç”¨åˆ°çˆ¶ç±»çš„æ–¹æ³•ã€‚è§£å†³ç±»å‹æ“¦é™¤ä¸å¤šæ€ä¹‹é—´çš„å†²çªã€‚</p><p>å…³äºgetValue()æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªå·±å®šä¹‰çš„æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getValue</span><span class="params">()</span></span>{...}</span><br><span class="line"><span class="comment">// ç¼–è¯‘å™¨ç”Ÿæˆçš„æ¡¥æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">getValue</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">return</span> getValue();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å­ç±»ä¸­çš„æ¡¥æ–¹æ³•<code>Object getValue()</code>å’Œ<code>Date getValue()</code>æ˜¯åŒæ—¶å­˜åœ¨çš„ï¼Œå¯æ˜¯å¦‚æœæ˜¯å¸¸è§„çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œä»–ä»¬çš„æ–¹æ³•ç­¾åæ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿå°±æ˜¯è¯´è™šæ‹Ÿæœºæ ¹æœ¬ä¸èƒ½åˆ†åˆ«è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚å¦‚æœæ˜¯æˆ‘ä»¬è‡ªå·±ç¼–å†™Javaä»£ç ï¼Œè¿™æ ·çš„ä»£ç æ˜¯æ— æ³•é€šè¿‡ç¼–è¯‘å™¨çš„æ£€æŸ¥çš„ï¼Œä½†æ˜¯è™šæ‹Ÿæœºå´æ˜¯å…è®¸è¿™æ ·åšçš„ï¼Œå› ä¸ºè™šæ‹Ÿæœºé€šè¿‡å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹æ¥ç¡®å®šä¸€ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ä¸ºäº†å®ç°æ³›å‹çš„å¤šæ€å…è®¸è‡ªå·±åšè¿™ä¸ªçœ‹èµ·æ¥â€œä¸åˆæ³•â€çš„äº‹æƒ…ï¼Œç„¶åäº¤ç»™è™šæ‹Ÿå™¨å»åŒºåˆ«ã€‚</p><p>å¦‚æœè¿™æ˜¯ä¸€ä¸ªæ™®é€šçš„ç»§æ‰¿å…³ç³»ï¼š</p><p>é‚£ä¹ˆçˆ¶ç±»çš„setValueæ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">getValue</span><span class="params">()</span> </span>{  </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.getValue();  </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è€Œå­ç±»é‡å†™çš„æ–¹æ³•æ˜¯ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Date <span class="title">getValue</span><span class="params">()</span> </span>{  </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.getValue();  </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è¿™åœ¨æ™®é€šçš„ç±»ç»§æ‰¿ä¸­ä¹Ÿæ˜¯æ™®éå­˜åœ¨çš„é‡å†™ï¼Œè¿™å°±æ˜¯<strong>åå˜</strong>ã€‚</p><h3 id="æ€»ä¹‹"><a href="#æ€»ä¹‹" class="headerlink" title="æ€»ä¹‹"></a>æ€»ä¹‹</h3><p>å¯¹äºJavaæ³›å‹è½¬æ¢ï¼Œéœ€è¦è®°ä½ä»¥ä¸‹å‡ ä¸ªäº‹å®ï¼š</p><ul><li>è™šæ‹Ÿæœºä¸­æ²¡æœ‰æ³›å‹ï¼Œåªæœ‰æ™®é€šçš„ç±»å’Œæ–¹æ³•ã€‚</li><li>æ‰€æœ‰çš„ç±»å‹å‚æ•°éƒ½ä¼šæ›¿æ¢ä¸ºå®ƒä»¬çš„é™å®šç±»å‹ã€‚</li><li>ä¼šåˆæˆæ¡¥æ–¹æ³•æ¥ä¿æŒå¤šæ€ã€‚</li><li>ä¸ºä¿æŒç±»å‹å®‰å…¨æ€§ï¼Œå¿…è¦æ—¶ä¼šæ’å…¥å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚</li></ul><h2 id="æ³›å‹ç±»å‹çš„ç»§æ‰¿è§„åˆ™"><a href="#æ³›å‹ç±»å‹çš„ç»§æ‰¿è§„åˆ™" class="headerlink" title="æ³›å‹ç±»å‹çš„ç»§æ‰¿è§„åˆ™"></a>æ³›å‹ç±»å‹çš„ç»§æ‰¿è§„åˆ™</h2><p>è€ƒè™‘ä¸€ä¸ªç±»å’Œä¸€ä¸ªå­ç±»ï¼Œå¦‚Employeeå’ŒManagerã€‚Pair&lt;Manager&gt;æ˜¯Pair&lt;Employee&gt;çš„ä¸€ä¸ªå­ç±»å—?</p><p>ç­”æ¡ˆæ˜¯ï¼šâ€œä¸æ˜¯â€ã€‚</p><img src="https://i.bmp.ovh/imgs/2021/11/fd2648b9ff1a066b.jpg" style="zoom:50%;"><p>æ— è®ºSå’ŒTæœ‰ä»€ä¹ˆå…³ç³»ï¼Œé€šå¸¸Pair&lt;S&gt;å’ŒPair&lt;T&gt;éƒ½æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚</p><p><strong>è¿™é‡Œå°±çœ‹åˆ°æ³›å‹ç±»å‹å’Œjavaæ•°ç»„ä¹‹é—´ä¸€ä¸ªé‡è¦çš„åŒºåˆ«ï¼Œå¯ä»¥å°†ä¸€ä¸ªManager[]æ•°ç»„èµ‹ç»™ä¸€ä¸ªç±»å‹ä¸ºEmployee[]çš„å˜é‡ã€‚</strong></p><p>æ­£æ˜¯ç”±äºæ³›å‹æ—¶åŸºäºç±»å‹æ“¦é™¤å®ç°çš„ï¼Œæ‰€ä»¥ï¼Œ<strong>æ³›å‹ç±»å‹æ— æ³•å‘ä¸Šè½¬å‹</strong>ã€‚</p><blockquote><p>å‘ä¸Šè½¬å‹æ˜¯æŒ‡ç”¨å­ç±»å®ä¾‹å»åˆå§‹åŒ–çˆ¶ç±»ï¼Œè¿™æ˜¯é¢å‘å¯¹è±¡ä¸­å¤šæ€çš„é‡è¦è¡¨ç°ã€‚</p></blockquote><p>è¿™æ˜¯å› ä¸ºï¼Œæ³›å‹ç±»å¹¶æ²¡æœ‰è‡ªå·±ç‹¬æœ‰çš„ <code>Class</code> ç±»å¯¹è±¡ã€‚æ¯”å¦‚ï¼šå¹¶ä¸å­˜åœ¨ <code>Pair&lt;Manager&gt;.class</code> æˆ–æ˜¯ <code>Pair&lt;Employee&gt;.class</code>ï¼ŒJava ç¼–è¯‘å™¨ä¼šå°†äºŒè€…éƒ½è§†ä¸º <code>Pair.class</code>ã€‚</p><p><strong>æ³›å‹ä¸èƒ½ç”¨äºæ˜¾å¼åœ°å¼•ç”¨è¿è¡Œæ—¶ç±»å‹çš„æ“ä½œä¹‹ä¸­ï¼Œä¾‹å¦‚ï¼šè½¬å‹ã€instanceof æ“ä½œå’Œ new è¡¨è¾¾å¼ã€‚å› ä¸ºæ‰€æœ‰å…³äºå‚æ•°çš„ç±»å‹ä¿¡æ¯éƒ½ä¸¢å¤±äº†</strong>ã€‚å½“ä½ åœ¨ç¼–å†™æ³›å‹ä»£ç æ—¶ï¼Œå¿…é¡»æ—¶åˆ»æé†’è‡ªå·±ï¼Œä½ åªæ˜¯çœ‹èµ·æ¥å¥½åƒæ‹¥æœ‰æœ‰å…³å‚æ•°çš„ç±»å‹ä¿¡æ¯è€Œå·²ã€‚</p><p>æ³›å‹ç±»å¯ä»¥æ‰©å±•æˆ–å®ç°å…¶ä»–çš„æ³›å‹ç±»ï¼Œå°±è¿™ä¸€ç‚¹è€Œè¨€ï¼Œå®ƒä»¬ä¸æ™®é€šçš„ç±»æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚ä¾‹å¦‚ï¼šArrayList&lt;T&gt;ç±»å®ç°äº†List&lt;T&gt;æ¥å£ã€‚è¿™æ„å‘³ç€ä¸€ä¸ªArrayList&lt;Manager&gt;å¯ä»¥è½¬æ¢ä¸ºä¸€ä¸ªList&lt;Manager&gt;ã€‚ä½†æ˜¯ï¼ŒArrayList&lt;Manager&gt;ä¸æ˜¯ä¸€ä¸ªArrayList&lt;Manager&gt;æˆ–List&lt;Manager&gt;ã€‚</p><img src="https://i.bmp.ovh/imgs/2021/11/3cb4dd71f3ee8622.jpg" style="zoom:40%;"><h2 id="é€šé…ç¬¦ç±»å‹"><a href="#é€šé…ç¬¦ç±»å‹" class="headerlink" title="é€šé…ç¬¦ç±»å‹"></a>é€šé…ç¬¦ç±»å‹</h2><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><p>åœ¨é€šé…ç¬¦ç±»å‹ä¸­ï¼Œå…è®¸ç±»å‹å‚æ•°å‘ç”Ÿå˜åŒ–ã€‚</p><p>ç±»å‹é€šé…ç¬¦ä¸€èˆ¬æ˜¯ä½¿ç”¨ <code>?</code> ä»£æ›¿å…·ä½“çš„ç±»å‹å‚æ•°ã€‚ä¾‹å¦‚ <code>List&lt;?&gt;</code> åœ¨é€»è¾‘ä¸Šæ˜¯ <code>List&lt;String&gt;</code> ï¼Œ<code>List&lt;Integer&gt;</code> ç­‰æ‰€æœ‰ <code>List&lt;å…·ä½“ç±»å‹å®å‚&gt;</code> çš„çˆ¶ç±»ã€‚</p><h3 id="ä¸Šç•Œé€šé…ç¬¦"><a href="#ä¸Šç•Œé€šé…ç¬¦" class="headerlink" title="ä¸Šç•Œé€šé…ç¬¦"></a>ä¸Šç•Œé€šé…ç¬¦</h3><p>å¯ä»¥ä½¿ç”¨<strong>ä¸Šç•Œé€šé…ç¬¦</strong>æ¥ç¼©å°ç±»å‹å‚æ•°çš„ç±»å‹èŒƒå›´ã€‚</p><p>å®ƒçš„è¯­æ³•å½¢å¼ä¸ºï¼š<code>&lt;? extends çˆ¶ç±»&gt;</code>å¯ä»¥è¡¨ç¤ºæ‰€æœ‰ç»§æ‰¿äº†è¯¥çˆ¶ç±»çš„å­ç±»ã€‚</p><p><strong>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨é€šé…ç¬¦æ¥å‘ä¸Šè½¬å‹</strong>ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å·²ç»å®ä¾‹åŒ–3ä¸ªManager m1, m2, m3;</span></span><br><span class="line">Pair&lt;Manager&gt; managers = <span class="keyword">new</span> Pair&lt;Manager&gt;(m1, m2);</span><br><span class="line">Pair&lt;? extends Employee&gt; employees = managers; <span class="comment">//Ok </span></span><br><span class="line">employees.setFirst(m3);<span class="comment">//ç¼–è¯‘ä¸é€šè¿‡</span></span><br></pre></td></tr></tbody></table></figure><p>ä¸ºä»€ä¹ˆæœ€åä¸€è¡Œç¼–è¯‘ä¸é€šè¿‡å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬æ¥çœ‹ç±»å‹<code>Pair&lt;? extends Employee&gt;</code>å®ƒçš„æ–¹æ³•å¦‚ä¸‹ï¼š</p><p><code>? extends Employee getFirst()</code></p><p><code>void setFirst(? extends Employee)</code></p><p>è¿™æ ·å°†ä¸å¯èƒ½è°ƒç”¨<code>setFirst</code>æ–¹æ³•ã€‚ç¼–è¯‘å™¨åªçŸ¥é“éœ€è¦Employeeçš„æŸä¸ªå­ç±»å‹ï¼Œä½†ä¸çŸ¥é“å…·ä½“æ˜¯ä»€ä¹ˆç±»å‹ã€‚æ¯•ç«Ÿ<code>?</code>ä¸èƒ½åŒ¹é…ã€‚</p><p>è€Œ<code>getFirst</code>å°±ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼šå°†<code>getFirst</code>çš„è¿”å›å€¼èµ‹ç»™ä¸€ä¸ªEmployeeå¼•ç”¨æ˜¯å®Œå…¨åˆæ³•çš„ã€‚</p><h3 id="ä¸‹ç•Œé€šé…ç¬¦"><a href="#ä¸‹ç•Œé€šé…ç¬¦" class="headerlink" title="ä¸‹ç•Œé€šé…ç¬¦"></a>ä¸‹ç•Œé€šé…ç¬¦</h3><p><strong>ä¸‹ç•Œé€šé…ç¬¦</strong>å°†æœªçŸ¥ç±»å‹é™åˆ¶ä¸ºè¯¥ç±»å‹çš„ç‰¹å®šç±»å‹æˆ–è¶…ç±»ç±»å‹ã€‚</p><blockquote><p>ğŸ”” æ³¨æ„ï¼š<strong>ä¸Šç•Œé€šé…ç¬¦å’Œä¸‹ç•Œé€šé…ç¬¦ä¸èƒ½åŒæ—¶ä½¿ç”¨</strong>ã€‚</p></blockquote><p>å®ƒçš„è¯­æ³•å½¢å¼ä¸ºï¼š<code>&lt;? super å­ç±»&gt;</code>å®ƒå°†ç±»å‹é™åˆ¶ä¸ºè¯¥å­ç±»çš„æ‰€æœ‰çˆ¶ç±»ã€‚</p><p>å¸¦æœ‰è¶…ç±»å‹é™å®šçš„é€šé…ç¬¦çš„è¡Œä¸ºä¸ä¸Šé¢æ‰€è®²çš„ä¸Šç•Œé€šé…ç¬¦ç›¸åã€‚å¯ä»¥ä¸ºæ–¹æ³•æä¾›å‚æ•°ï¼Œä½†ä¸èƒ½ä½¿ç”¨è¿”å›å€¼ã€‚</p><p>ä¾‹å¦‚<code>Pair&lt;? super Manager&gt;</code>æœ‰å¦‚ä¸‹æ–¹æ³•ï¼š</p><p><code>void setFirst(? super Manager)</code></p><p><code>? super Manager getFirst()</code></p><p>ç¼–è¯‘å™¨æ— æ³•çŸ¥é“<code>setFirst</code>æ–¹æ³•çš„å…·ä½“ç±»å‹ï¼Œå› æ­¤ä¸èƒ½æ¥å—å‚æ•°ç±»å‹ä¸º<code>Employee</code>æˆ–<code>Object</code>çš„æ–¹æ³•è°ƒç”¨ã€‚åªèƒ½ä¼ é€’<code>Manager</code>çš„å¯¹è±¡ï¼Œæˆ–è€…æŸä¸ªå­ç±»å‹å¯¹è±¡ã€‚å¦å¤–ï¼Œå¦‚æœè°ƒç”¨<code>getFirst</code>ï¼Œä¸èƒ½ä¿è¯è¿”å›å¯¹è±¡çš„ç±»å‹ï¼Œåªèƒ½æŠŠå®ƒèµ‹ç»™ä¸€ä¸ª<code>Object</code>ã€‚</p><img src="https://i.bmp.ovh/imgs/2021/11/2842e70b0096df34.jpg" style="zoom:33%;"><p><strong>ç›´è§‚çš„è®²ï¼Œå¸¦æœ‰è¶…ç±»å‹é™å®šçš„é€šé…ç¬¦å…è®¸ä½ å†™å…¥ä¸€ä¸ªæ³›å‹å¯¹è±¡ï¼Œè€Œå¸¦æœ‰å­ç±»å‹é™å®šçš„é€šé…ç¬¦å…è®¸ä½ è¯»å–ä¸€ä¸ªæ³›å‹å¯¹è±¡ã€‚</strong></p><h3 id="æ— é™å®šé€šé…ç¬¦"><a href="#æ— é™å®šé€šé…ç¬¦" class="headerlink" title="æ— é™å®šé€šé…ç¬¦"></a>æ— é™å®šé€šé…ç¬¦</h3><p>æ— ç•Œé€šé…ç¬¦ä½œç”¨ï¼š</p><ul><li>æ¥å—ä»»ä½•æ³›å‹ç±»å‹æ•°æ®</li><li>å®ç°ä¸ä¾èµ–äºå…·ä½“ç±»å‹å‚æ•°çš„ç®€å•æ–¹æ³•,å¦‚éç©ºåˆ¤æ–­ï¼Œsize()ï¼Œclear() ç­‰æ–¹æ³•</li><li>ç”¨äºæ•è·å‚æ•°ç±»å‹å¹¶äº¤ç”±æ³›å‹æ–¹æ³•è¿›è¡Œå¤„ç†</li></ul><p>è¯­æ³•å½¢å¼ï¼š<code>&lt;?&gt;</code></p><p>ä¾‹å¦‚:<code>Pair&lt;?&gt;</code></p><p>å®ƒæœ‰ä»¥ä¸‹æ–¹æ³•ï¼š</p><p><code>? getFirst()</code></p><p><code>void setFirst(?)</code></p><p><code>getFirst</code>çš„è¿”å›å€¼åªèƒ½èµ‹ç»™ä¸€ä¸ª<code>Object</code>ã€‚<code>setFirst</code>æ–¹æ³•ä¸èƒ½è¢«è°ƒç”¨ã€‚<strong>ç”šè‡³ä¸èƒ½ç”¨Objectè°ƒç”¨</strong>ã€‚</p><p><code>Pair\&lt;?&gt;</code>å’Œ<code>Pair</code>çš„æœ¬è´¨åŒºåˆ«åœ¨äºï¼šå¯ä»¥ç”¨ä»»æ„Objectå¯¹è±¡è°ƒç”¨åŸå§‹Pairç±»çš„setFirstæ–¹æ³•ã€‚</p><h2 id="é™åˆ¶ä¸å±€é™æ€§"><a href="#é™åˆ¶ä¸å±€é™æ€§" class="headerlink" title="é™åˆ¶ä¸å±€é™æ€§"></a>é™åˆ¶ä¸å±€é™æ€§</h2><p>ğŸ”” æ³›å‹ç±»çš„æ„é€ å™¨ä¸èƒ½åŠ å…¥&lt;&gt;æ‹¬èµ·æ¥çš„ç±»å‹å‚æ•°ã€‚</p><p>ğŸ”” æ³›å‹çš„æŒ‡å®šä¸­<strong>ä¸èƒ½ä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹</strong>ï¼ŒåŸºæœ¬ç±»å‹ä¸æ˜¯ Object å­ç±»ï¼Œåº”è¯¥ä½¿ç”¨åŒ…è£…ç±»æ›¿æ¢ã€‚</p><p>ğŸ”” ä¸èƒ½åˆ›å»ºç±»å‹å‚æ•°çš„å®ä¾‹ã€‚å¦‚æœæˆ‘ä»¬ç¡®å®éœ€è¦å®ä¾‹åŒ–ä¸€ä¸ªæ³›å‹ï¼Œå¯ä»¥é€šè¿‡åå°„å®ç°ã€‚</p><p>ğŸ”” åœ¨ç±»/æ¥å£ä¸Šå£°æ˜çš„æ³›å‹ï¼Œåœ¨æœ¬ç±»æˆ–æœ¬æ¥å£ä¸­å³ä»£è¡¨æŸç§ç±»å‹ï¼Œå¯ä»¥ä½œä¸ºéé™æ€å±æ€§çš„ç±»å‹ã€éé™æ€æ–¹æ³•çš„å‚æ•°ç±»å‹ã€éé™æ€æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ã€‚<strong>ä½†åœ¨é™æ€æ–¹æ³•ä¸­ä¸èƒ½ä½¿ç”¨ç±»çš„æ³›å‹ã€‚</strong></p><p>ğŸ”” ä¸èƒ½catch æˆ– throwæ³›å‹ç±»çš„å¯¹è±¡ã€‚äº‹å®ä¸Šï¼Œæ³›å‹ç±»æ‰©å±•Throwableéƒ½ä¸åˆæ³•ã€‚</p><p>å³</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Problem</span>&lt;<span class="title">T</span>&gt; <span class="keyword">extends</span> <span class="title">Exception</span> </span>{</span><br><span class="line">...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ä¸ä¼šé€šè¿‡ç¼–è¯‘ã€‚</p><p>ä½†æ˜¯åœ¨å¼‚å¸¸<strong>å£°æ˜</strong>ä¸­å¯ä»¥ä½¿ç”¨ç±»å‹å˜é‡ã€‚ä¸‹é¢æ–¹æ³•æ˜¯åˆæ³•çš„ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span>&lt;T extends Throwable&gt; <span class="function"><span class="keyword">void</span> <span class="title">doWork</span><span class="params">(T t)</span> <span class="keyword">throws</span> T </span>{</span><br><span class="line">    <span class="keyword">try</span>{</span><br><span class="line">        ...</span><br><span class="line">    } <span class="keyword">catch</span>(Throwable realCause) {</span><br><span class="line">        t.initCause(realCause);</span><br><span class="line">        <span class="keyword">throw</span> t; </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ä¸Šé¢çš„è¿™æ ·ä½¿ç”¨æ˜¯æ²¡é—®é¢˜çš„ã€‚</p><p>ğŸ”” å¦‚æœæ³›å‹ç»“æ„æ˜¯ä¸€ä¸ª<strong>æ¥å£æˆ–æŠ½è±¡ç±»ï¼Œåˆ™ä¸å¯åˆ›å»ºæ³›å‹ç±»çš„å¯¹è±¡</strong>ã€‚</p><p>ğŸ”” æ³›å‹<strong>ä¸åŒçš„å¼•ç”¨ä¸èƒ½ç›¸äº’èµ‹å€¼</strong>ã€‚</p><p>ä¾‹å¦‚<code>Pair&lt;String&gt;</code>çš„å¯¹è±¡ä¸èƒ½èµ‹å€¼ç»™<code>Pair&lt;Integer&gt;</code>çš„å¯¹è±¡ã€‚</p><p>ğŸ”” å®ä¾‹åŒ–åï¼Œæ“ä½œåŸæ¥æ³›å‹çš„ç»“æ„å¿…é¡»ä¸æŒ‡å®šçš„æ³›å‹ç±»å‹ä¸€è‡´ã€‚</p><p>ğŸ”” æ³›å‹æ— æ³•ä½¿ç”¨ Instance of å’Œ getClass() è¿›è¡Œç±»å‹åˆ¤æ–­</p><p>ğŸ”” æ³›å‹å¦‚æœä¸æŒ‡å®šï¼Œå°†è¢«<strong>æ“¦é™¤</strong>ï¼Œæ³›å‹å¯¹åº”çš„ç±»å‹å‡æŒ‰ç…§<code>Object</code>å¤„ç†ï¼Œä½†ä¸ç­‰ä»·äº<code>Object</code></p><p>ğŸ””  ä»…ä»…æ˜¯æ³›å‹ç±»ç›¸åŒï¼Œè€Œç±»å‹å‚æ•°ä¸åŒçš„æ–¹æ³•ä¸èƒ½é‡è½½ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Example</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(Set&lt;String&gt; strSet)</span> </span>{ }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(Set&lt;Integer&gt; intSet)</span> </span>{ } <span class="comment">// ç¼–è¯‘é”™è¯¯</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ğŸ”” å…³äºæ³›å‹æ•°ç»„</p><p>ä¸èƒ½åˆ›å»ºå‚æ•°åŒ–ç±»å‹çš„æ•°ç»„</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> table = <span class="keyword">new</span> Pair&lt;String&gt;[<span class="number">10</span>];  <span class="comment">//ERROR</span></span><br></pre></td></tr></tbody></table></figure><p>è¿™æ˜¯å› ä¸ºæ“¦é™¤ä¹‹åï¼Œtableçš„ç±»å‹è½¬æ¢ä¸ºObject[]ï¼Œæ•°ç»„ä¼šè®°ä½å®ƒçš„å…ƒç´ ç±»å‹ï¼Œå¦‚æœè¯•å›¾å­˜å‚¨å…¶ä»–ç±»å‹çš„å…ƒç´ ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ä¸è¿‡å¯¹äºæ³›å‹ç±»å‹ï¼Œæ“¦é™¤ä½¿å¾—è¿™ç§æœºåˆ¶æ— æ•ˆã€‚å¯¹äº<code>Object[0] = new Pair&lt;Employee&gt;()</code>å°½ç®¡èƒ½é€šè¿‡æ•°ç»„å­˜å‚¨çš„æ£€æŸ¥ï¼Œä»ä¼šå¯¼è‡´ä¸€ä¸ªç±»å‹é”™è¯¯ã€‚æ‰€ä»¥ï¼Œä¸å…è®¸åˆ›å»ºæ³›å‹æ•°ç»„ã€‚</p><p>å¯ä»¥å£°æ˜é€šé…ç±»å‹çš„æ•°ç»„ï¼Œç„¶åè¿›è¡Œå¼ºåˆ¶è½¬æ¢ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> table = (Pair&lt;String&gt;[]) <span class="keyword">new</span> Pair&lt;?&gt;[<span class="number">10</span>];  <span class="comment">//OK,ä½†ä¸å®‰å…¨</span></span><br></pre></td></tr></tbody></table></figure><p>æ‰€ä»¥ï¼Œå¦‚æœæƒ³è¦æ”¶é›†å‚æ•°åŒ–ç±»å‹å¯¹è±¡ï¼Œç®€å•çš„ä½¿ç”¨ArrayListæ›´æœ‰æ•ˆã€‚</p><p>å‚è€ƒèµ„æ–™åŠåšå®¢ï¼š</p><p>ã€Šjavaæ ¸å¿ƒæŠ€æœ¯å·Iã€‹</p><p>JavaåŸºç¡€â€”â€”æ³›å‹æœºåˆ¶è¯¦è§£   é“¾æ¥ï¼š<a href="https://pdai.tech/md/java/basic/java-basic-x-generic.html">https://pdai.tech/md/java/basic/java-basic-x-generic.html</a></p><p>æ·±å…¥ç†è§£Javaæ³›å‹   é“¾æ¥ï¼š<a href="https://dunwu.github.io/javacore/basics/java-generic.html">https://dunwu.github.io/javacore/basics/java-generic.html</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€è§„åˆ’</title>
      <link href="/2021/10/25/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
      <url>/2021/10/25/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Activityçš„æ„æˆåŠäº‹ä»¶åˆ†å‘æœºåˆ¶</title>
      <link href="/2021/10/24/Activity%E7%9A%84%E6%9E%84%E6%88%90%E5%8F%8A%E4%BA%8B%E4%BB%B6%E5%88%86%E5%8F%91%E6%9C%BA%E5%88%B6/"/>
      <url>/2021/10/24/Activity%E7%9A%84%E6%9E%84%E6%88%90%E5%8F%8A%E4%BA%8B%E4%BB%B6%E5%88%86%E5%8F%91%E6%9C%BA%E5%88%B6/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Viewçš„å·¥ä½œæµç¨‹</title>
      <link href="/2021/10/24/View%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B/"/>
      <url>/2021/10/24/View%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p>Viewçš„å·¥ä½œæµç¨‹æŒ‡çš„å°±æ˜¯measureã€layoutå’Œdrawã€‚å…¶ä¸­measureç”¨æ¥æµ‹é‡VIewçš„å®½å’Œé«˜ï¼Œlayoutç”¨æ¥ç¡®å®šViewçš„ä½ç½®ï¼Œdrawç”¨æ¥ç»˜åˆ¶Viewã€‚</p><h1 id="Acitivityå¯åŠ¨è¿‡ç¨‹"><a href="#Acitivityå¯åŠ¨è¿‡ç¨‹" class="headerlink" title="Acitivityå¯åŠ¨è¿‡ç¨‹"></a>Acitivityå¯åŠ¨è¿‡ç¨‹</h1><h2 id="startActivityForResultæ–¹æ³•"><a href="#startActivityForResultæ–¹æ³•" class="headerlink" title="startActivityForResultæ–¹æ³•"></a>startActivityForResultæ–¹æ³•</h2><p>å…ˆä»Activityçš„startActivityæ–¹æ³•è¯´èµ·ã€‚</p><p>startActivityæ–¹æ³•æˆ–startActivityForResultæœ‰å¾ˆå¤šç§é‡è½½æ–¹å¼ï¼Œä½†å®ƒä»¬æœ€ç»ˆéƒ½ä¼šè°ƒç”¨startActivityForResult(intent, requestCode, options)æ–¹æ³•ã€‚æºç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startActivityForResult</span><span class="params">(<span class="meta">@RequiresPermission</span> Intent intent, <span class="keyword">int</span> requestCode,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="meta">@Nullable</span> Bundle options)</span> </span>{</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡å¯åŠ¨ï¼Œåˆ™æˆå‘˜å˜é‡mParentä¸ºç©ºï¼Œå¦åˆ™ä¸ä¸ºç©ºã€‚</span></span><br><span class="line">        <span class="keyword">if</span> (mParent == <span class="keyword">null</span>) {</span><br><span class="line">            <span class="comment">//ç¬¬ä¸€æ¬¡å¯åŠ¨æ‰§è¡Œ</span></span><br><span class="line">            options = transferSpringboardActivityOptions(options);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//è°ƒç”¨Instrumentationçš„execStartActivity(Context who, IBinder contextThreadÂ·Â·Â·Â·)æ–¹æ³•</span></span><br><span class="line">            </span><br><span class="line">            Instrumentation.ActivityResult ar = mInstrumentation.execStartActivity(</span><br><span class="line">                <span class="keyword">this</span>, mMainThread.getApplicationThread(), mToken, <span class="keyword">this</span>, intent, requestCode, options);</span><br><span class="line">            <span class="keyword">if</span> (ar != <span class="keyword">null</span>) {</span><br><span class="line">                mMainThread.sendActivityResult(</span><br><span class="line">                    mToken, mEmbeddedID, requestCode, ar.getResultCode(),ar.getResultData());</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (requestCode &gt;= <span class="number">0</span>) {</span><br><span class="line">            <span class="comment">// å¦‚æœæ˜¯è¯·æ±‚ä¸€ä¸ªç»“æœï¼ˆresultï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿Activityä¸å¯è§ï¼Œç›´åˆ°æ”¶åˆ°ç»“æœï¼Œåœ¨onCreate(Bundle savedInstanceState)æ–¹æ³•æˆ–è€…onResume()æœŸé—´è®¾ç½®æ­¤ä»£ç å°†åœ¨æ­¤æœŸé—´éšè—Activityï¼Œä»¥é¿å…é—ªçƒï¼Œåªæœ‰åœ¨è¯·æ±‚ç»“æœæ—¶æ‰å¯ä»¥è¿™æ ·åšï¼Œå› ä¸ºè¿™æ ·å¯ä»¥ä¿è¯åœ¨Activityå®Œæˆæ—¶æˆ‘ä»¬å°†è·å¾—ä¿¡æ¯ï¼Œæ— è®ºå®ƒå‘ç”Ÿäº†ä»€ä¹ˆ</span></span><br><span class="line"></span><br><span class="line">                mStartedActivity = <span class="keyword">true</span>;</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            cancelInputsAndStartExitTransition(options);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="comment">//å¦‚æœä¸æ˜¯ç¬¬ä¸€æ¬¡å¯åŠ¨æ‰§è¡Œ</span></span><br><span class="line">            <span class="keyword">if</span> (options != <span class="keyword">null</span>) {</span><br><span class="line">                mParent.startActivityFromChild(<span class="keyword">this</span>, intent, requestCode, options);</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                mParent.startActivityFromChild(<span class="keyword">this</span>, intent, requestCode);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><h2 id="Instrumentationçš„execStartActivityæ–¹æ³•"><a href="#Instrumentationçš„execStartActivityæ–¹æ³•" class="headerlink" title="Instrumentationçš„execStartActivityæ–¹æ³•"></a>Instrumentationçš„execStartActivityæ–¹æ³•</h2><p>æˆ‘ä»¬æ¥çœ‹ä¸€çœ‹ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶è°ƒç”¨çš„Instrumentationçš„execStartActivity(Context who, IBinder contextThread, IBinder token, Activity target, Intent intent, int requestCode, Bundle options)æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Instrumentation.java</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@UnsupportedAppUsage</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ActivityResult <span class="title">execStartActivity</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        Context who, IBinder contextThread, IBinder token, Activity target,</span></span></span><br><span class="line"><span class="function"><span class="params">        Intent intent, <span class="keyword">int</span> requestCode, Bundle options)</span> </span>{</span><br><span class="line">    <span class="comment">// çœç•¥éƒ¨åˆ†ä»£ç </span></span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        intent.migrateExtraStreamToClipData(who);</span><br><span class="line">        intent.prepareToLeaveProcess(who);</span><br><span class="line">        <span class="comment">// è°ƒç”¨ActivityTaskManagerServiceçš„startActivityæ–¹æ³•</span></span><br><span class="line">        <span class="keyword">int</span> result = ActivityTaskManager.getService()</span><br><span class="line">                .startActivity(whoThread, who.getBasePackageName(), intent,</span><br><span class="line">                        intent.resolveTypeIfNeeded(who.getContentResolver()),</span><br><span class="line">                        token, target != <span class="keyword">null</span> ? target.mEmbeddedID : <span class="keyword">null</span>,</span><br><span class="line">                        requestCode, <span class="number">0</span>, <span class="keyword">null</span>, options);</span><br><span class="line">         checkStartActivityResult(result, intent);</span><br><span class="line">     } <span class="keyword">catch</span> (RemoteException e) {</span><br><span class="line">         <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Failure from system"</span>, e);</span><br><span class="line">     }</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>ActivityTaskManager.getService()<strong>æ–¹æ³•å¾—åˆ°çš„æ˜¯</strong>IActivityTaskManager</strong>æ¥å£ï¼Œå®ƒæ˜¯é€šè¿‡<strong>è¿›ç¨‹é—´é€šè®¯ï¼ˆInter-Process Communicationï¼Œå³IPCï¼‰</strong>è°ƒç”¨çš„ï¼Œ<strong>IActivityTaskManager</strong>çš„<strong>æœåŠ¡ç«¯</strong>æ˜¯<strong>ActivityTaskManagerService</strong>ï¼Œæ‰€ä»¥æœ€ç»ˆæ˜¯è°ƒç”¨<strong>ActivityTaskManagerService</strong>çš„<strong>startActivity</strong>æ–¹æ³•ï¼Œåé¢çš„è°ƒç”¨è¿‡ç¨‹ï¼Œè¿™é‡Œå°±ä¸å†è¯¦ç»†åœ°è®²è§£ï¼Œæœ€åè°ƒç”¨çš„æ˜¯<strong>ActivityThread</strong>ç±»çš„**handleLaunchActivity(ActivityClientRecord r, PendingTransactionActions pendingActions, Intent customIntent)**æ–¹æ³•ï¼Œ</p><h2 id="è°ƒç”¨çš„æ˜¯ActivityThreadç±»çš„handleLaunchActivityæ–¹æ³•"><a href="#è°ƒç”¨çš„æ˜¯ActivityThreadç±»çš„handleLaunchActivityæ–¹æ³•" class="headerlink" title="è°ƒç”¨çš„æ˜¯ActivityThreadç±»çš„handleLaunchActivityæ–¹æ³•"></a>è°ƒç”¨çš„æ˜¯<strong>ActivityThread</strong>ç±»çš„handleLaunchActivityæ–¹æ³•</h2><p>æºç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Activity <span class="title">handleLaunchActivity</span><span class="params">(ActivityClientRecord r,</span></span></span><br><span class="line"><span class="function"><span class="params">           PendingTransactionActions pendingActions, Intent customIntent)</span> </span>{</span><br><span class="line">       <span class="comment">// If we are getting ready to gc after going to the background, well</span></span><br><span class="line">       <span class="comment">// we are back active so skip it.</span></span><br><span class="line">       unscheduleGcIdler();</span><br><span class="line">       mSomeActivitiesChanged = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span> (r.profilerInfo != <span class="keyword">null</span>) {</span><br><span class="line">           mProfiler.setProfiler(r.profilerInfo);</span><br><span class="line">           mProfiler.startProfiling();</span><br><span class="line">       }</span><br><span class="line"></span><br><span class="line">       <span class="comment">// Make sure we are running with the most recent config.</span></span><br><span class="line">       handleConfigurationChanged(<span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span> (localLOGV) Slog.v(</span><br><span class="line">           TAG, <span class="string">"Handling launch of "</span> + r);</span><br><span class="line"></span><br><span class="line">       <span class="comment">// Initialize before creating the activity</span></span><br><span class="line">       <span class="keyword">if</span> (!ThreadedRenderer.sRendererDisabled</span><br><span class="line">               &amp;&amp; (r.activityInfo.flags &amp; ActivityInfo.FLAG_HARDWARE_ACCELERATED) != <span class="number">0</span>) {</span><br><span class="line">           HardwareRenderer.preload();</span><br><span class="line">       }</span><br><span class="line">       </span><br><span class="line">       <span class="comment">//----------------------ä»è¿™é‡Œå¼€å§‹-------------------------//</span></span><br><span class="line">       </span><br><span class="line">       WindowManagerGlobal.initialize();     <span class="comment">// åˆå§‹åŒ–å…¨å±€çš„WindowManagerGlobal </span></span><br><span class="line"></span><br><span class="line">       <span class="comment">// Hint the GraphicsEnvironment that an activity is launching on the process. æç¤ºå›¾å½¢ç¯å¢ƒActivityæ­£åœ¨è¿›ç¨‹ä¸Šå¯åŠ¨.</span></span><br><span class="line">       GraphicsEnvironment.hintActivityLaunch();</span><br><span class="line"></span><br><span class="line">       <span class="keyword">final</span> Activity a = performLaunchActivity(r, customIntent);   <span class="comment">//1</span></span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span> (a != <span class="keyword">null</span>) {</span><br><span class="line">           r.createdConfig = <span class="keyword">new</span> Configuration(mConfiguration);</span><br><span class="line">           reportSizeConfigurations(r);</span><br><span class="line">           <span class="keyword">if</span> (!r.activity.mFinished &amp;&amp; pendingActions != <span class="keyword">null</span>) {</span><br><span class="line">               pendingActions.setOldState(r.state);</span><br><span class="line">               pendingActions.setRestoreInstanceState(<span class="keyword">true</span>);</span><br><span class="line">               pendingActions.setCallOnPostCreate(<span class="keyword">true</span>);</span><br><span class="line">           }</span><br><span class="line">       } <span class="keyword">else</span> {</span><br><span class="line">           <span class="comment">// If there was an error, for any reason, tell the activity manager to stop us.</span></span><br><span class="line">           <span class="keyword">try</span> {</span><br><span class="line">               ActivityTaskManager.getService()</span><br><span class="line">                       .finishActivity(r.token, Activity.RESULT_CANCELED, <span class="keyword">null</span>,</span><br><span class="line">                               Activity.DONT_FINISH_TASK_WITH_ACTIVITY);</span><br><span class="line">           } <span class="keyword">catch</span> (RemoteException ex) {</span><br><span class="line">               <span class="keyword">throw</span> ex.rethrowFromSystemServer();</span><br><span class="line">           }</span><br><span class="line">       }</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> a;</span><br><span class="line">   }</span><br></pre></td></tr></tbody></table></figure><h2 id="è°ƒç”¨performLaunchActivityæ–¹æ³•æ¥åˆ›å»ºActivity"><a href="#è°ƒç”¨performLaunchActivityæ–¹æ³•æ¥åˆ›å»ºActivity" class="headerlink" title="è°ƒç”¨performLaunchActivityæ–¹æ³•æ¥åˆ›å»ºActivity"></a>è°ƒç”¨performLaunchActivityæ–¹æ³•æ¥åˆ›å»ºActivity</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  Core implementation of activity launch. */</span></span><br><span class="line">   <span class="function"><span class="keyword">private</span> Activity <span class="title">performLaunchActivity</span><span class="params">(ActivityClientRecord r, Intent customIntent)</span> </span>{</span><br><span class="line">       <span class="comment">//ä¸€äº›éœ€è¦å¯åŠ¨çš„Activityçš„ä¿¡æ¯ã€‚</span></span><br><span class="line">       ActivityInfo aInfo = r.activityInfo;</span><br><span class="line">       <span class="keyword">if</span> (r.packageInfo == <span class="keyword">null</span>) {</span><br><span class="line">           r.packageInfo = getPackageInfo(aInfo.applicationInfo, r.compatInfo,</span><br><span class="line">                   Context.CONTEXT_INCLUDE_CODE);</span><br><span class="line">       }</span><br><span class="line"></span><br><span class="line">       ComponentName component = r.intent.getComponent();</span><br><span class="line">       <span class="keyword">if</span> (component == <span class="keyword">null</span>) {</span><br><span class="line">           component = r.intent.resolveActivity(</span><br><span class="line">               mInitialApplication.getPackageManager());</span><br><span class="line">           r.intent.setComponent(component);</span><br><span class="line">       }</span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span> (r.activityInfo.targetActivity != <span class="keyword">null</span>) {</span><br><span class="line">           component = <span class="keyword">new</span> ComponentName(r.activityInfo.packageName,</span><br><span class="line">                   r.activityInfo.targetActivity);</span><br><span class="line">       }</span><br><span class="line"></span><br><span class="line">       ContextImpl appContext = createBaseContextForActivity(r);</span><br><span class="line">       Activity activity = <span class="keyword">null</span>;</span><br><span class="line">       <span class="keyword">try</span> {</span><br><span class="line">           java.lang.ClassLoader cl = appContext.getClassLoader();</span><br><span class="line">           <span class="comment">// åå°„åˆ›å»ºActivity</span></span><br><span class="line">           activity = mInstrumentation.newActivity(</span><br><span class="line">                   cl, component.getClassName(), r.intent);</span><br><span class="line">           StrictMode.incrementExpectedActivityCount(activity.getClass());</span><br><span class="line">           r.intent.setExtrasClassLoader(cl);</span><br><span class="line">           r.intent.prepareToEnterProcess();</span><br><span class="line">           <span class="keyword">if</span> (r.state != <span class="keyword">null</span>) {</span><br><span class="line">               r.state.setClassLoader(cl);</span><br><span class="line">           }</span><br><span class="line">       } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">           <span class="keyword">if</span> (!mInstrumentation.onException(activity, e)) {</span><br><span class="line">               <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(</span><br><span class="line">                       <span class="string">"Unable to instantiate activity "</span> + component</span><br><span class="line">                               + <span class="string">": "</span> + e.toString(), e);</span><br><span class="line">           }</span><br><span class="line">   }</span><br><span class="line"></span><br><span class="line">       <span class="keyword">try</span> {</span><br><span class="line">           <span class="comment">// åˆ›å»ºApplicationå¯¹è±¡ï¼Œå®ƒæ˜¯ä¸ªå•ä¾‹ï¼Œä¸€ä¸ªè¿›ç¨‹åªæœ‰ä¸€ä¸ªApplication</span></span><br><span class="line">           Application app = r.packageInfo.makeApplication(<span class="keyword">false</span>, mInstrumentation);</span><br><span class="line"></span><br><span class="line">           <span class="comment">// çœç•¥éƒ¨åˆ†ä»£ç </span></span><br><span class="line"></span><br><span class="line">           <span class="keyword">if</span> (activity != <span class="keyword">null</span>) {</span><br><span class="line">               <span class="comment">// çœç•¥éƒ¨åˆ†ä»£ç </span></span><br><span class="line">               </span><br><span class="line">               <span class="comment">// Activity resources must be initialized with the same loaders as the</span></span><br><span class="line">               <span class="comment">// application context.</span></span><br><span class="line">               appContext.getResources().addLoaders(</span><br><span class="line">                       app.getResources().getLoaders().toArray(<span class="keyword">new</span> ResourcesLoader[<span class="number">0</span>]));</span><br><span class="line"></span><br><span class="line">               appContext.setOuterContext(activity);</span><br><span class="line">               </span><br><span class="line">               <span class="comment">// ActivityæˆåŠŸåˆ›å»ºï¼Œè°ƒç”¨Activityçš„attachæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šåˆ›å»ºPhoneWindowï¼Œå®ƒæ˜¯WindowæŠ½è±¡ç±»çš„å­ç±»</span></span><br><span class="line">               <span class="comment">// å°† contextç­‰å„ç§æ•°æ®ä¸Activityç»‘å®šï¼Œåˆå§‹åŒ–Activity</span></span><br><span class="line">               activity.attach(appContext, <span class="keyword">this</span>, getInstrumentation(), r.token,</span><br><span class="line">                       r.ident, app, r.intent, r.activityInfo, title, r.parent,</span><br><span class="line">                       r.embeddedID, r.lastNonConfigurationInstances, config,</span><br><span class="line">                       r.referrer, r.voiceInteractor, window, r.configCallback,</span><br><span class="line">                       r.assistToken);</span><br><span class="line"></span><br><span class="line">               <span class="comment">// çœç•¥éƒ¨åˆ†ä»£ç </span></span><br><span class="line">               <span class="comment">// è°ƒç”¨Activityçš„onCreateæ–¹æ³•</span></span><br><span class="line">               <span class="keyword">if</span> (r.isPersistable()) {</span><br><span class="line">                   mInstrumentation.callActivityOnCreate(activity, r.state, r.persistentState);</span><br><span class="line">               } <span class="keyword">else</span> {</span><br><span class="line">                   mInstrumentation.callActivityOnCreate(activity, r.state);</span><br><span class="line">               }</span><br><span class="line">               <span class="keyword">if</span> (!activity.mCalled) {</span><br><span class="line">                   <span class="keyword">throw</span> <span class="keyword">new</span> SuperNotCalledException(</span><br><span class="line">                           <span class="string">"Activity "</span> + r.intent.getComponent().toShortString() +</span><br><span class="line">                                   <span class="string">" did not call through to super.onCreate()"</span>);</span><br><span class="line">               }</span><br><span class="line">               r.activity = activity;</span><br><span class="line">           }</span><br><span class="line">           <span class="comment">// è®¾ä¸ºON_CREATEçŠ¶æ€</span></span><br><span class="line">           r.setState(ON_CREATE);</span><br><span class="line"></span><br><span class="line">           <span class="comment">// updatePendingActivityConfiguration()æ–¹æ³•çš„ä½œç”¨æ˜¯ä»mActivitiesä¸­è¯»å–æ•°æ®ä»¥æ›´æ–°ActivityClientRecordï¼Œå®ƒåœ¨ä¸åŒçš„çº¿ç¨‹ä¸­è¿è¡Œï¼Œæ‰€ä»¥è¦å–ResourcesManagerä½œä¸ºé”å¯¹è±¡</span></span><br><span class="line">           <span class="keyword">synchronized</span> (mResourcesManager) {</span><br><span class="line">               mActivities.put(r.token, r);</span><br><span class="line">           }</span><br><span class="line"></span><br><span class="line">       } <span class="keyword">catch</span> (SuperNotCalledException e) {</span><br><span class="line">           <span class="keyword">throw</span> e;</span><br><span class="line"></span><br><span class="line">       } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">           <span class="keyword">if</span> (!mInstrumentation.onException(activity, e)) {</span><br><span class="line">               <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(</span><br><span class="line">                       <span class="string">"Unable to start activity "</span> + component</span><br><span class="line">                               + <span class="string">": "</span> + e.toString(), e);</span><br><span class="line">           }</span><br><span class="line">       }</span><br><span class="line"></span><br><span class="line">       <span class="comment">// è¿”å›Activity</span></span><br><span class="line">       <span class="keyword">return</span> activity;</span><br><span class="line">   }</span><br></pre></td></tr></tbody></table></figure><p>performActivityé€šè¿‡åå°„æœºåˆ¶åˆ›å»ºäº†Activityçš„å®ä¾‹ï¼Œå¹¶ä¸”æ„å»ºäº†Applicationçš„å®ä¾‹ã€‚</p><h2 id="è°ƒç”¨äº†Activityçš„attachæ–¹æ³•"><a href="#è°ƒç”¨äº†Activityçš„attachæ–¹æ³•" class="headerlink" title="è°ƒç”¨äº†Activityçš„attachæ–¹æ³•"></a>è°ƒç”¨äº†Activityçš„attachæ–¹æ³•</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Activity.java</span></span><br><span class="line"><span class="meta">@UnsupportedAppUsage</span></span><br><span class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">attach</span><span class="params">(Context context, ActivityThread aThread,</span></span></span><br><span class="line"><span class="function"><span class="params">                  Instrumentation instr, IBinder token, <span class="keyword">int</span> ident,</span></span></span><br><span class="line"><span class="function"><span class="params">                  Application application, Intent intent, ActivityInfo info,</span></span></span><br><span class="line"><span class="function"><span class="params">                  CharSequence title, Activity parent, String id,</span></span></span><br><span class="line"><span class="function"><span class="params">                  NonConfigurationInstances lastNonConfigurationInstances,</span></span></span><br><span class="line"><span class="function"><span class="params">                  Configuration config, String referrer, IVoiceInteractor voiceInteractor,</span></span></span><br><span class="line"><span class="function"><span class="params">                  Window window, ActivityConfigCallback activityConfigCallback, IBinder assistToken)</span> </span>{</span><br><span class="line">    <span class="comment">// çœç•¥éƒ¨åˆ†ä»£ç </span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºPhoneWindowå¯¹è±¡ï¼Œå¹¶ä¸”èµ‹å€¼ç»™æˆå‘˜å˜é‡mWindow</span></span><br><span class="line">       mWindow = <span class="keyword">new</span> PhoneWindow(<span class="keyword">this</span>, window, activityConfigCallback);</span><br><span class="line">       mWindow.setWindowControllerCallback(mWindowControllerCallback);</span><br><span class="line">       mWindow.setCallback(<span class="keyword">this</span>);</span><br><span class="line">       mWindow.setOnWindowDismissedCallback(<span class="keyword">this</span>);</span><br><span class="line">       mWindow.getLayoutInflater().setPrivateFactory(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">       <span class="comment">// .....</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">// å°†Windowå’ŒWindowManagerç»‘å®š</span></span><br><span class="line">       mWindow.setWindowManager(</span><br><span class="line">               (WindowManager)context.getSystemService(Context.WINDOW_SERVICE),</span><br><span class="line">               mToken, mComponent.flattenToString(),</span><br><span class="line">               (info.flags &amp; ActivityInfo.FLAG_HARDWARE_ACCELERATED) != <span class="number">0</span>);</span><br><span class="line">       </span><br><span class="line">    <span class="comment">// çœç•¥éƒ¨åˆ†ä»£ç </span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="è°ƒç”¨äº†Instrumentationå¯¹è±¡çš„callActivityOnCreateæ–¹æ³•"><a href="#è°ƒç”¨äº†Instrumentationå¯¹è±¡çš„callActivityOnCreateæ–¹æ³•" class="headerlink" title="è°ƒç”¨äº†Instrumentationå¯¹è±¡çš„callActivityOnCreateæ–¹æ³•"></a>è°ƒç”¨äº†Instrumentationå¯¹è±¡çš„callActivityOnCreateæ–¹æ³•</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">callActivityOnCreate</span><span class="params">(Activity activity, Bundle icicle,PersistableBundle persistentState)</span> </span>{</span><br><span class="line">        prePerformCreate(activity); </span><br><span class="line">        activity.performCreate(icicle, persistentState);</span><br><span class="line">        postPerformCreate(activity);</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><h2 id="è°ƒç”¨äº†Activityçš„preformCreateæ–¹æ³•"><a href="#è°ƒç”¨äº†Activityçš„preformCreateæ–¹æ³•" class="headerlink" title="è°ƒç”¨äº†Activityçš„preformCreateæ–¹æ³•"></a>è°ƒç”¨äº†Activityçš„preformCreateæ–¹æ³•</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">performCreate</span><span class="params">(Bundle icicle, PersistableBundle persistentState)</span> </span>{</span><br><span class="line">        dispatchActivityPreCreated(icicle);</span><br><span class="line">        mCanEnterPictureInPicture = <span class="keyword">true</span>;</span><br><span class="line">        restoreHasCurrentPermissionRequest(icicle);</span><br><span class="line">        <span class="keyword">if</span> (persistentState != <span class="keyword">null</span>) {</span><br><span class="line">            onCreate(icicle, persistentState);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            onCreate(icicle);</span><br><span class="line">        }</span><br><span class="line">        .......</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><h2 id="è°ƒç”¨äº†åˆ›å»ºå¥½çš„Activityçš„onCreateæ–¹æ³•ï¼Œè‡³æ­¤ï¼ŒActivityå¯åŠ¨å®Œæˆã€‚"><a href="#è°ƒç”¨äº†åˆ›å»ºå¥½çš„Activityçš„onCreateæ–¹æ³•ï¼Œè‡³æ­¤ï¼ŒActivityå¯åŠ¨å®Œæˆã€‚" class="headerlink" title="è°ƒç”¨äº†åˆ›å»ºå¥½çš„Activityçš„onCreateæ–¹æ³•ï¼Œè‡³æ­¤ï¼ŒActivityå¯åŠ¨å®Œæˆã€‚"></a>è°ƒç”¨äº†åˆ›å»ºå¥½çš„Activityçš„onCreateæ–¹æ³•ï¼Œè‡³æ­¤ï¼ŒActivityå¯åŠ¨å®Œæˆã€‚</h2><img src="https://i.bmp.ovh/imgs/2021/10/ed536344f01dc61a.jpg" style="zoom:50%;"><h2 id="è°ƒç”¨OnStartå’ŒOnResumeæ‰§è¡Œç»˜åˆ¶æµç¨‹"><a href="#è°ƒç”¨OnStartå’ŒOnResumeæ‰§è¡Œç»˜åˆ¶æµç¨‹" class="headerlink" title="è°ƒç”¨OnStartå’ŒOnResumeæ‰§è¡Œç»˜åˆ¶æµç¨‹"></a>è°ƒç”¨OnStartå’ŒOnResumeæ‰§è¡Œç»˜åˆ¶æµç¨‹</h2><p>æ¥ç€å‰é¢çš„é€»è¾‘ï¼Œæ¥ç€å°±ä¼šè°ƒç”¨<strong>ActivityThread</strong>ç±»çš„<strong>handleStartActivity(ActivityClientRecord r, PendingTransactionActions pendingActions)<strong>æ–¹æ³•ï¼Œç„¶å</strong>Activity</strong>ç±»çš„<strong>onStart</strong>æ–¹æ³•å°±ä¼šè¢«è°ƒç”¨ï¼Œç„¶åè°ƒç”¨<strong>ActivityThread</strong>ç±»çš„**handleResumeActivity(IBinder token, boolean finalStateRequest, boolean isForward, String reason)**æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ActivityThread.java</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleResumeActivity</span><span class="params">(IBinder token, <span class="keyword">boolean</span> finalStateRequest, <span class="keyword">boolean</span> isForward,</span></span></span><br><span class="line"><span class="function"><span class="params">                                 String reason)</span> </span>{</span><br><span class="line">    <span class="comment">// çœç•¥éƒ¨åˆ†ä»£ç </span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒç”¨Activityçš„onResumeæ–¹æ³•</span></span><br><span class="line">    <span class="keyword">final</span> ActivityClientRecord r = performResumeActivity(token, finalStateRequest, reason);</span><br><span class="line">    <span class="comment">// çœç•¥éƒ¨åˆ†ä»£ç </span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> Activity a = r.activity;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// çœç•¥éƒ¨åˆ†ä»£ç </span></span><br><span class="line">    <span class="keyword">if</span> (r.window == <span class="keyword">null</span> &amp;&amp; !a.mFinished &amp;&amp; willBeVisible) {</span><br><span class="line">        <span class="comment">// å¾—åˆ°Windowï¼ŒWindowæ˜¯æŠ½è±¡ç±»ï¼Œå…¶ä¸­ï¼ŒPhoneWindowç±»ç»§æ‰¿Windowç±»ï¼Œå®ƒæ˜¯Windowç±»çš„å”¯ä¸€å­ç±»</span></span><br><span class="line">        r.window = r.activity.getWindow();</span><br><span class="line">        <span class="comment">// å¾—åˆ°DecorView</span></span><br><span class="line">        View decor = r.window.getDecorView();</span><br><span class="line">        <span class="comment">// å°†DecorViewè®¾ä¸ºä¸å¯è§</span></span><br><span class="line">        decor.setVisibility(View.INVISIBLE);</span><br><span class="line">        <span class="comment">// å¾—åˆ°ViewManagerï¼ŒViewManageræ˜¯ä¸€ä¸ªæ¥å£ï¼ŒWindowMangerä¹Ÿæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒç»§æ‰¿ViewManageræ¥å£ï¼Œå…¶ä¸­ï¼ŒWindowManagerImplç±»å®ç°ViewManageræ¥å£ï¼Œè¿™é‡Œçš„vmå¯ä»¥çœ‹ä½œæ˜¯WindowMangerImplå¯¹è±¡</span></span><br><span class="line">        ViewManager wm = a.getWindowManager();</span><br><span class="line">        WindowManager.LayoutParams l = r.window.getAttributes();</span><br><span class="line">        <span class="comment">// çœç•¥éƒ¨åˆ†ä»£ç </span></span><br><span class="line">        <span class="keyword">if</span> (a.mVisibleFromClient) {</span><br><span class="line">            <span class="keyword">if</span> (!a.mWindowAdded) {</span><br><span class="line">                a.mWindowAdded = <span class="keyword">true</span>;</span><br><span class="line">                <span class="comment">// è°ƒç”¨WindowManagerImplç±»çš„addView(View view, ViewGroup.LayoutParams params)æ–¹æ³•ï¼Œæ‰§è¡Œç»˜åˆ¶æµç¨‹</span></span><br><span class="line">                wm.addView(decor, l);<span class="comment">//decorView å’Œ PhoneWindow çš„å¸ƒå±€å‚æ•°</span></span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                <span class="comment">// çœç•¥éƒ¨åˆ†ä»£ç </span></span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (!willBeVisible) {</span><br><span class="line">        <span class="comment">// å¦‚æœWindowå·²ç»è¢«æ·»åŠ ï¼Œä½†æ˜¯åœ¨æ¢å¤ï¼ˆresumeï¼‰æœŸé—´å¯åŠ¨äº†å¦ä¸€ä¸ªActivityï¼Œè¿™æ ·çš„è¯ï¼Œå°±ä¸è¦ä½¿Windowå¯è§</span></span><br><span class="line">        <span class="keyword">if</span> (localLOGV) Slog.v(TAG, <span class="string">"Launch "</span> + r + <span class="string">" mStartedActivity set"</span>);</span><br><span class="line">        r.hideForNow = <span class="keyword">true</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// çœç•¥éƒ¨åˆ†ä»£ç </span></span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><strong>ActivityThread#handleResumeActivityæ–¹æ³•</strong>é¦–å…ˆè°ƒç”¨<strong>performResumeActivity</strong>ï¼Œåœ¨<strong>performResumeActivity</strong>å®Œæˆä¹‹ååœ¨ä¼šè°ƒç”¨<strong>WindowManager#addViewå‘Window</strong>ä¸­æ·»åŠ å¸ƒå±€ã€‚ æ‰€ä»¥ï¼Œå®é™…ä¸Šå¸ƒå±€æ˜¯åœ¨<strong>onResume</strong>å®Œæˆä¹‹åæ‰è¢«åŠ è½½åœ¨<strong>PhoneWindow</strong>ä¸­çš„ï¼Œä¸è¿‡å…·ä½“çš„å†…å®¹æˆ‘ä»¬è¿˜æ˜¯éœ€è¦çœ‹çœ‹<strong>performResumeActivity</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ActivityClientRecord <span class="title">performResumeActivity</span><span class="params">(IBinder token, <span class="keyword">boolean</span> finalStateRequest,</span></span></span><br><span class="line"><span class="function"><span class="params">            String reason)</span> </span>{</span><br><span class="line">        <span class="keyword">final</span> ActivityClientRecord r = mActivities.get(token);</span><br><span class="line">        <span class="comment">// å¯¹äºLifecycleçš„ä¸€äº›åˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">if</span> (r.getLifecycleState() == ON_RESUME) {</span><br><span class="line">            <span class="keyword">if</span> (!finalStateRequest) {</span><br><span class="line">               <span class="comment">// ... å¦‚æœå·²ç»æ˜¯onResume å°±å›æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ....</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// è°ƒç”¨Activity#performResume è°ƒç”¨æµç¨‹åŒä¸ŠonCreateï¼Œæœ€ç»ˆä¼šè°ƒç”¨activityçš„onResumeã€‚</span></span><br><span class="line">            r.activity.performResume(r.startsNotResumed, reason);</span><br><span class="line"></span><br><span class="line">            r.state = <span class="keyword">null</span>;</span><br><span class="line">            r.persistentState = <span class="keyword">null</span>;</span><br><span class="line">            r.setState(ON_RESUME);</span><br><span class="line"></span><br><span class="line">            reportTopResumedActivityChanged(r, r.isTopResumedActivity, <span class="string">"topWhenResuming"</span>);</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">           <span class="comment">// ....</span></span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h1 id="Viewçš„ç»˜åˆ¶æµç¨‹-åœ¨Activityçš„onResumeæ–¹æ³•ä¹‹åæ‰§è¡Œ"><a href="#Viewçš„ç»˜åˆ¶æµç¨‹-åœ¨Activityçš„onResumeæ–¹æ³•ä¹‹åæ‰§è¡Œ" class="headerlink" title="Viewçš„ç»˜åˆ¶æµç¨‹ åœ¨Activityçš„onResumeæ–¹æ³•ä¹‹åæ‰§è¡Œ"></a>Viewçš„ç»˜åˆ¶æµç¨‹ åœ¨Activityçš„onResumeæ–¹æ³•ä¹‹åæ‰§è¡Œ</h1><h2 id="è°ƒç”¨WindowManagerImplç±»çš„addViewæ–¹æ³•"><a href="#è°ƒç”¨WindowManagerImplç±»çš„addViewæ–¹æ³•" class="headerlink" title="è°ƒç”¨WindowManagerImplç±»çš„addViewæ–¹æ³•"></a>è°ƒç”¨<strong>WindowManagerImpl</strong>ç±»çš„addViewæ–¹æ³•</h2><p>è°ƒç”¨<strong>WindowManagerImpl</strong>ç±»çš„<strong>addView(View view, ViewGroup.LayoutParams params)<strong>æ–¹æ³•åˆ†åˆ«ä¼ å…¥äº†</strong>DecorView</strong>å’Œ<strong>PhoneWindow</strong>çš„å±æ€§</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">WindowManagerImpl</span> <span class="keyword">implements</span> <span class="title">WindowManager</span> </span>{</span><br><span class="line">    <span class="meta">@UnsupportedAppUsage</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> WindowManagerGlobal mGlobal = WindowManagerGlobal.getInstance();</span><br><span class="line">    <span class="comment">//Â·Â·Â·</span></span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addView</span><span class="params">(<span class="meta">@NonNull</span> View view, <span class="meta">@NonNull</span> ViewGroup.LayoutParams params)</span> </span>{</span><br><span class="line">        applyDefaultToken(params);</span><br><span class="line">        <span class="comment">//decorView å’Œ PhoneWindow çš„å¸ƒå±€å‚æ•°</span></span><br><span class="line">        mGlobal.addView(view, params, mContext.getDisplayNoVerify(), mParentWindow,mContext.getUserId());</span><br><span class="line">    }</span><br><span class="line"><span class="comment">//Â·Â·Â·</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="è°ƒç”¨äº†WindowManagerGlobalç±»çš„addViewæ–¹æ³•"><a href="#è°ƒç”¨äº†WindowManagerGlobalç±»çš„addViewæ–¹æ³•" class="headerlink" title="è°ƒç”¨äº†WindowManagerGlobalç±»çš„addViewæ–¹æ³•"></a>è°ƒç”¨äº†WindowManagerGlobalç±»çš„addViewæ–¹æ³•</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//WindowManagerGlobal.java</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addView</span><span class="params">(View view, ViewGroup.LayoutParams params,</span></span></span><br><span class="line"><span class="function"><span class="params">                    Display display, Window parentWindow)</span> </span>{</span><br><span class="line">    <span class="comment">//Â·Â·Â·</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">final</span> WindowManager.LayoutParams wparams = (WindowManager.LayoutParams) params;</span><br><span class="line">    <span class="comment">// çœç•¥éƒ¨åˆ†ä»£ç </span></span><br><span class="line"></span><br><span class="line">    ViewRootImpl root;</span><br><span class="line">    View panelParentView = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">synchronized</span> (mLock) {</span><br><span class="line">        <span class="comment">// çœç•¥éƒ¨åˆ†ä»£ç </span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºViewRootImplå¯¹è±¡</span></span><br><span class="line">        root = <span class="keyword">new</span> ViewRootImpl(view.getContext(), display);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½®DecorViewçš„LayoutParams</span></span><br><span class="line">        view.setLayoutParams(wparams);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°†DecorViewæ·»åŠ åˆ°Viewçš„ArrayListä¸­</span></span><br><span class="line">        mViews.add(view);</span><br><span class="line">        <span class="comment">// å°†ViewRootImplæ·»åŠ åˆ°ViewRootImplçš„ArrayListä¸­</span></span><br><span class="line">        mRoots.add(root);</span><br><span class="line">        <span class="comment">// å°†DecorViewçš„LayoutParamsæ·»åŠ åˆ°WindowManager.LayoutParamsçš„ArrayListä¸­</span></span><br><span class="line">        mParams.add(wparams);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">//è°ƒç”¨ViewRootImplçš„setView(View view, WindowManager.LayoutParams attrs, View panelParentView)æ–¹æ³•</span></span><br><span class="line">            root.setView(view, wparams, panelParentView);<span class="comment">//decorView å’Œ PhoneWindow çš„å¸ƒå±€å‚æ•°ï¼ŒNULL</span></span><br><span class="line">        } <span class="keyword">catch</span> (RuntimeException e) {</span><br><span class="line">            <span class="comment">// æŠ›å‡ºBadTokenExceptionæˆ–è€…InvalidDisplayException</span></span><br><span class="line">            <span class="keyword">if</span> (index &gt;= <span class="number">0</span>) {</span><br><span class="line">                removeViewLocked(index, <span class="keyword">true</span>);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">throw</span> e;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="è°ƒç”¨äº†ViewRootImplç±»çš„setViewæ–¹æ³•"><a href="#è°ƒç”¨äº†ViewRootImplç±»çš„setViewæ–¹æ³•" class="headerlink" title="è°ƒç”¨äº†ViewRootImplç±»çš„setViewæ–¹æ³•"></a>è°ƒç”¨äº†ViewRootImplç±»çš„setViewæ–¹æ³•</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ViewRootImpl.java</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setView</span><span class="params">(View view, WindowManager.LayoutParams attrs, View panelParentView)</span> </span>{</span><br><span class="line">    <span class="keyword">synchronized</span> (<span class="keyword">this</span>) {</span><br><span class="line">        <span class="keyword">if</span> (mView == <span class="keyword">null</span>) {</span><br><span class="line">            <span class="comment">// å¦‚æœæˆå‘˜å˜é‡mViewä¸ºç©ºï¼Œå°±å°†ä¼ è¿›æ¥çš„DecorViewèµ‹å€¼ç»™å®ƒ</span></span><br><span class="line">            mView = view;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// çœç•¥éƒ¨åˆ†ä»£ç </span></span><br><span class="line">            <span class="comment">// è°ƒç”¨requestLayout()æ–¹æ³•</span></span><br><span class="line">            requestLayout();</span><br><span class="line">            <span class="comment">// çœç•¥éƒ¨åˆ†ä»£ç </span></span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                    mOrigWindowType = mWindowAttributes.type;</span><br><span class="line">                    mAttachInfo.mRecomputeGlobalAttributes = <span class="keyword">true</span>;</span><br><span class="line">                    collectViewAttributes();</span><br><span class="line">                    adjustLayoutParamsForCompatibility(mWindowAttributes);</span><br><span class="line">                    <span class="comment">//è°ƒç”¨WindowSession#addToDispalyï¼Œå†è°ƒç”¨WindowManagerService#addWindow</span></span><br><span class="line">                    res = mWindowSession.addToDisplayAsUser(mWindow, mSeq, mWindowAttributes,</span><br><span class="line">                            getHostVisibility(), mDisplay.getDisplayId(), userId, mTmpFrame,</span><br><span class="line">                            mAttachInfo.mContentInsets, mAttachInfo.mStableInsets,</span><br><span class="line">                            mAttachInfo.mDisplayCutout, inputChannel,</span><br><span class="line">                            mTempInsets, mTempControls);</span><br><span class="line">                    setFrame(mTmpFrame);</span><br><span class="line">            } <span class="keyword">catch</span> {</span><br><span class="line">                <span class="comment">//Â·Â·Â·</span></span><br><span class="line">            }</span><br><span class="line"><span class="comment">//Â·Â·Â·</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">// è°ƒç”¨Viewçš„assignParent(ViewParent parent)æ–¹æ³•</span></span><br><span class="line">            view.assignParent(<span class="keyword">this</span>);</span><br><span class="line">            <span class="comment">// çœç•¥éƒ¨åˆ†ä»£ç </span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="requestLayoutæ–¹æ³•"><a href="#requestLayoutæ–¹æ³•" class="headerlink" title="requestLayoutæ–¹æ³•"></a>requestLayoutæ–¹æ³•</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestLayout</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (!mHandlingLayoutInLayoutRequest) {</span><br><span class="line">            checkThread();</span><br><span class="line">            mLayoutRequested = <span class="keyword">true</span>;</span><br><span class="line">            scheduleTraversals();</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><p><strong>requestLayout()<strong>æ–¹æ³•çš„ä½œç”¨æ˜¯</strong>æ£€æŸ¥å½“å‰çº¿ç¨‹æ˜¯ä¸æ˜¯åˆ›å»ºViewRootImplæ‰€åœ¨çš„çº¿ç¨‹</strong>ï¼Œ<strong>å¦‚æœæ˜¯å°±é€šçŸ¥Viewæ‰§è¡Œç»˜åˆ¶æµç¨‹</strong>ï¼Œ<strong>å¦åˆ™å°±æŠ›å‡ºCalledFromWrongThreadExceptionå¼‚å¸¸</strong></p><h2 id="Viewçš„assignParentæ–¹æ³•"><a href="#Viewçš„assignParentæ–¹æ³•" class="headerlink" title="Viewçš„assignParentæ–¹æ³•"></a>Viewçš„assignParentæ–¹æ³•</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//View.java</span></span><br><span class="line"><span class="meta">@UnsupportedAppUsage</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">assignParent</span><span class="params">(ViewParent parent)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (mParent == <span class="keyword">null</span>) {</span><br><span class="line">        <span class="comment">// å¦‚æœè¿™ä¸ªViewè¿˜æ²¡æœ‰parentï¼Œå°±å°†ä¼ è¿›æ¥çš„ViewRootImplèµ‹å€¼ç»™æˆå‘˜å˜é‡mParent</span></span><br><span class="line">        mParent = parent;</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (parent == <span class="keyword">null</span>) {</span><br><span class="line">        <span class="comment">// å¦‚æœå½¢å¼å‚æ•°parentä¸ºç©ºï¼Œå°±å°†æˆå‘˜å˜é‡mParentè®¾ä¸ºç©º</span></span><br><span class="line">        mParent = <span class="keyword">null</span>;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="comment">// å¦‚æœè¿™ä¸ªViewå·²ç»æœ‰parentï¼Œå†æ¬¡è®¾ç½®parentå°±ä¼šæŠ›å‡ºRuntimeExceptionå¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"view "</span> + <span class="keyword">this</span> + <span class="string">" being added, but"</span></span><br><span class="line">                + <span class="string">" it already has a parent"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨æ˜¯<strong>å°†ViewRootImplå’ŒDecorViewå…³è”èµ·æ¥</strong>ï¼Œè¿™é‡Œä¼ è¿›æ¥çš„æ˜¯<strong>ViewRootImpl</strong>ï¼Œ<strong>ViewRootImpl</strong>å®ç°<strong>ViewParent</strong>æ¥å£ï¼Œæ¯ä¸€ä¸ª<strong>Activity</strong>çš„<strong>æ ¹å¸ƒå±€</strong>æ˜¯<strong>DecorView</strong>ï¼Œ<strong>DecorView</strong>çš„<strong>parentView</strong>æ˜¯<strong>ViewRootImpl</strong>ï¼Œæ‰€ä»¥åœ¨<strong>å­å…ƒç´ </strong>ä¸­è°ƒç”¨<strong>invalidate()<strong>æ–¹æ³•è¿™ç±»çš„æ–¹æ³•çš„æ—¶å€™ï¼Œéœ€è¦éå†æ‰¾åˆ°</strong>parentView</strong>ï¼Œæœ€åéƒ½ä¼šè°ƒç”¨<strong>ViewRootImpl</strong>ç›¸å…³çš„æ–¹æ³•ã€‚</p><p><a href="https://imgtu.com/i/5bSGWV"><img src="https://z3.ax1x.com/2021/10/27/5bSGWV.jpg" alt="5bSGWV.jpg" style="zoom:50%;"></a></p><h1 id="setContentViewæ–¹æ³•"><a href="#setContentViewæ–¹æ³•" class="headerlink" title="setContentViewæ–¹æ³•"></a>setContentViewæ–¹æ³•</h1><p>æˆ‘ä»¬çš„<strong>Activity</strong>ç±»æ˜¯ç»§æ‰¿<strong>AppCompatActivity</strong>ç±».</p><p><strong>Appcompat</strong>æœ€å¼€å§‹æ˜¯å‡ºç°åœ¨<strong>com.android.support:appcompat-v7</strong>åº“ä¸­ï¼Œå®ƒæ˜¯ä¸ºäº†è®©<strong>Android SDK 7ï¼ˆAndroid 2.1ï¼Œå³Android Eclairï¼‰</strong>ä»¥ä¸Šçš„è®¾å¤‡å¯ä»¥ä½¿ç”¨<strong>ActionBar</strong>ï¼Œè€Œåœ¨<strong>com.android.support:appcompat-v7:21</strong>ä»¥ä¸Šçš„åº“ï¼Œ<strong>AppCompat</strong>å¯ä»¥ä¸º<strong>Android SDK 7ï¼ˆAndroid 2.1ï¼Œå³Android Eclairï¼‰</strong>ä»¥ä¸Šçš„è®¾å¤‡å¸¦æ¥<strong>Material Color Palette</strong>ã€<strong>Widgetç€è‰²</strong>ã€<strong>Toolbar</strong>ç­‰åŠŸèƒ½ï¼Œå¹¶ä¸”ç”¨<strong>AppCompatActivity</strong>æ›¿ä»£<strong>ActionBarActivity</strong>ï¼Œåœ¨<strong>Android SDK 28ï¼ˆAndroid 9.0ï¼Œå³Android Pieï¼‰</strong>å‘å¸ƒåï¼Œ<strong>appcompat</strong>åº“éƒ½è¿ç§»åˆ°äº†<strong>AndroidX</strong>åº“ï¼Œ<strong>AndroidX</strong>åº“æ˜¯<strong>Android Jetpack</strong>ç»„ä»¶ã€‚</p><h2 id="AppCompatActivityç±»çš„setContentViewæ–¹æ³•ã€‚"><a href="#AppCompatActivityç±»çš„setContentViewæ–¹æ³•ã€‚" class="headerlink" title="AppCompatActivityç±»çš„setContentViewæ–¹æ³•ã€‚"></a><strong>AppCompatActivity</strong>ç±»çš„<strong>setContentViewæ–¹æ³•</strong>ã€‚</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AppCompatActivity.java</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setContentView</span><span class="params">(<span class="meta">@LayoutRes</span> <span class="keyword">int</span> layoutResID)</span> </span>{</span><br><span class="line">    <span class="comment">// è°ƒç”¨AppCompatDelegateçš„setContentView(int resId)æ–¹æ³•</span></span><br><span class="line">    getDelegate().setContentView(layoutResID);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="getDelegateæ–¹æ³•"><a href="#getDelegateæ–¹æ³•" class="headerlink" title="getDelegateæ–¹æ³•"></a>getDelegateæ–¹æ³•</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AppCompatActivity.java</span></span><br><span class="line"><span class="meta">@NonNull</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> AppCompatDelegate <span class="title">getDelegate</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (mDelegate == <span class="keyword">null</span>) {</span><br><span class="line">        <span class="comment">// å¦‚æœmDelegateä¸ºç©ºï¼Œå°±è°ƒç”¨AppCompatDelegateæŠ½è±¡ç±»çš„create(@NonNull Activity activity, @Nullable AppCompatCallback callback)æ–¹æ³•</span></span><br><span class="line">        mDelegate = AppCompatDelegate.create(<span class="keyword">this</span>, <span class="keyword">this</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> mDelegate;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="AppCompatDelegateæŠ½è±¡ç±»çš„createæ–¹æ³•"><a href="#AppCompatDelegateæŠ½è±¡ç±»çš„createæ–¹æ³•" class="headerlink" title="AppCompatDelegateæŠ½è±¡ç±»çš„createæ–¹æ³•"></a><strong>AppCompatDelegate</strong>æŠ½è±¡ç±»çš„<strong>create</strong>æ–¹æ³•</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AppCompatDelegate.java</span></span><br><span class="line"><span class="meta">@NonNull</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> AppCompatDelegate <span class="title">create</span><span class="params">(<span class="meta">@NonNull</span> Activity activity,</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="meta">@Nullable</span> AppCompatCallback callback)</span> </span>{</span><br><span class="line">    <span class="comment">// åˆ›å»ºAppCompatDelegateImplå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> AppCompatDelegateImpl(activity, callback);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>æ‰€ä»¥<strong>AppCompatDelegateImpl</strong>ç±»æ˜¯ç»§æ‰¿<strong>AppCompatDelegate</strong>æŠ½è±¡ç±»ã€‚</p><h2 id="AppCompatDelegateImplçš„setContentViewæ–¹æ³•"><a href="#AppCompatDelegateImplçš„setContentViewæ–¹æ³•" class="headerlink" title="AppCompatDelegateImplçš„setContentViewæ–¹æ³•"></a>AppCompatDelegateImplçš„setContentViewæ–¹æ³•</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AppCompatDelegateImpl.java</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setContentView</span><span class="params">(<span class="keyword">int</span> resId)</span> </span>{</span><br><span class="line">    <span class="comment">// åˆ›å»ºDecorViewï¼Œå¹¶ä¸”å°†å…¶æ·»åŠ åˆ°Window</span></span><br><span class="line">    ensureSubDecor();</span><br><span class="line">    <span class="comment">// æ‰¾åˆ°DecorViewä¸­çš„contentView</span></span><br><span class="line">    ViewGroup contentParent = mSubDecor.findViewById(android.R.id.content);</span><br><span class="line">    <span class="comment">// ç§»é™¤contentViewä¸­æ‰€æœ‰çš„View</span></span><br><span class="line">    contentParent.removeAllViews();</span><br><span class="line">    <span class="comment">// æ ¹æ®ä¼ å…¥çš„resIdå°†è¦åŠ è½½çš„XMLå¸ƒå±€æ·»åŠ åˆ°contentView</span></span><br><span class="line">    LayoutInflater.from(mContext).inflate(resId, contentParent);</span><br><span class="line">    <span class="comment">// onContentChanged()æ–¹æ³•æ˜¯ä¸€ä¸ªé’©å­æ–¹æ³•ï¼Œå®ƒä¼šåœ¨å±å¹•çš„å†…å®¹è§†å›¾å‘ç”Ÿå˜åŒ–æ—¶è°ƒç”¨</span></span><br><span class="line">    mAppCompatWindowCallback.getWrapped().onContentChanged();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ensureSubDecoræ–¹æ³•"><a href="#ensureSubDecoræ–¹æ³•" class="headerlink" title="ensureSubDecoræ–¹æ³•"></a><strong>ensureSubDecor</strong>æ–¹æ³•</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AppCompatDelegateImpl.java</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureSubDecor</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (!mSubDecorInstalled) {</span><br><span class="line">        <span class="comment">// å¦‚æœè¿˜æ²¡æœ‰åˆ›å»ºDecorViewï¼Œå°±è°ƒç”¨createSubDecor()æ–¹æ³•åˆ›å»ºDecorView</span></span><br><span class="line">        mSubDecor = createSubDecor();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¾—åˆ°titleçš„å­—ç¬¦</span></span><br><span class="line">        CharSequence title = getTitle();</span><br><span class="line">        <span class="keyword">if</span> (!TextUtils.isEmpty(title)) {</span><br><span class="line">            <span class="comment">// å¦‚æœè®¾ç½®äº†titleï¼Œå°±æ‰§è¡Œä»¥ä¸‹é€»è¾‘</span></span><br><span class="line">            <span class="keyword">if</span> (mDecorContentParent != <span class="keyword">null</span>) {</span><br><span class="line">                mDecorContentParent.setWindowTitle(title);</span><br><span class="line">            } <span class="keyword">else</span> <span class="keyword">if</span> (peekSupportActionBar() != <span class="keyword">null</span>) {</span><br><span class="line">                peekSupportActionBar().setWindowTitle(title);</span><br><span class="line">            } <span class="keyword">else</span> <span class="keyword">if</span> (mTitleView != <span class="keyword">null</span>) {</span><br><span class="line">                mTitleView.setText(title);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"><span class="comment">//é€‚é…å°ºå¯¸åœ¨è®¾å¤‡ä¸Šï¼Œä¸€äº›å‚æ•°çš„åˆå§‹åŒ–</span></span><br><span class="line">        applyFixedSizeWindow();</span><br><span class="line"></span><br><span class="line">        onSubDecorInstalled(mSubDecor);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ ‡è®°å·²ç»åˆ›å»ºDecorView</span></span><br><span class="line">        mSubDecorInstalled = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºé¢æ¿èœå•</span></span><br><span class="line">        PanelFeatureState st = getPanelState(FEATURE_OPTIONS_PANEL, <span class="keyword">false</span>);</span><br><span class="line">        <span class="keyword">if</span> (!mIsDestroyed &amp;&amp; (st == <span class="keyword">null</span> || st.menu == <span class="keyword">null</span>)) {</span><br><span class="line">            <span class="comment">// é€šè¿‡æ·»åŠ åˆ·æ–°é€šçŸ¥æ¶ˆæ¯åˆ°ä¸»çº¿ç¨‹å¯¹åº”çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ¥åˆ·æ–°ç•Œé¢ï¼Œç›®çš„æ˜¯é˜²æ­¢onCreateOptionsMenu(Nenu menu)æ–¹æ³•åœ¨Activityè°ƒç”¨onCreate(@Nullable Bundle savedInstanceState)æ–¹æ³•çš„é€”ä¸­è¢«è°ƒç”¨</span></span><br><span class="line">            invalidatePanelMenu(FEATURE_SUPPORT_ACTION_BAR);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ä½œç”¨æ˜¯<strong>åˆ›å»ºDecorView</strong>ï¼Œ<strong>å¹¶ä¸”å°†å…¶æ·»åŠ åˆ°Windowä¸­</strong>ï¼Œ<strong>åŒæ—¶åˆ›å»ºé¢æ¿èœå•</strong></p><h2 id="createSubDecoræ–¹æ³•"><a href="#createSubDecoræ–¹æ³•" class="headerlink" title="createSubDecoræ–¹æ³•"></a><strong>createSubDecor</strong>æ–¹æ³•</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AppCompatDelegateImpl.java</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> ViewGroup <span class="title">createSubDecor</span><span class="params">()</span> </span>{</span><br><span class="line">    TypedArray a = mContext.obtainStyledAttributes(R.styleable.AppCompatTheme);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!a.hasValue(R.styleable.AppCompatTheme_windowActionBar)) {</span><br><span class="line">        a.recycle();</span><br><span class="line">        <span class="comment">// å¦‚æœä½¿ç”¨AppCompatActivityï¼Œä½†æ˜¯æ²¡æœ‰è®¾ç½®ä¸€ä¸ªTheme.AppCompatçš„ä¸»é¢˜ï¼Œå°±æŠ›å‡ºIllegalStateExceptionå¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(</span><br><span class="line">                <span class="string">"You need to use a Theme.AppCompat theme (or descendant) with this activity."</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®Windowçš„å±æ€§</span></span><br><span class="line">    <span class="keyword">if</span> (a.getBoolean(R.styleable.AppCompatTheme_windowNoTitle, <span class="keyword">false</span>)) {</span><br><span class="line">        requestWindowFeature(Window.FEATURE_NO_TITLE);</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (a.getBoolean(R.styleable.AppCompatTheme_windowActionBar, <span class="keyword">false</span>)) {</span><br><span class="line">        <span class="comment">// ä¸å…è®¸æ²¡æœ‰æ ‡é¢˜çš„actionBar</span></span><br><span class="line">        requestWindowFeature(FEATURE_SUPPORT_ACTION_BAR);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (a.getBoolean(R.styleable.AppCompatTheme_windowActionBarOverlay, <span class="keyword">false</span>)) {</span><br><span class="line">        requestWindowFeature(FEATURE_SUPPORT_ACTION_BAR_OVERLAY);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (a.getBoolean(R.styleable.AppCompatTheme_windowActionModeOverlay, <span class="keyword">false</span>)) {</span><br><span class="line">        requestWindowFeature(FEATURE_ACTION_MODE_OVERLAY);</span><br><span class="line">    }</span><br><span class="line">    mIsFloating = a.getBoolean(R.styleable.AppCompatTheme_android_windowIsFloating, <span class="keyword">false</span>);</span><br><span class="line">    a.recycle();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒç”¨ensureWindow()æ–¹æ³•æ¥æ£€æŸ¥DecorViewæ˜¯å¦å·²ç»æ·»åŠ åˆ°Window</span></span><br><span class="line">    ensureWindow();</span><br><span class="line">    <span class="comment">// è°ƒç”¨æˆå‘˜å˜é‡mWindowçš„getDecorView()æ–¹æ³•åˆ›å»ºDecorViewï¼Œè¦æ³¨æ„çš„æ˜¯ï¼Œæˆå‘˜å˜é‡mWindowå£°æ˜ä¸ºWindowï¼ŒWindowæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œè¿™é‡Œçš„å®ç°ç±»æ˜¯PhoneWindow</span></span><br><span class="line">    mWindow.getDecorView();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¾—åˆ°LayoutInflater</span></span><br><span class="line">    <span class="keyword">final</span> LayoutInflater inflater = LayoutInflater.from(mContext);</span><br><span class="line">    ViewGroup subDecor = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ¹æ®æ ‡å¿—æ·»åŠ åˆ°å¯¹åº”çš„å¸ƒå±€</span></span><br><span class="line">    <span class="keyword">if</span> (!mWindowNoTitle) {</span><br><span class="line">        <span class="keyword">if</span> (mIsFloating) {</span><br><span class="line">            <span class="comment">// å¦‚æœçª—å£éœ€è¦æµ®åŠ¨ï¼Œå°±æ·»åŠ idæ˜¯abc_dialog_title_materialçš„å¸ƒå±€</span></span><br><span class="line">            subDecor = (ViewGroup) inflater.inflate(</span><br><span class="line">                    R.layout.abc_dialog_title_material, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æµ®åŠ¨çª—å£ä¸èƒ½æœ‰æ“ä½œæ ï¼Œé‡ç½®æ ‡å¿—</span></span><br><span class="line">            mHasActionBar = mOverlayActionBar = <span class="keyword">false</span>;</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (mHasActionBar) {</span><br><span class="line">            <span class="comment">// å¦‚æœçª—å£æœ‰actionBarï¼Œå°±æ‰§è¡Œä»¥ä¸‹é€»è¾‘</span></span><br><span class="line">            TypedValue outValue = <span class="keyword">new</span> TypedValue();</span><br><span class="line">            mContext.getTheme().resolveAttribute(R.attr.actionBarTheme, outValue, <span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">            Context themedContext;</span><br><span class="line">            <span class="keyword">if</span> (outValue.resourceId != <span class="number">0</span>) {</span><br><span class="line">                themedContext = <span class="keyword">new</span> ContextThemeWrapper(mContext, outValue.resourceId);</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                themedContext = mContext;</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ä½¿ç”¨ä¸»é¢˜åŒ–ä¸Šä¸‹æ–‡ï¼ˆthemedContextï¼‰æ·»åŠ idæ˜¯abc_screen_toolbarçš„å¸ƒå±€</span></span><br><span class="line">            subDecor = (ViewGroup) LayoutInflater.from(themedContext)</span><br><span class="line">                    .inflate(R.layout.abc_screen_toolbar, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">            mDecorContentParent = (DecorContentParent) subDecor</span><br><span class="line">                    .findViewById(R.id.decor_content_parent);</span><br><span class="line">            mDecorContentParent.setWindowCallback(getWindowCallback());</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å°†ç‰¹æ€§ä¼ ç»™DecorContentParent</span></span><br><span class="line">            <span class="keyword">if</span> (mOverlayActionBar) {</span><br><span class="line">                mDecorContentParent.initFeature(FEATURE_SUPPORT_ACTION_BAR_OVERLAY);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (mFeatureProgress) {</span><br><span class="line">                mDecorContentParent.initFeature(Window.FEATURE_PROGRESS);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (mFeatureIndeterminateProgress) {</span><br><span class="line">                mDecorContentParent.initFeature(Window.FEATURE_INDETERMINATE_PROGRESS);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">if</span> (mOverlayActionMode) {</span><br><span class="line">            <span class="comment">// å¦‚æœéœ€è¦è¦†ç›–Activityçš„å†…å®¹ï¼Œå°±æ·»åŠ idæ˜¯abc_screen_simple_overlay_action_modeçš„å¸ƒå±€</span></span><br><span class="line">            subDecor = (ViewGroup) inflater.inflate(</span><br><span class="line">                    R.layout.abc_screen_simple_overlay_action_mode, <span class="keyword">null</span>);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="comment">// å¦‚æœä¸éœ€è¦è¦†ç›–Activityçš„å†…å®¹ï¼Œå°±æ·»åŠ idæ˜¯abc_screen_simpleçš„å¸ƒå±€</span></span><br><span class="line">            subDecor = (ViewGroup) inflater.inflate(R.layout.abc_screen_simple, <span class="keyword">null</span>);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">// çœç•¥éƒ¨åˆ†ä»£ç </span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (subDecor == <span class="keyword">null</span>) {</span><br><span class="line">        <span class="comment">// å¦‚æœDecorViewè¿™ä¸ªæ—¶å€™è¿˜æ˜¯ç©ºï¼Œå°±æŠ›å‡ºIllegalArgumentExceptionå¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(</span><br><span class="line">                <span class="string">"AppCompat does not support the current theme features: { "</span></span><br><span class="line">                        + <span class="string">"windowActionBar: "</span> + mHasActionBar</span><br><span class="line">                        + <span class="string">", windowActionBarOverlay: "</span>+ mOverlayActionBar</span><br><span class="line">                        + <span class="string">", android:windowIsFloating: "</span> + mIsFloating</span><br><span class="line">                        + <span class="string">", windowActionModeOverlay: "</span> + mOverlayActionMode</span><br><span class="line">                        + <span class="string">", windowNoTitle: "</span> + mWindowNoTitle</span><br><span class="line">                        + <span class="string">" }"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (mDecorContentParent == <span class="keyword">null</span>) {</span><br><span class="line">        <span class="comment">// å¦‚æœæˆå‘˜å˜é‡mDecorContentParentä¸ºç©ºï¼Œå°±å°†DecorViewä¸­çš„idä¸ºtitleçš„TextViewèµ‹å€¼ç»™æˆå‘˜å˜é‡mTitleView</span></span><br><span class="line">        mTitleView = (TextView) subDecor.findViewById(R.id.title);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®©è£…é¥°å¯ä»¥é€‰æ‹©é€‚åˆç³»ç»Ÿçª—å£ï¼Œä¾‹å¦‚ï¼šWindowçš„è£…é¥°</span></span><br><span class="line">    ViewUtils.makeOptionalFitsSystemWindows(subDecor);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> ContentFrameLayout contentView = (ContentFrameLayout) subDecor.findViewById(</span><br><span class="line">            R.id.action_bar_activity_content);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¾—åˆ°contentView</span></span><br><span class="line">    <span class="keyword">final</span> ViewGroup windowContentView = (ViewGroup) mWindow.findViewById(android.R.id.content);</span><br><span class="line">    <span class="keyword">if</span> (windowContentView != <span class="keyword">null</span>) {</span><br><span class="line">        <span class="keyword">while</span> (windowContentView.getChildCount() &gt; <span class="number">0</span>) {</span><br><span class="line">            <span class="comment">// å¦‚æœå·²ç»æœ‰Viewæ·»åŠ åˆ°Windowçš„contentViewï¼Œå°±æŠŠå®ƒä»¬è¿ç§»åˆ°contentView</span></span><br><span class="line">            <span class="keyword">final</span> View child = windowContentView.getChildAt(<span class="number">0</span>);</span><br><span class="line">            windowContentView.removeViewAt(<span class="number">0</span>);</span><br><span class="line">            contentView.addView(child);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        windowContentView.setId(View.NO_ID);</span><br><span class="line">        <span class="comment">// ç»™contentViewæ·»åŠ android.R.id.contentçš„idï¼Œå¯¹FragmentæŒºæœ‰ç”¨</span></span><br><span class="line">        contentView.setId(android.R.id.content);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// decorContentæœ‰ä¸€ä¸ªå‰æ™¯å¯ç»˜åˆ¶çš„è®¾ç½®ï¼ˆwindowContentOverlayï¼‰ï¼Œè®¾ä¸ºç©ºï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬è‡ªå·±å¤„ç†å®ƒ</span></span><br><span class="line">        <span class="keyword">if</span> (windowContentView <span class="keyword">instanceof</span> FrameLayout) {</span><br><span class="line">            ((FrameLayout) windowContentView).setForeground(<span class="keyword">null</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒç”¨PhoneWindowçš„setContentView(View view)æ–¹æ³•</span></span><br><span class="line">    mWindow.setContentView(subDecor);</span><br><span class="line"></span><br><span class="line">    contentView.setAttachListener(<span class="keyword">new</span> ContentFrameLayout.OnAttachListener() {</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAttachedFromWindow</span><span class="params">()</span> </span>{}</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDetachedFromWindow</span><span class="params">()</span> </span>{</span><br><span class="line">            dismissPopups();</span><br><span class="line">        }</span><br><span class="line">    });</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›DecorView</span></span><br><span class="line">    <span class="keyword">return</span> subDecor;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å‚è€ƒæ–‡ç« åŠèµ„æ–™ï¼š<br>ã€ŠAndroidè¿›é˜¶ä¹‹å…‰ã€‹      //è¿™æœ¬ä¹¦çš„ä»£ç æ˜¯ä¹‹å‰çš„ç‰ˆæœ¬äº†ï¼Œæœ‰çš„ä¸œè¥¿å·²ç»è¿‡æ—¶ã€‚</p><p>æ·±å…¥äº†è§£Androidçš„Viewå·¥ä½œåŸç†ï¼š<a href="https://www.jianshu.com/p/4361fe3cf287">https://www.jianshu.com/p/4361fe3cf287</a></p><p>Android UIä½“ç³»çŸ¥è¯†&amp;é¢è¯•é¢˜: <a href="https://www.bilibili.com/read/cv13672159?spm_id_from=333.999.0.0">https://www.bilibili.com/read/cv13672159?spm_id_from=333.999.0.0</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Androidå¤šçº¿ç¨‹</title>
      <link href="/2021/10/21/Android%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
      <url>/2021/10/21/Android%E5%A4%9A%E7%BA%BF%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p>Androidæ²¿ç”¨äº†javaçš„çº¿ç¨‹æ¨¡å‹ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Viewçš„æ»‘åŠ¨å†²çª</title>
      <link href="/2021/10/14/View%E7%9A%84%E6%BB%91%E5%8A%A8%E5%86%B2%E7%AA%81/"/>
      <url>/2021/10/14/View%E7%9A%84%E6%BB%91%E5%8A%A8%E5%86%B2%E7%AA%81/</url>
      
        <content type="html"><![CDATA[<p>â€‹        æˆ‘ä»¬åœ¨å®Œæˆandroidéœ€æ±‚æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°å¤šç§æ§ä»¶åŒæ—¶å¯ä»¥æ»‘åŠ¨çš„åœºæ™¯ï¼Œè¿™æ—¶å°±å¯èƒ½ä¼šå‡ºç°æ»‘åŠ¨å†²çªã€‚åœ¨å­¦ä¹ å®Œandroidäº‹ä»¶çš„åˆ†å‘æœºåˆ¶ä¹‹åï¼Œæˆ‘ä»¬æ¥å­¦ä¹ æ»‘åŠ¨å†²çªçš„å¤„ç†åŠæ³•ã€‚</p><h1 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h1><p><img src="https://i.bmp.ovh/imgs/2021/10/22942787a7ed19cb.png"></p><span id="more"></span><h1 id="å¸¸è§çš„æ»‘åŠ¨å†²çªåœºæ™¯"><a href="#å¸¸è§çš„æ»‘åŠ¨å†²çªåœºæ™¯" class="headerlink" title="å¸¸è§çš„æ»‘åŠ¨å†²çªåœºæ™¯"></a>å¸¸è§çš„æ»‘åŠ¨å†²çªåœºæ™¯</h1><img src="https://i.bmp.ovh/imgs/2021/10/bf87cbe1b2d94420.png" style="zoom: 50%;"><ul><li><p>åœºæ™¯ä¸€ï¼šå¤–éƒ¨æ»‘åŠ¨æ–¹å‘å’Œå†…éƒ¨ä¸ä¸€è‡´ã€‚</p></li><li><p>åœºæ™¯äºŒï¼šå¤–éƒ¨æ»‘åŠ¨æ–¹å‘å’Œå†…éƒ¨ä¸€è‡´ã€‚</p></li><li><p>åœºæ™¯ä¸‰ï¼šä»¥ä¸Šä¸¤ç§æƒ…å†µçš„åµŒå¥—ã€‚</p><blockquote><p>åœºæ™¯ä¸€çš„åº”ç”¨åœºæ™¯ç¤ºä¾‹ï¼šViewPagerå’ŒFragmentçš„é…åˆã€‚ï¼ˆViewPagerå†…éƒ¨å¤„ç†äº†æ»‘åŠ¨å†²çªï¼‰</p><p>åœºæ™¯äºŒçš„åº”ç”¨åœºæ™¯ç¤ºä¾‹ï¼šSrollerViewé‡ŒåµŒå¥—ListViewã€‚</p></blockquote></li></ul><h1 id="å¤„ç†è§„åˆ™"><a href="#å¤„ç†è§„åˆ™" class="headerlink" title="å¤„ç†è§„åˆ™"></a>å¤„ç†è§„åˆ™</h1><h2 id="åœºæ™¯1"><a href="#åœºæ™¯1" class="headerlink" title="åœºæ™¯1"></a>åœºæ™¯1</h2><p>å› ä¸ºå†…å¤–ä¸¤å±‚çš„æ»‘åŠ¨æ–¹å‘ä¸ä¸€è‡´ï¼Œæ‰€ä»¥å½“ç”¨æˆ·è¿›è¡Œå¤–å±‚æ»‘åŠ¨æ—¶ï¼Œéœ€è¦è®©å¤–éƒ¨çš„Viewæ‹¦æˆªç‚¹å‡»äº‹ä»¶ï¼Œå½“ç”¨æˆ·è¿›è¡Œå†…å±‚çš„æ»‘åŠ¨æ—¶ï¼Œéœ€è¦è®©å†…éƒ¨Viewæ‹¦æˆªç‚¹å‡»äº‹ä»¶ã€‚è¿™æ—¶æˆ‘ä»¬å¯ä»¥æ ¹æ®æ»‘åŠ¨çš„ç‰¹å¾æ¥è§£å†³æ»‘åŠ¨å†²çªã€‚å³<strong>æ ¹æ®æ»‘åŠ¨çš„æ–¹å‘æ¥åˆ¤æ–­æ‹¦æˆªäº‹ä»¶çš„View</strong>ã€‚</p><p>è¿™ä¸ªé—®é¢˜å°±å˜å¾—å¾ˆç®€å•äº†â€”â€”æˆ‘ä»¬å¯ä»¥æ ¹æ®æ»‘åŠ¨è¿‡ç¨‹ä¸­<strong>ä¸¤ä¸ªç‚¹çš„åæ ‡æ¥å¾—å‡ºæ»‘åŠ¨çš„æ–¹å‘</strong>ã€‚</p><p>ä¾‹å¦‚ï¼š</p><ul><li>æ°´å¹³æ–¹å‘å’Œç«–ç›´æ–¹å‘çš„è·ç¦»å·®</li><li>æ»‘åŠ¨è·¯å¾„å’Œæ°´å¹³æ–¹å‘å½¢æˆçš„å¤¹è§’</li><li>æ°´å¹³å’Œç«–ç›´æ–¹å‘çš„é€Ÿåº¦å·®</li></ul><h2 id="åœºæ™¯2"><a href="#åœºæ™¯2" class="headerlink" title="åœºæ™¯2"></a>åœºæ™¯2</h2><p>è¿™ä¸ªåœºæ™¯æ— æ³•æ ¹æ®åœºæ™¯ä¸€çš„åˆ¤æ–­æ¡ä»¶æ¥åšå‡ºåˆ¤æ–­ï¼Œä½†æˆ‘ä»¬ä¸€èˆ¬èƒ½åœ¨ä¸šåŠ¡ä¸Šæ‰¾åˆ°çªç ´ç‚¹ã€‚æ¯”å¦‚åœ¨æŸç§çŠ¶æ€æ—¶éœ€è¦å¤–éƒ¨Viewå“åº”ç”¨æˆ·çš„æ»‘åŠ¨ï¼Œåœ¨å¦ä¸€ç§çŠ¶æ€æ—¶éœ€è¦å†…éƒ¨Viewå“åº”ã€‚</p><h1 id="è§£å†³æ–¹å¼"><a href="#è§£å†³æ–¹å¼" class="headerlink" title="è§£å†³æ–¹å¼"></a>è§£å†³æ–¹å¼</h1><p>æŠ›å¼€æ»‘åŠ¨è§„åˆ™ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€ç§ä¸ä¾èµ–å…·ä½“çš„æ»‘åŠ¨è§„åˆ™çš„é€šç”¨çš„è§£å†³æ–¹æ³•ã€‚</p><h2 id="å¤–éƒ¨æ‹¦æˆªæ³•"><a href="#å¤–éƒ¨æ‹¦æˆªæ³•" class="headerlink" title="å¤–éƒ¨æ‹¦æˆªæ³•"></a>å¤–éƒ¨æ‹¦æˆªæ³•</h2><p>å³ç‚¹å‡»äº‹ä»¶éƒ½å…ˆç»è¿‡çˆ¶å®¹å™¨çš„æ‹¦æˆªå¤„ç†ã€‚å¦‚æœçˆ¶å®¹å™¨éœ€è¦æ­¤äº‹ä»¶å°±è¿›è¡Œæ‹¦æˆªï¼Œå¦åˆ™ä¸æ‹¦æˆªã€‚</p><p>éœ€è¦<strong>é‡å†™çˆ¶å®¹å™¨çš„onInterceptTouchEventæ–¹æ³•</strong>ï¼Œåœ¨æ–¹æ³•å†…åšç›¸åº”çš„æ‹¦æˆªã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onInterceptTouchEvent</span> <span class="params">(MotionEvent event)</span> </span>{</span><br><span class="line">       <span class="keyword">boolean</span> intercept = <span class="keyword">false</span>;</span><br><span class="line">       <span class="keyword">int</span> x = (<span class="keyword">int</span>) event.getX();</span><br><span class="line">       <span class="keyword">int</span> y = (<span class="keyword">int</span>) event.getY();</span><br><span class="line">       <span class="keyword">switch</span> (event.getAction()) {</span><br><span class="line">           <span class="keyword">case</span> MotionEvent.ACTION_DOWN:<span class="comment">//1</span></span><br><span class="line">               intercept = <span class="keyword">false</span>;</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">           <span class="keyword">case</span> MotionEvent.ACTION_MOVE:</span><br><span class="line">               <span class="keyword">if</span>( *çˆ¶å®¹å™¨éœ€è¦çš„å½“å‰ç‚¹å‡»äº‹ä»¶*  ){</span><br><span class="line">                   intercept = <span class="keyword">true</span>;</span><br><span class="line">               }<span class="keyword">else</span>{</span><br><span class="line">                   intercept = <span class="keyword">false</span>;</span><br><span class="line">               }</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">           <span class="keyword">case</span> MotionEvent.ACTION_UP:<span class="comment">//2</span></span><br><span class="line">               intercept = <span class="keyword">false</span>;</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">       }</span><br><span class="line">       lastInterceptX = x;</span><br><span class="line">       lastInterceptY = y;</span><br><span class="line">       <span class="keyword">return</span> intercept;</span><br><span class="line">   }</span><br></pre></td></tr></tbody></table></figure><p>é’ˆå¯¹ä¸åŒçš„æ»‘åŠ¨å†²çªï¼Œåªéœ€è¦ä¿®æ”¹çˆ¶å®¹å™¨éœ€è¦çš„å½“å‰ç‚¹å‡»äº‹ä»¶è¿™ä¸ªæ¡ä»¶å³å¯ã€‚</p><blockquote><p>1ï¼šä¸å¯æ‹¦æˆªACTION_DOWNäº‹ä»¶ï¼Œä¸€æ—¦æ‹¦æˆªï¼Œåç»­MOVEå’ŒUPäº‹ä»¶éƒ½ä¼šäº¤ç”±çˆ¶å®¹å™¨å¤„ç†</p><p>2ï¼šå¿…é¡»è¿”å›false.å¦‚æœè¿”å›trueï¼Œå¹¶ä¸”æ»‘åŠ¨äº‹ä»¶äº¤ç»™å­Viewå¤„ç†ï¼Œé‚£ä¹ˆå­Viewå°†æ¥æ”¶ä¸åˆ°ACTION_UPäº‹ä»¶ï¼Œå­Viewçš„onClickäº‹ä»¶ä¹Ÿæ— æ³•è§¦å‘ã€‚è€Œçˆ¶Viewä¸ä¸€æ ·ï¼Œå¦‚æœçˆ¶Viewåœ¨ACTION_MOVEä¸­å¼€å§‹æ‹¦æˆªäº‹ä»¶ï¼Œé‚£ä¹ˆåç»­ACTION_UPä¹Ÿå°†é»˜è®¤äº¤ç»™çˆ¶Viewå¤„ç†ï¼</p></blockquote><h2 id="å†…éƒ¨æ‹¦æˆªæ³•"><a href="#å†…éƒ¨æ‹¦æˆªæ³•" class="headerlink" title="å†…éƒ¨æ‹¦æˆªæ³•"></a>å†…éƒ¨æ‹¦æˆªæ³•</h2><p>çˆ¶å®¹å™¨ä¸æ‹¦æˆªä»»ä½•äº‹ä»¶ï¼Œæ‰€æœ‰äº‹ä»¶éƒ½ä¼ é€’ç»™å­å…ƒç´ ï¼Œæ ¹æ®å­å…ƒç´ å¯¹äº‹ä»¶çš„æ¶ˆè€—æƒ…å†µåˆ¤æ–­æ˜¯å¦äº¤ç”±çˆ¶å®¹å™¨å¤„ç†ã€‚</p><p><strong>ä¸Androidä¸­äº‹ä»¶åˆ†å‘æœºåˆ¶ä¸ä¸€è‡´ï¼Œéœ€è¦é…åˆrequestDisallowInterceptTouchEventæ–¹æ³•æ‰èƒ½æ­£å¸¸å·¥ä½œ</strong></p><p><strong>éœ€è¦é‡å†™å­å…ƒç´ çš„diapatchTouchEventæ–¹æ³•</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">dispatchTouchEvent</span><span class="params">(MotionEvent event)</span></span>{</span><br><span class="line">        <span class="keyword">int</span> x = (<span class="keyword">int</span>) event.getX();</span><br><span class="line">        <span class="keyword">int</span> y = (<span class="keyword">int</span>) event.getY();</span><br><span class="line">        <span class="keyword">switch</span> (event.getAction()) {</span><br><span class="line">            <span class="keyword">case</span> MotionEvent.ACTION_DOWN:</span><br><span class="line">                getParent().requestDisallowInterceptTouchEvent(<span class="keyword">true</span>);<span class="comment">//ä¸å…è®¸çˆ¶å…ƒç´ æ‹¦æˆªäº‹ä»¶</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> MotionEvent.ACTION_MOVE:</span><br><span class="line">                <span class="keyword">int</span> deltaX = x - lastX;</span><br><span class="line">                <span class="keyword">int</span> deltaY = y - lastY;</span><br><span class="line">                <span class="keyword">if</span>(  *çˆ¶å®¹å™¨éœ€è¦æ­¤ç±»ç‚¹å‡»äº‹ä»¶*  ){</span><br><span class="line">                getParent().requestDisallowInterceptTouchEvent(<span class="keyword">false</span>);  <span class="comment">//å°†äº‹ä»¶ä¼ é€’ç»™çˆ¶å…ƒç´ </span></span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> MotionEvent.ACTION_UP:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            lastX = x;</span><br><span class="line">            lastY = y;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">super</span>.dispatchTouchEvent(event);</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><p><strong>çˆ¶å…ƒç´ è¦é»˜è®¤æ‹¦æˆªé™¤äº†ACTION_DOWNä»¥å¤–çš„å…¶ä»–äº‹ä»¶</strong>ï¼Œè¿™æ ·å½“å­å…ƒç´ è°ƒç”¨parent.requestDisallowInterceptTouchEventï¼ˆfalseï¼‰æ–¹æ³•æ—¶ï¼ˆå³å­å…ƒç´ ä¸å¯¹è¯¥äº‹ä»¶è¿›è¡Œå¤„ç†ï¼Œäº¤ç”±çˆ¶å®¹å™¨å¤„ç†ï¼‰ï¼Œçˆ¶å…ƒç´ æ‰èƒ½ç»§ç»­æ‹¦æˆªæ‰€éœ€äº‹ä»¶ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span> </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onInterceptTouchEvent</span><span class="params">(MotionEvent event)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> action = event.getAction();</span><br><span class="line">        <span class="keyword">if</span> (action == MotionEvent.ACTION_DOWN) {</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><p>ä¸ºä»€ä¹ˆçˆ¶å®¹å™¨ä¸èƒ½æ‹¦æˆªACTION_DOWNäº‹ä»¶å‘¢ï¼Ÿ</p><p>å› ä¸º<strong>ACTION_DOWNäº‹ä»¶ä¸å—FLAG_DISALLOW_INTERCEPTè¿™ä¸ªæ ‡è®°ä½çš„æ§åˆ¶</strong>ï¼Œæ‰€ä»¥ä¸€æ—¦çˆ¶å®¹å™¨æ‹¦æˆªäº†ACTION_DOWNäº‹ä»¶ï¼Œåˆ™æ‰€æœ‰äº‹ä»¶éƒ½æ— æ³•ä¼ é€’åˆ°å­å…ƒç´ ä¸­å»ã€‚</p><h1 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h1><h2 id="1-åœºæ™¯ä¸€"><a href="#1-åœºæ™¯ä¸€" class="headerlink" title="1.åœºæ™¯ä¸€"></a>1.åœºæ™¯ä¸€</h2><h3 id="å¤–éƒ¨æ‹¦æˆª"><a href="#å¤–éƒ¨æ‹¦æˆª" class="headerlink" title="å¤–éƒ¨æ‹¦æˆª"></a>å¤–éƒ¨æ‹¦æˆª</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¤„ç†æ»‘åŠ¨å†²çª</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onInterceptTouchEvent</span> <span class="params">(MotionEvent event)</span> </span>{</span><br><span class="line">        <span class="keyword">boolean</span> intercept = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">int</span> x = (<span class="keyword">int</span>) event.getX();</span><br><span class="line">        <span class="keyword">int</span> y = (<span class="keyword">int</span>) event.getY();</span><br><span class="line">        <span class="keyword">switch</span> (event.getAction()) {</span><br><span class="line">            <span class="keyword">case</span> MotionEvent.ACTION_DOWN:</span><br><span class="line">                intercept = <span class="keyword">false</span>;</span><br><span class="line">                Log.d(<span class="string">"this"</span>,<span class="string">" false"</span>);</span><br><span class="line">                <span class="keyword">if</span>(!scroller.isFinished()) {</span><br><span class="line">                    scroller.abortAnimation();</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> MotionEvent.ACTION_MOVE:</span><br><span class="line">                <span class="keyword">int</span> deltaX = x - lastInterceptX;</span><br><span class="line">                <span class="keyword">int</span> deltaY = y - lastInterceptY;</span><br><span class="line">                <span class="comment">//viewGroupæ‹¦æˆªæ°´å¹³æ»‘åŠ¨</span></span><br><span class="line">                <span class="keyword">if</span>(Math.abs(deltaX) - Math.abs(deltaY) &gt; <span class="number">0</span>){</span><br><span class="line">                    intercept = <span class="keyword">true</span>;</span><br><span class="line">                    Log.d(<span class="string">"this"</span>,<span class="string">"true"</span>);</span><br><span class="line">                }<span class="keyword">else</span>{</span><br><span class="line">                    intercept = <span class="keyword">false</span>;</span><br><span class="line">                    Log.d(<span class="string">"this"</span>,<span class="string">"false"</span>);</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> MotionEvent.ACTION_UP:</span><br><span class="line">                intercept = <span class="keyword">false</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">        lastX = x;</span><br><span class="line">        lastY = y;</span><br><span class="line">        lastInterceptX = x;</span><br><span class="line">        lastInterceptY = y;</span><br><span class="line">        <span class="keyword">return</span> intercept;</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><h3 id="å†…éƒ¨æ‹¦æˆª"><a href="#å†…éƒ¨æ‹¦æˆª" class="headerlink" title="å†…éƒ¨æ‹¦æˆª"></a>å†…éƒ¨æ‹¦æˆª</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­å…ƒç´ é‡å†™çš„ListView</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">dispatchTouchEvent</span><span class="params">(MotionEvent event)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> x = (<span class="keyword">int</span>) event.getX();</span><br><span class="line">        <span class="keyword">int</span> y = (<span class="keyword">int</span>) event.getY();</span><br><span class="line">        <span class="keyword">switch</span> (event.getAction()) {</span><br><span class="line">            <span class="keyword">case</span> MotionEvent.ACTION_DOWN: {<span class="comment">//ä¸å…è®¸çˆ¶å¸ƒå±€æ‹¦æˆª</span></span><br><span class="line">                mHorizontalView1.requestDisallowInterceptTouchEvent(<span class="keyword">true</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">case</span> MotionEvent.ACTION_MOVE: {</span><br><span class="line">                <span class="keyword">int</span> deltaX = x - mLastX;</span><br><span class="line">                <span class="keyword">int</span> deltaY = y - mLastY;</span><br><span class="line">                <span class="keyword">if</span> (Math.abs(deltaX) &gt; Math.abs(deltaY)) {<span class="comment">//è¦è®©çˆ¶å¸ƒå±€æ‹¦æˆª</span></span><br><span class="line">                    mHorizontalView1.requestDisallowInterceptTouchEvent(<span class="keyword">false</span>);</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">case</span> MotionEvent.ACTION_UP: {</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">        mLastX = x;</span><br><span class="line">        mLastY = y;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.dispatchTouchEvent(event);</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//çˆ¶å…ƒç´ HorizontalView</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onInterceptTouchEvent</span> <span class="params">(MotionEvent event)</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> x = (<span class="keyword">int</span>) event.getX();</span><br><span class="line">        <span class="keyword">int</span> y = (<span class="keyword">int</span>) event.getY();</span><br><span class="line">        <span class="keyword">if</span>(event.getAction() == MotionEvent.ACTION_DOWN){</span><br><span class="line">            lastX = x;</span><br><span class="line">            lastY = y;</span><br><span class="line">            <span class="keyword">if</span>(!scroller.isFinished()){</span><br><span class="line">                scroller.abortAnimation();</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><p>ç”±äºå†…éƒ¨æ‹¦æˆªæ¯”è¾ƒå¤æ‚ï¼Œä¸€èˆ¬ä¸æ¨èä½¿ç”¨ã€‚</p><p>æœªå®Œå¾…ç»­â€¦â€¦</p>]]></content>
      
      
      
        <tags>
            
            <tag> android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rxjavaç¬”è®°</title>
      <link href="/2021/07/31/Rxjava%E7%AC%94%E8%AE%B0/"/>
      <url>/2021/07/31/Rxjava%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p><img src="https://ftp.bmp.ovh/imgs/2021/07/2d246025850df29b.png"></p><p><img src="https://i.bmp.ovh/imgs/2021/07/c9c97ebe6c5339f7.png"></p><p><img src="https://i.bmp.ovh/imgs/2021/07/5b634956e63e2778.png"></p><p><img src="https://i.bmp.ovh/imgs/2021/07/f7d85b4c5a31f3fc.png"></p><p><img src="https://i.bmp.ovh/imgs/2021/07/ea959b00ad8cee3e.png"></p><p><img src="https://ftp.bmp.ovh/imgs/2021/07/c428a326f23730f1.png"></p><p><img src="https://ftp.bmp.ovh/imgs/2021/07/297b474435eac378.png"></p><p><img src="https://ftp.bmp.ovh/imgs/2021/07/91e4e4b55ad1c010.png"></p>]]></content>
      
      
      
        <tags>
            
            <tag> android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åç¼€è¡¨è¾¾å¼åŠè®¡ç®—</title>
      <link href="/2021/07/16/%E5%90%8E%E7%BC%80%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%8F%8A%E8%AE%A1%E7%AE%97/"/>
      <url>/2021/07/16/%E5%90%8E%E7%BC%80%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%8F%8A%E8%AE%A1%E7%AE%97/</url>
      
        <content type="html"><![CDATA[<h1 id="åç¼€è¡¨è¾¾å¼"><a href="#åç¼€è¡¨è¾¾å¼" class="headerlink" title="åç¼€è¡¨è¾¾å¼"></a>åç¼€è¡¨è¾¾å¼</h1><h2 id="æ¦‚å¿µä¸è¡¨ç¤º"><a href="#æ¦‚å¿µä¸è¡¨ç¤º" class="headerlink" title="æ¦‚å¿µä¸è¡¨ç¤º"></a>æ¦‚å¿µä¸è¡¨ç¤º</h2><h3 id="å¯¹è¡¨è¾¾å¼çš„è®°æ³•"><a href="#å¯¹è¡¨è¾¾å¼çš„è®°æ³•" class="headerlink" title="å¯¹è¡¨è¾¾å¼çš„è®°æ³•"></a>å¯¹è¡¨è¾¾å¼çš„è®°æ³•</h3><p>å‰ç¼€è¡¨è¾¾å¼ã€ä¸­ç¼€è¡¨è¾¾å¼ã€åç¼€è¡¨è¾¾å¼ï¼ˆé€†æ³¢å…°å¼ï¼‰å®ƒä»¬éƒ½æ˜¯å¯¹è¡¨è¾¾å¼çš„è®°æ³•ã€‚å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«åœ¨äºè¿ç®—ç¬¦ç›¸å¯¹ä¸æ“ä½œæ•°çš„ä½ç½®ä¸åŒï¼šå‰ç¼€è¡¨è¾¾å¼çš„è¿ç®—ç¬¦ä½äºä¸å…¶ç›¸å…³çš„æ“ä½œæ•°ä¹‹å‰ï¼›ä¸­ç¼€å’Œåç¼€åŒç†ã€‚åç¼€è¡¨è¾¾å¼åˆç§°é€†æ³¢å…°å¼æ˜¯ä¸€ç§æ˜¯ç”±æ³¢å…°æ•°å­¦å®¶æ‰¬Â·æ­¦å¡è°¢ç»´å¥‡1920å¹´å¼•å…¥çš„æ•°å­¦è¡¨è¾¾å¼å½¢å¼ï¼Œä¸éœ€è¦æ‹¬å·æ¥æ ‡è¯†æ“ä½œç¬¦çš„ä¼˜å…ˆçº§ã€‚</p><span id="more"></span><p>ä¸¾ä¾‹ï¼š</p><p>(3 + 4) Ã— 5 - 6 å°±æ˜¯ä¸­ç¼€è¡¨è¾¾å¼<br>- Ã— + 3 4 5 6 å‰ç¼€è¡¨è¾¾å¼<br>3 4 + 5 Ã— 6 - åç¼€è¡¨è¾¾å¼</p><h3 id="ä¸ºä½•ä½¿ç”¨åç¼€è¡¨è¾¾å¼ï¼Ÿ"><a href="#ä¸ºä½•ä½¿ç”¨åç¼€è¡¨è¾¾å¼ï¼Ÿ" class="headerlink" title="ä¸ºä½•ä½¿ç”¨åç¼€è¡¨è¾¾å¼ï¼Ÿ"></a>ä¸ºä½•ä½¿ç”¨åç¼€è¡¨è¾¾å¼ï¼Ÿ</h3><p>ä¸­ç¼€è¡¨è¾¾å¼æ˜¯äººä»¬å¸¸ç”¨çš„ç®—æœ¯è¡¨ç¤ºæ–¹æ³•ã€‚è™½ç„¶äººçš„å¤§è„‘å¾ˆå®¹æ˜“ç†è§£ä¸åˆ†æä¸­ç¼€è¡¨è¾¾å¼ï¼Œä½†å¯¹è®¡ç®—æœºæ¥è¯´ä¸­ç¼€è¡¨è¾¾å¼å´æ˜¯å¾ˆå¤æ‚çš„ï¼Œå› æ­¤è®¡ç®—è¡¨è¾¾å¼çš„å€¼æ—¶ï¼Œé€šå¸¸éœ€è¦å…ˆå°†ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºå‰ç¼€æˆ–åç¼€è¡¨è¾¾å¼ï¼Œç„¶åå†è¿›è¡Œæ±‚å€¼ã€‚å¯¹è®¡ç®—æœºæ¥è¯´ï¼Œè®¡ç®—å‰ç¼€æˆ–åç¼€è¡¨è¾¾å¼çš„å€¼éå¸¸ç®€å•ã€‚</p><h2 id="ä¸­ç¼€åˆ°åç¼€çš„è¡¨ç¤º"><a href="#ä¸­ç¼€åˆ°åç¼€çš„è¡¨ç¤º" class="headerlink" title="ä¸­ç¼€åˆ°åç¼€çš„è¡¨ç¤º"></a>ä¸­ç¼€åˆ°åç¼€çš„è¡¨ç¤º</h2><h3 id="è½¬åŒ–è§„åˆ™"><a href="#è½¬åŒ–è§„åˆ™" class="headerlink" title="è½¬åŒ–è§„åˆ™"></a>è½¬åŒ–è§„åˆ™</h3><p>éœ€è¦åˆ†é…2ä¸ªæ ˆï¼Œä¸€ä¸ªä½œä¸ºä¸´æ—¶å­˜å‚¨è¿ç®—ç¬¦çš„æ ˆS1ï¼ˆå«ä¸€ä¸ªç»“æŸç¬¦å·ï¼‰ï¼Œä¸€ä¸ªä½œä¸ºå­˜æ”¾ç»“æœï¼ˆé€†æ³¢å…°å¼ï¼‰çš„æ ˆS2ï¼ˆç©ºæ ˆï¼‰ï¼ŒS1æ ˆå¯å…ˆæ”¾å…¥ä¼˜å…ˆçº§æœ€ä½çš„è¿ç®—ç¬¦#ï¼Œæ³¨æ„ï¼Œä¸­ç¼€å¼åº”ä»¥æ­¤æœ€ä½ä¼˜å…ˆçº§çš„è¿ç®—ç¬¦ç»“æŸã€‚å¯æŒ‡å®šå…¶ä»–å­—ç¬¦ï¼Œä¸ä¸€å®šé#ä¸å¯ã€‚ä»ä¸­ç¼€å¼çš„å·¦ç«¯å¼€å§‹å–å­—ç¬¦ï¼Œé€åºè¿›è¡Œå¦‚ä¸‹æ­¥éª¤ï¼š</p><p>ï¼ˆ1ï¼‰è‹¥å–å‡ºçš„å­—ç¬¦æ˜¯æ“ä½œæ•°ï¼Œåˆ™åˆ†æå‡ºå®Œæ•´çš„è¿ç®—æ•°ï¼Œè¯¥æ“ä½œæ•°ç›´æ¥é€å…¥S2æ ˆã€‚</p><p>ï¼ˆ2ï¼‰è‹¥å–å‡ºçš„å­—ç¬¦æ˜¯è¿ç®—ç¬¦ï¼Œåˆ™å°†è¯¥è¿ç®—ç¬¦ä¸S1æ ˆæ ˆé¡¶å…ƒç´ æ¯”è¾ƒï¼Œå¦‚æœè¯¥è¿ç®—ç¬¦(ä¸åŒ…æ‹¬æ‹¬å·è¿ç®—ç¬¦)ä¼˜å…ˆçº§é«˜äºS1æ ˆæ ˆé¡¶è¿ç®—ç¬¦ï¼ˆåŒ…æ‹¬å·¦æ‹¬å·ï¼‰ä¼˜å…ˆçº§ï¼Œåˆ™å°†è¯¥è¿ç®—ç¬¦è¿›S1æ ˆï¼Œå¦åˆ™ï¼Œå°†S1æ ˆçš„æ ˆé¡¶è¿ç®—ç¬¦å¼¹å‡ºï¼Œé€å…¥S2æ ˆä¸­ï¼Œç›´è‡³S1æ ˆæ ˆé¡¶è¿ç®—ç¬¦ï¼ˆåŒ…æ‹¬å·¦æ‹¬å·ï¼‰ä½äºï¼ˆä¸åŒ…æ‹¬ç­‰äºï¼‰è¯¥è¿ç®—ç¬¦ä¼˜å…ˆçº§æ—¶åœæ­¢å¼¹å‡ºè¿ç®—ç¬¦ï¼Œæœ€åå°†è¯¥è¿ç®—ç¬¦é€å…¥S1æ ˆã€‚</p><p>ï¼ˆ3ï¼‰è‹¥å–å‡ºçš„å­—ç¬¦æ˜¯â€œï¼ˆâ€ï¼Œåˆ™ç›´æ¥é€å…¥S1æ ˆé¡¶ã€‚</p><p>ï¼ˆ4ï¼‰è‹¥å–å‡ºçš„å­—ç¬¦æ˜¯â€œï¼‰â€ï¼Œåˆ™å°†è·ç¦»S1æ ˆæ ˆé¡¶æœ€è¿‘çš„â€œï¼ˆâ€ä¹‹é—´çš„è¿ç®—ç¬¦ï¼Œé€ä¸ªå‡ºæ ˆï¼Œä¾æ¬¡é€å…¥S2æ ˆï¼Œæ­¤æ—¶æŠ›å¼ƒâ€œï¼ˆâ€ã€‚</p><p>ï¼ˆ5ï¼‰é‡å¤ä¸Šé¢çš„1~4æ­¥ï¼Œç›´è‡³å¤„ç†å®Œæ‰€æœ‰çš„è¾“å…¥å­—ç¬¦ã€‚</p><p>ï¼ˆ6ï¼‰è‹¥å–å‡ºçš„å­—ç¬¦æ˜¯â€œ#â€ï¼Œåˆ™å°†S1æ ˆå†…æ‰€æœ‰è¿ç®—ç¬¦ï¼ˆä¸åŒ…æ‹¬â€œ#â€ï¼‰ï¼Œé€ä¸ªå‡ºæ ˆï¼Œä¾æ¬¡é€å…¥S2æ ˆã€‚</p><p>å®Œæˆä»¥ä¸Šæ­¥éª¤ï¼ŒS2æ ˆä¾¿ä¸ºé€†æ³¢å…°å¼è¾“å‡ºç»“æœã€‚ä¸è¿‡S2åº”åšä¸€ä¸‹é€†åºå¤„ç†ã€‚ä¾¿å¯ä»¥æŒ‰ç…§é€†æ³¢å…°å¼çš„è®¡ç®—æ–¹æ³•è®¡ç®—</p><p>ä¸¾ä¾‹ï¼š</p><img src="https://i.bmp.ovh/imgs/2021/07/9754479463989414.png" style="zoom:33%;"><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyCharStack</span> </span>{<span class="comment">//è‡ªå®šä¹‰çš„æ ˆ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">char</span>[] array;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> maxSize;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> top;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyCharStack</span><span class="params">(<span class="keyword">int</span> size)</span></span>{</span><br><span class="line">        <span class="keyword">this</span>.maxSize = size;</span><br><span class="line">        array = <span class="keyword">new</span> <span class="keyword">char</span>[size];</span><br><span class="line">        top = -<span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‹å…¥æ•°æ®</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">char</span> value)</span></span>{</span><br><span class="line">        <span class="keyword">if</span>(top &lt; maxSize-<span class="number">1</span>){</span><br><span class="line">            array[++top] = value;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¼¹å‡ºæ ˆé¡¶æ•°æ®</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">char</span> <span class="title">pop</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> array[top--];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¿é—®æ ˆé¡¶æ•°æ®</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">char</span> <span class="title">peek</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> array[top];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥çœ‹æŒ‡å®šä½ç½®çš„å…ƒç´ </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">char</span> <span class="title">peekN</span><span class="params">(<span class="keyword">int</span> n)</span></span>{</span><br><span class="line">        <span class="keyword">return</span> array[n];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸ºäº†ä¾¿äºåé¢åˆ†è§£å±•ç¤ºæ ˆä¸­çš„å†…å®¹ï¼Œæˆ‘ä»¬å¢åŠ äº†ä¸€ä¸ªéå†æ ˆçš„æ–¹æ³•(å®é™…ä¸Šæ ˆåªèƒ½è®¿é—®æ ˆé¡¶å…ƒç´ çš„)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">displayStack</span><span class="params">()</span></span>{</span><br><span class="line">        System.out.print(<span class="string">"Stack(bottom--&gt;top):"</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; top+<span class="number">1</span>; i++){</span><br><span class="line">            System.out.print(peekN(i));</span><br><span class="line">            System.out.print(<span class="string">' '</span>);</span><br><span class="line">        }</span><br><span class="line">        System.out.println(<span class="string">""</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">StackToString</span><span class="params">()</span></span>{</span><br><span class="line">        StringBuilder str = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; top+<span class="number">1</span>; i++){</span><br><span class="line">            str.append(peekN(i));</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> String.valueOf(str);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> (top == -<span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ¤æ–­æ ˆæ˜¯å¦æ»¡äº†</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isFull</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> (top == maxSize-<span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//è½¬åŒ–æˆé€†æ³¢å…°è¡¨è¾¾å¼çš„ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InfixToSuffix</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> MyCharStack s1;<span class="comment">// å®šä¹‰è¿ç®—ç¬¦æ ˆ</span></span><br><span class="line">    <span class="keyword">private</span> MyCharStack s2;<span class="comment">// å®šä¹‰å­˜å‚¨ç»“æœæ ˆ</span></span><br><span class="line">    <span class="keyword">private</span> String input;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é»˜è®¤æ„é€ æ–¹æ³•ï¼Œå‚æ•°ä¸ºè¾“å…¥çš„ä¸­ç¼€è¡¨è¾¾å¼</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">InfixToSuffix</span><span class="params">(String in)</span> </span>{</span><br><span class="line">        input = in;</span><br><span class="line">        s1 = <span class="keyword">new</span> MyCharStack(input.length());</span><br><span class="line">        s2 = <span class="keyword">new</span> MyCharStack(input.length());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼ï¼Œå°†ç»“æœå­˜å‚¨åœ¨æ ˆä¸­è¿”å›ï¼Œé€†åºæ˜¾ç¤ºå³åç¼€è¡¨è¾¾å¼</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MyCharStack <span class="title">doTrans</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; input.length(); j++) {</span><br><span class="line">            <span class="comment">/*æ˜¾ç¤ºè½¬åŒ–çš„è¿‡ç¨‹</span></span><br><span class="line"><span class="comment">            System.out.print("s1æ ˆå…ƒç´ ä¸ºï¼š");</span></span><br><span class="line"><span class="comment">            s1.displayStack();</span></span><br><span class="line"><span class="comment">            System.out.print("s2æ ˆå…ƒç´ ä¸ºï¼š");</span></span><br><span class="line"><span class="comment">            s2.displayStack();</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">char</span> ch = input.charAt(j);</span><br><span class="line">            <span class="comment">//System.out.println("å½“å‰è§£æçš„å­—ç¬¦:" + ch);</span></span><br><span class="line">            <span class="keyword">switch</span> (ch) {</span><br><span class="line">                <span class="keyword">case</span> <span class="string">'+'</span>:</span><br><span class="line">                <span class="keyword">case</span> <span class="string">'-'</span>:</span><br><span class="line">                    gotOper(ch, <span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">'Ã—'</span>:</span><br><span class="line">                <span class="keyword">case</span> <span class="string">'Ã·'</span>:</span><br><span class="line">                    gotOper(ch, <span class="number">2</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">'('</span>:</span><br><span class="line">                    s1.push(ch);<span class="comment">// å¦‚æœå½“å‰å­—ç¬¦æ˜¯'(',åˆ™å°†å…¶å…¥æ ˆ</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">')'</span>:</span><br><span class="line">                    gotParen(ch);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    <span class="comment">// 1ã€å¦‚æœå½“å‰è§£æçš„å­—ç¬¦æ˜¯æ“ä½œæ•°ï¼Œåˆ™ç›´æ¥å‹å…¥s2</span></span><br><span class="line">                    s2.push(ch);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            }<span class="comment">// end switch</span></span><br><span class="line">        }<span class="comment">// end for</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!s1.isEmpty()) {</span><br><span class="line">            s2.push(s1.pop());</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> s2;</span><br><span class="line">    }</span><br><span class="line">ã€                                   </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">gotOper</span><span class="params">(<span class="keyword">char</span> opThis, <span class="keyword">int</span> prec1)</span> </span>{<span class="comment">//æ­£åœ¨è§£æçš„å­—ç¬¦å’Œå…¶ä¼˜å…ˆçº§</span></span><br><span class="line">        <span class="keyword">while</span> (!s1.isEmpty()) {</span><br><span class="line">            <span class="keyword">char</span> opTop = s1.pop();<span class="comment">//å°†è¿™ä¸ªè¿ç®—ç¬¦å’Œæ ˆé¡¶çš„è¿ç®—ç¬¦å‡†å¤‡è¿›è¡Œä¼˜å…ˆçº§è¿›è¡Œæ¯”è¾ƒ</span></span><br><span class="line">            <span class="keyword">if</span> (opTop == <span class="string">'('</span>) {<span class="comment">// å¦‚æœæ ˆé¡¶æ˜¯'(',ç›´æ¥å°†æ“ä½œç¬¦å‹å…¥s1</span></span><br><span class="line">                s1.push(opTop);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            } <span class="keyword">else</span> {<span class="comment">//ç®—å‡ºæ ˆé¡¶å…ƒç´ çš„ä¼˜å…ˆçº§</span></span><br><span class="line">                <span class="keyword">int</span> prec2;</span><br><span class="line">                <span class="keyword">if</span> (opTop == <span class="string">'+'</span> || opTop == <span class="string">'-'</span>) {</span><br><span class="line">                    prec2 = <span class="number">1</span>;</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                    prec2 = <span class="number">2</span></span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">if</span> (prec2 &lt; prec1) {<span class="comment">// å¦‚æœå½“å‰è¿ç®—ç¬¦æ¯”s1æ ˆé¡¶è¿ç®—ç¬¦ä¼˜å…ˆçº§é«˜ï¼Œåˆ™å°†è¿ç®—ç¬¦å‹å…¥s1</span></span><br><span class="line">                    s1.push(opTop);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                    <span class="comment">// å¦‚æœå½“å‰è¿ç®—ç¬¦ä¸æ ˆé¡¶è¿ç®—ç¬¦ç›¸åŒæˆ–è€…å°äºä¼˜å…ˆçº§åˆ«ï¼Œé‚£ä¹ˆå°†S1æ ˆé¡¶çš„è¿ç®—ç¬¦å¼¹å‡ºå¹¶å‹å…¥åˆ°S2ä¸­</span></span><br><span class="line">                    <span class="comment">// å¹¶ä¸”è¦å†æ¬¡å†æ¬¡è½¬åˆ°whileå¾ªç¯ä¸­ä¸ s1 ä¸­æ–°çš„æ ˆé¡¶è¿ç®—ç¬¦ç›¸æ¯”è¾ƒï¼›</span></span><br><span class="line">                    s2.push(opTop);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">        }<span class="comment">// end while</span></span><br><span class="line">        <span class="comment">// å¦‚æœs1ä¸ºç©ºï¼Œåˆ™ç›´æ¥å°†å½“å‰è§£æçš„è¿ç®—ç¬¦å‹å…¥s1</span></span><br><span class="line">        s1.push(opThis);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å½“å‰å­—ç¬¦æ˜¯ ')' æ—¶ï¼Œå¦‚æœæ ˆé¡¶æ˜¯'(',åˆ™å°†è¿™ä¸€å¯¹æ‹¬å·ä¸¢å¼ƒï¼Œå¦åˆ™ä¾æ¬¡å¼¹å‡ºs1æ ˆé¡¶çš„å­—ç¬¦ï¼Œå‹å…¥s2ï¼Œç›´åˆ°é‡åˆ°'('</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">gotParen</span><span class="params">(<span class="keyword">char</span> ch)</span> </span>{</span><br><span class="line">        <span class="keyword">while</span> (!s1.isEmpty()) {</span><br><span class="line">            <span class="keyword">char</span> chx = s1.pop();</span><br><span class="line">            <span class="keyword">if</span> (chx == <span class="string">'('</span>) {</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                s2.push(chx);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="åç¼€è¡¨è¾¾å¼çš„è®¡ç®—"><a href="#åç¼€è¡¨è¾¾å¼çš„è®¡ç®—" class="headerlink" title="åç¼€è¡¨è¾¾å¼çš„è®¡ç®—"></a>åç¼€è¡¨è¾¾å¼çš„è®¡ç®—</h2><p>æ–°å»ºä¸€ä¸ªè¡¨è¾¾å¼,å¦‚æœå½“å‰å­—ç¬¦ä¸ºå˜é‡æˆ–è€…ä¸ºæ•°å­—ï¼Œåˆ™å‹æ ˆï¼Œå¦‚æœæ˜¯è¿ç®—ç¬¦ï¼Œåˆ™å°†æ ˆé¡¶ä¸¤ä¸ªå…ƒç´ å¼¹å‡ºä½œç›¸åº”è¿ç®—ï¼Œç»“æœå†å…¥æ ˆï¼Œæœ€åå½“è¡¨è¾¾å¼æ‰«æå®Œåï¼Œæ ˆé‡Œçš„å°±æ˜¯ç»“æœã€‚</p><h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PostFix</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">evalPostFix</span><span class="params">(String token)</span> </span>{</span><br><span class="line">        Stack&lt;Double&gt; s = <span class="keyword">new</span> Stack&lt;Double&gt;();</span><br><span class="line">        <span class="keyword">double</span> a, b, result = <span class="number">0.0</span>;<span class="comment">//abæ˜¯è®¡ç®—è¿‡ç¨‹çš„ä¸­é—´å˜é‡ï¼Œresultæ˜¯å…¥æ ˆæ—¶çš„å˜é‡</span></span><br><span class="line">        <span class="keyword">boolean</span> isNumber;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; token.length() - <span class="number">1</span>; i++) {</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                isNumber = <span class="keyword">true</span>;</span><br><span class="line">                result = Double.parseDouble(token);<span class="comment">//è‹¥è¾“å…¥å­—ç¬¦ä¸æ˜¯æ•°å­—ï¼Œè‚¯å®šæŠ¥å¼‚å¸¸ï¼Œå³è®©å¸ƒå°”ç±»å‹ä¸ºfalse</span></span><br><span class="line">            } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">                isNumber = <span class="keyword">false</span>;</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (isNumber)<span class="comment">//å¦‚æœæ˜¯æ•°å­—ï¼Œé‚£ä¹ˆå°±å…¥æ ˆ</span></span><br><span class="line">                s.push(result);</span><br><span class="line">            <span class="keyword">else</span><span class="comment">//å¦‚æœæ˜¯è¿ç®—ç¬¦ï¼Œé‚£ä¹ˆå°±æ ˆé¡¶å‡ºä¸¤ä¸ªæ•°å­—ï¼Œè®¡ç®—åå†å…¥æ ˆ</span></span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">switch</span> (token.charAt(<span class="number">0</span>)) {</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">'+'</span>:</span><br><span class="line">                        a = s.pop();</span><br><span class="line">                        b = s.pop();</span><br><span class="line">                        s.push(b + a);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">'-'</span>:</span><br><span class="line">                        a = s.pop();</span><br><span class="line">                        b = s.pop();</span><br><span class="line">                        s.push(b - a);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">'Ã·'</span>:</span><br><span class="line">                        a = s.pop();</span><br><span class="line">                        b = s.pop();</span><br><span class="line">                        s.push(b / a);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">'Ã—'</span>:</span><br><span class="line">                        a = s.pop();</span><br><span class="line">                        b = s.pop();</span><br><span class="line">                        s.push(b * a);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }<span class="comment">//å½“å¾ªç¯ç»“æŸæ—¶ï¼Œæ ˆé‡Œåªå‰©ä¸‹ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">        <span class="keyword">return</span> s.peek();<span class="comment">//è¿”å›æ ˆé¡¶å…ƒç´ ï¼Œå¹¶ä¸åˆ é™¤</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å®Œæˆé€†æ³¢å…°è¡¨è¾¾å¼</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calculate</span><span class="params">(String is)</span> </span>{</span><br><span class="line">        <span class="comment">//åˆ›å»ºæ ˆ</span></span><br><span class="line">        String[] s = is.split(<span class="string">""</span>);</span><br><span class="line">        ArrayList&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Collections.addAll(list, s);</span><br><span class="line">        Stack&lt;String&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (String item : list) {</span><br><span class="line">        <span class="comment">//ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¦‚æœæ˜¯æ•°å­—</span></span><br><span class="line">            <span class="keyword">if</span> (item.matches(<span class="string">"\\d+"</span>)) {</span><br><span class="line"><span class="comment">//å…¥æ ˆ</span></span><br><span class="line">                stack.push(item);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line"><span class="comment">//popå‡ºä¸¤ä¸ªæ•°ï¼Œå¹¶è¿ç®—ï¼Œåœ¨å…¥æ ˆ</span></span><br><span class="line">                <span class="keyword">int</span> num2 = Integer.parseInt(stack.pop());</span><br><span class="line">                <span class="keyword">int</span> num1 = Integer.parseInt(stack.pop());</span><br><span class="line">                <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">if</span> (item.equals(<span class="string">"+"</span>)) {</span><br><span class="line">                    res = num1 + num2;</span><br><span class="line">                } <span class="keyword">else</span> <span class="keyword">if</span> (item.equals(<span class="string">"-"</span>)) {</span><br><span class="line">                    res = num1 - num2;</span><br><span class="line">                } <span class="keyword">else</span> <span class="keyword">if</span> (item.equals(<span class="string">"Ã—"</span>)) {</span><br><span class="line">                    res = num1 * num2;</span><br><span class="line">                } <span class="keyword">else</span> <span class="keyword">if</span> (item.equals(<span class="string">"Ã·"</span>)) {</span><br><span class="line">                    res = num1 / num2;</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŠŠç»“æœå‹å…¥æ ˆä¸­</span></span><br><span class="line">                stack.push(<span class="string">""</span> + res);</span><br><span class="line"></span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        }</span><br><span class="line"><span class="comment">//æœ€ååœç•™åœ¨stackä¸­çš„æ•°æ®æ˜¯è¿ç®—ç»“æœ</span></span><br><span class="line">        <span class="keyword">return</span> Integer.parseInt(stack.pop());</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ’åºç®—æ³•</title>
      <link href="/2021/06/02/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/"/>
      <url>/2021/06/02/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h1><p>å³å°†æ‰€éœ€æ’åºçš„æ•°ç»„åˆ†ä¸ºæœ‰åºå’Œæ— åºä¸¤ä¸ªéƒ¨åˆ†ä¸”æœ‰åºåŒºåœ¨å‰ã€‚æ¯æ¬¡ä»æ— åºåŒºä¸­å–å‡ºä¸€ä¸ªå…ƒç´ æ’åˆ°æœ‰åºåŒºçš„é€‚å½“ä½ç½®ã€‚</p><p>å¦‚æœéœ€è¦æ’åºçš„å…ƒç´ æ’å…¥æœ‰åºåŒºçš„ä¸­é—´ï¼Œåˆ™åœ¨æ’å…¥å…ƒç´ åæœ‰åºåŒºçš„æ¯ä¸€ä½å…ƒç´ åç§»ã€‚</p><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*æ³•ä¸€ï¼šäº¤æ¢å…ƒç´ å€¼*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InsertSort</span><span class="params">(<span class="keyword">int</span> *p,<span class="keyword">int</span> n)</span></span>{</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> temp;         <span class="comment">//ç”¨æ¥å­˜å‚¨ä¸‹ä¸€ä¸ªè¦æ’åºçš„å…ƒç´ </span></span><br><span class="line"><span class="keyword">int</span> sorted;       <span class="comment">//æœ‰åºåŒºçš„é•¿åº¦</span></span><br><span class="line"><span class="keyword">int</span> i,j;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(i = <span class="number">1</span> ; i &lt; n ; i++){<span class="comment">//ä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹æ’åº</span></span><br><span class="line">sorted = i<span class="number">-1</span>;        <span class="comment">//æœ‰åºåŒºä»å¤´åˆ°å°†è¦æ’åºçš„å…ƒç´ çš„å‰ä¸€ä¸ª</span></span><br><span class="line">temp = p[i];         </span><br><span class="line"><span class="keyword">while</span>(sorted &gt;= <span class="number">0</span> &amp;&amp; p[sorted] &gt; temp){     <span class="comment">//ä»åå‘å‰æ¯”è¾ƒï¼Œå°†æ¯”è¾ƒå’Œåç§»å·¥ä½œæ”¾åœ¨ä¸€ä¸ªwhileå¾ªç¯é‡Œï¼Œå› ä¸ºä¸æ¸…æ¥šå¾ªç¯æ¬¡æ•°æ‰€ä»¥ä½¿ç”¨whileå¾ªç¯</span></span><br><span class="line">p[sorted+<span class="number">1</span>] = p[sorted];                <span class="comment">//ä»è¦æ’åºçš„å…ƒç´ å¼€å§‹ï¼Œå‰ä¸€ä¸ªå…ƒç´ å‘åç§»</span></span><br><span class="line">sorted--;</span><br><span class="line">}</span><br><span class="line">p[sorted+<span class="number">1</span>] = temp;                         <span class="comment">//whileå¾ªç¯ç»“æŸå³è¦æ’åºçš„å…ƒç´ åº”åœ¨çš„ä½ç½®</span></span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*æ³•äºŒï¼šäº¤æ¢å…ƒç´ åœ°å€*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InsertSort</span><span class="params">(<span class="keyword">int</span> *p,<span class="keyword">int</span> n)</span></span>{</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> temp;</span><br><span class="line"><span class="keyword">int</span> sorted;</span><br><span class="line"><span class="keyword">int</span> i,j;</span><br><span class="line"><span class="keyword">int</span> *s = p,*e = p+n<span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>( ; s &lt; e ; s++){</span><br><span class="line">sorted = s-p<span class="number">-1</span>;</span><br><span class="line">temp = *s;</span><br><span class="line"><span class="keyword">while</span>(sorted &gt;= <span class="number">0</span> &amp;&amp; *(p+sorted) &gt; temp){</span><br><span class="line">*(p+sorted+<span class="number">1</span>) = *(p+sorted);</span><br><span class="line">sorted--;</span><br><span class="line">}</span><br><span class="line">*(p+sorted+<span class="number">1</span>) = temp;</span><br><span class="line">}</span><br><span class="line">} </span><br></pre></td></tr></tbody></table></figure><img src="https://ftp.bmp.ovh/imgs/2021/06/fd95b517223f9fc2.png" style="zoom:50%;"><h1 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h1><p>å½’å¹¶æ’åºæ˜¯åˆ©ç”¨é€’å½’ä¸æ–­å°†æ•°ç»„åˆ†æˆä¸¤ä»½ç›´åˆ°åˆ†æˆæ¯ä¸ªæ•°ç»„ä¸€ä¸ªå…ƒç´ ã€‚ç„¶åå°†åˆ†å¥½çš„æœ‰åºå°æ•°ç»„ä¸¤ä¸¤æ¯”è¾ƒè¿›è¡Œåˆå¹¶ã€‚</p><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> arr[],<span class="keyword">int</span> temp[],<span class="keyword">int</span> left,<span class="keyword">int</span> mid,<span class="keyword">int</span> right)</span></span>{</span><br><span class="line"><span class="keyword">int</span> l_pos = left; <span class="comment">//ç”¨æ¥å­˜å‚¨å½’å¹¶çš„ä¸¤ä¸ªæ•°ç»„ä¸­å·¦åŠéƒ¨åˆ†çš„é¦–å…ƒç´ </span></span><br><span class="line"><span class="keyword">int</span> r_pos = mid+<span class="number">1</span>;<span class="comment">//ç”¨æ¥å­˜å‚¨å½’å¹¶çš„ä¸¤ä¸ªæ•°ç»„ä¸­å³åŠéƒ¨åˆ†çš„é¦–å…ƒç´ </span></span><br><span class="line"><span class="keyword">int</span> pos = left;<span class="comment">//ç”¨æ¥å­˜å‚¨å·²ç»æ’åºå¥½çš„å…ƒç´ ä½ç½®</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(l_pos &lt;= mid &amp;&amp; r_pos &lt;= right){<span class="comment">//å½“ä¸¤ä¸ªæ•°ç»„ä¸­æœ‰å‰©ä½™å…ƒç´ æ—¶</span></span><br><span class="line"><span class="keyword">if</span>(arr[l_pos] &lt; arr[r_pos]){<span class="comment">//å°†ä¸¤ä¸ªæœ‰åºæ•°ç»„åˆå¹¶</span></span><br><span class="line">temp[pos++] = arr[l_pos++];</span><br><span class="line">}<span class="keyword">else</span>{</span><br><span class="line">temp[pos++] = arr[r_pos++];</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(l_pos &lt;= mid){<span class="comment">//å¦‚æœåªæœ‰å·¦æ•°ç»„æœ‰å‰©ä½™å…ƒç´ åˆ™ç›´æ¥å¡«å……</span></span><br><span class="line">temp[pos++] = arr[l_pos++];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(r_pos &lt;= right){<span class="comment">//å¦‚æœåªæœ‰å³æ•°ç»„æœ‰å‰©ä½™å…ƒç´ åˆ™ç›´æ¥å¡«å……</span></span><br><span class="line">temp[pos++] = arr[r_pos++];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(left &lt;= right){<span class="comment">//å°†å½’å¹¶çš„è¿™ä¸€éƒ¨åˆ†å¤åˆ¶åˆ°å…ƒç´ ç»„ä¸­</span></span><br><span class="line">arr[left] = temp[left];</span><br><span class="line">left++; </span><br><span class="line">} </span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mergeSort</span><span class="params">(<span class="keyword">int</span> arr[],<span class="keyword">int</span> temp[],<span class="keyword">int</span> left,<span class="keyword">int</span> right)</span></span>{</span><br><span class="line"><span class="keyword">if</span>(left &lt; right){<span class="comment">//å¦‚æœæ²¡æœ‰åˆ’åˆ†æˆåªå‰©ä¸€ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œå°±ç»§ç»­è¿›è¡Œé€’å½’åˆ’åˆ†</span></span><br><span class="line"><span class="keyword">int</span> mid = (left+right) / <span class="number">2</span>;<span class="comment">//è®¾ç½®ä¸­é—´å€¼</span></span><br><span class="line">mergeSort(arr,temp,left,mid);<span class="comment">//åˆ†åˆ«åˆ’åˆ†å·¦åŠéƒ¨åˆ†</span></span><br><span class="line">        mergeSort(arr,temp,mid+<span class="number">1</span>,right);<span class="comment">//å’Œå³åŠéƒ¨åˆ†</span></span><br><span class="line">merge(arr,temp,left,mid,right); <span class="comment">//å¯¹åˆ’åˆ†å¥½çš„æ•°ç»„è¿›è¡Œåˆå¹¶</span></span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">showArr</span><span class="params">(<span class="keyword">int</span> arr[],<span class="keyword">int</span> n)</span></span>{<span class="comment">//æ‰“å°æ•°ç»„</span></span><br><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="keyword">for</span>(i = <span class="number">0</span> ; i &lt; n ; i++){</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d"</span>,arr[i]);</span><br><span class="line">}</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> arr[] = {<span class="number">5</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">3</span>};</span><br><span class="line"><span class="keyword">int</span> n = <span class="number">9</span>;</span><br><span class="line"><span class="keyword">int</span> *temp = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>));<span class="comment">//åˆ†é…æš‚æ—¶å­˜å‚¨çš„æ•°ç»„</span></span><br><span class="line">showArr(arr,n);</span><br><span class="line"><span class="keyword">if</span>(temp){</span><br><span class="line">mergeSort(arr,temp,<span class="number">0</span>,n<span class="number">-1</span>);<span class="comment">//å¦‚æœæˆåŠŸåˆ†é…åˆ™è¿›è¡Œæ’åº</span></span><br><span class="line">}<span class="keyword">else</span>{</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"ERROR!"</span>);</span><br><span class="line">}</span><br><span class="line">showArr(arr,n);</span><br><span class="line"></span><br><span class="line">} </span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­—ç¬¦ä¸²åŒ¹é…KMPç®—æ³•</title>
      <link href="/2021/06/02/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8C%B9%E9%85%8DKMP%E7%AE%97%E6%B3%95/"/>
      <url>/2021/06/02/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8C%B9%E9%85%8DKMP%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•"><a href="#å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•" class="headerlink" title="å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•"></a>å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•</h1><p>ç»™å®šä¸€è¡Œå­—ç¬¦ä¸²æ–‡æœ¬ä¸ºä¸»ä¸²ï¼Œå¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸ºæ¨¡å¼ä¸²ï¼Œåœ¨ä¸»ä¸²ä¸­æŸ¥æ‰¾æ¨¡å¼ä¸²é¦–æ¬¡å‡ºç°çš„ä½ç½®ï¼Œå¹¶è¿”å›å…¶ä½ç½®ä¸‹æ ‡ã€‚</p><h2 id="è›®åŠ›æ³•ï¼ˆBFï¼‰"><a href="#è›®åŠ›æ³•ï¼ˆBFï¼‰" class="headerlink" title="è›®åŠ›æ³•ï¼ˆBFï¼‰"></a>è›®åŠ›æ³•ï¼ˆBFï¼‰</h2><p>å³ä¾æ¬¡æ¯”è¾ƒä¸»ä¸²å’Œæ¨¡å¼ä¸²çš„æ¯ä¸€ä¸ªå­—æ¯ï¼Œç¢°è§ä¸åŒ¹é…çš„å­—æ¯æ—¶ï¼Œä¸»ä¸²å’Œæ¨¡å¼ä¸²ä»å¤´å³ç§»ä¸€ä½é‡æ–°åŒ¹é…ï¼Œç›´è‡³æˆåŠŸæˆ–éå†å®Œæˆã€‚</p><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ³•ä¸€ï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">BF</span><span class="params">(<span class="keyword">char</span> S[],<span class="keyword">char</span> T[])</span></span>{</span><br><span class="line"><span class="keyword">int</span> i,k,m;</span><br><span class="line"><span class="keyword">int</span> j = <span class="built_in">strlen</span>(T);</span><br><span class="line"><span class="keyword">for</span>( i = <span class="number">0</span> ; i &lt; <span class="built_in">strlen</span>(S) - j ; i++ ){</span><br><span class="line">k = i ; </span><br><span class="line">m = <span class="number">0</span> ;</span><br><span class="line"><span class="keyword">while</span>(k &lt;= i + j){</span><br><span class="line"><span class="keyword">if</span>( S[k++] != T[m++] )</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">if</span>( k == i+j ){</span><br><span class="line"><span class="keyword">return</span> i + <span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"error!"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">//æ³•äºŒï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">BF</span><span class="params">(<span class="keyword">char</span> T[],<span class="keyword">char</span> S[])</span></span>{</span><br><span class="line"><span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> i = <span class="number">0</span> , j = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(S[i] != <span class="string">'\0'</span> &amp;&amp; T[j] != <span class="string">'\0'</span>){</span><br><span class="line"><span class="keyword">if</span>(S[i] == T[j]){</span><br><span class="line">i++;</span><br><span class="line">j++;</span><br><span class="line">}<span class="keyword">else</span>{</span><br><span class="line">j = <span class="number">0</span>;</span><br><span class="line">index++;</span><br><span class="line">i = index; </span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"><span class="keyword">if</span>(T[j] == <span class="string">'\0'</span>)</span><br><span class="line"><span class="keyword">return</span> index+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="æ±‚å­—ç¬¦ä¸²ç›¸ç­‰æœ€å¤§çœŸå‰åç¼€"><a href="#æ±‚å­—ç¬¦ä¸²ç›¸ç­‰æœ€å¤§çœŸå‰åç¼€" class="headerlink" title="æ±‚å­—ç¬¦ä¸²ç›¸ç­‰æœ€å¤§çœŸå‰åç¼€"></a>æ±‚å­—ç¬¦ä¸²ç›¸ç­‰æœ€å¤§çœŸå‰åç¼€</h2><p>å­—ç¬¦ä¸²çš„çœŸå‰/åç¼€æŒ‡ä¸åŒ…æ‹¬å­—ç¬¦ä¸²è‡ªèº«çš„å‰ç¼€/åç¼€ã€‚ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç¼–å†™å‡½æ•°ï¼Œæ±‚è§£å­—ç¬¦ä¸²Tæ‰€æœ‰å‰ç¼€å­ä¸²ï¼ˆåŒ…æ‹¬è‡ªå·±ï¼‰çš„æœ€å¤§ç›¸ç­‰çœŸå‰åç¼€çš„é•¿åº¦ï¼Œå¹¶å­˜å…¥nextæ•°ç»„ä¸­ã€‚</p><h3 id="è›®åŠ›æ³•"><a href="#è›®åŠ›æ³•" class="headerlink" title="è›®åŠ›æ³•"></a>è›®åŠ›æ³•</h3><p>ä»é•¿åº¦ä¸º1å¼€å§‹åˆ¤æ–­ï¼Œé•¿åº¦ä¸º1æ—¶è¾“å‡º0ï¼›é•¿åº¦ä¸ºnï¼ˆn&gt;=2ï¼‰ï¼Œåˆ¤æ–­å‰n-1ä¸ªå­—ç¬¦å’Œån-1ä¸ªå­—ç¬¦æ˜¯å¦ç›¸åŒï¼Œè‹¥ä¸ç›¸åŒåˆ™å‡å°æ¯”è¾ƒçš„é•¿åº¦ã€‚çŸ¥é“æ‰¾å‡ºç›¸ç­‰çœŸå‰åç¼€ä¸ºæ­¢ã€‚</p><img src="https://ftp.bmp.ovh/imgs/2021/06/dde53e3bd256248f.png" style="zoom:33%;"><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MaxAffixLength</span><span class="params">(<span class="keyword">char</span> T[],<span class="keyword">int</span> next[],<span class="keyword">int</span> length)</span></span>{</span><br><span class="line"><span class="keyword">int</span> i,j,len;</span><br><span class="line"><span class="built_in">memset</span>(next,<span class="number">0</span>,length*<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line"><span class="keyword">for</span>( i = <span class="number">1</span> ; T[i] != <span class="string">'\0'</span> ; i++ ){<span class="comment">//è®¡ç®—[0,i]çš„æœ€å¤§çœŸå‰åç¼€çš„é•¿åº¦ </span></span><br><span class="line"><span class="keyword">for</span>( len = i<span class="number">-1</span> ; len &gt;= <span class="number">1</span> ; len-- ){</span><br><span class="line"><span class="keyword">for</span>( j = <span class="number">0</span> ; j &lt; len ; j++ ){ <span class="comment">//æ¯”è¾ƒ[0,len-1]å’Œ[i-len+1,i] </span></span><br><span class="line"><span class="keyword">if</span>( T[j] != T[i-len+j+<span class="number">1</span>] )  <span class="keyword">break</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">if</span>( j == len ){</span><br><span class="line">next[i] = len;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">} </span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="æ ¹æ®å·²æ±‚æ±‚ä¸‹ä¸€ä¸ª"><a href="#æ ¹æ®å·²æ±‚æ±‚ä¸‹ä¸€ä¸ª" class="headerlink" title="æ ¹æ®å·²æ±‚æ±‚ä¸‹ä¸€ä¸ª"></a>æ ¹æ®å·²æ±‚æ±‚ä¸‹ä¸€ä¸ª</h3><img src="https://ftp.bmp.ovh/imgs/2021/06/64b47a8e33b37c56.png" style="zoom:40%;"><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PMT</span><span class="params">(<span class="keyword">char</span> T[],<span class="keyword">int</span> next[])</span></span>{</span><br><span class="line"><span class="keyword">int</span> i ,j ;</span><br><span class="line"><span class="built_in">memset</span>(next,<span class="number">0</span>,NUM*<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">next[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(T[<span class="number">0</span>] == T[<span class="number">1</span>]){</span><br><span class="line">next[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">}<span class="keyword">else</span>{</span><br><span class="line">next[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>( i = <span class="number">2</span> ; T[i] != <span class="string">'\0'</span> ; i++ ){  <span class="comment">//è®¡ç®—ã€0ï¼Œiã€‘çš„æœ€å¤§çœŸå‰åç¼€çš„é•¿åº¦ </span></span><br><span class="line">j = i;</span><br><span class="line"><span class="keyword">while</span>( j != <span class="number">0</span> ){</span><br><span class="line"><span class="keyword">if</span>( T[i] == T[next[j<span class="number">-1</span>]] ){</span><br><span class="line">next[i] = next[j<span class="number">-1</span>] + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">}<span class="keyword">else</span>{</span><br><span class="line">j = next[j<span class="number">-1</span>];</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="KMPç®—æ³•"><a href="#KMPç®—æ³•" class="headerlink" title="KMPç®—æ³•"></a>KMPç®—æ³•</h2><p>æœ‰æ•ˆåˆ©ç”¨å·²åŒ¹é…çš„å‰ç¼€ï¼Œå‡å°‘æŒ‡é’ˆå›æº¯ã€‚</p><p>æ•´ä½“æ€è·¯ï¼šåœ¨å·²åŒ¹é…çš„å‰ç¼€å½“ä¸­å¯»æ‰¾åˆ°æœ€é•¿å¯åŒ¹é…åç¼€å­ä¸²å’Œæœ€é•¿å¯åŒ¹é…å‰ç¼€å­ä¸²ï¼Œåœ¨ä¸‹ä¸€è½®ä¸­ç›´æ¥æŠŠä¸¤è€…å¯¹é½ï¼Œä»è€Œå®ç°æ¨¡å¼ä¸²çš„å¿«é€Ÿç§»åŠ¨ã€‚</p><img src="https://ftp.bmp.ovh/imgs/2021/06/aa039bb509dc3ba5.png" style="zoom:80%;"><p>â€‹                                                                                                                                                                ï¼ˆå›¾æºçŸ¥ä¹ï¼‰</p><p>nextæ•°ç»„æ˜¯æˆ‘ä»¬ä¸Šé¢æ±‚çš„æœ€å¤§çœŸå‰åç¼€æ•°ç»„è¿›è¡Œå¤„ç†åå¾—åˆ°çš„ã€‚</p><p>å¤„ç†ï¼šå°†æ¯ä¸€ä½çš„æœ€å¤§çœŸå‰åç¼€å­—ç¬¦æ•°å‘åç§»ä¸€æ ¼ã€‚</p><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// KMPç®—æ³•ä¸»ä½“é€»è¾‘ã€‚stræ˜¯ä¸»ä¸²ï¼Œpatternæ˜¯æ¨¡å¼ä¸²</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">kmp</span><span class="params">(<span class="keyword">char</span> S[],<span class="keyword">char</span> T[],<span class="keyword">int</span> next[])</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> j = <span class="number">0</span>;<span class="comment">//ä¸»å¾ªç¯ï¼Œéå†ä¸»ä¸²å­—ç¬¦</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">strlen</span>(S); i++) </span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">while</span> (j &gt; <span class="number">0</span> &amp;&amp; S[i] != T[j]) </span><br><span class="line">        {</span><br><span class="line">            j = next[j];<span class="comment">//é‡åˆ°åå­—ç¬¦æ—¶ï¼ŒæŸ¥è¯¢nextæ•°ç»„å¹¶æ”¹å˜æ¨¡å¼ä¸²çš„èµ·ç‚¹ç»§ç»­ä¸ä¸»ä¸²è¿›è¡ŒåŒ¹é…ï¼Œç›´åˆ°ç§»åˆ°å­ä¸²èµ·å§‹å­—ç¬¦ä¸æˆåŠŸï¼Œåˆ™ä¸»ä¸²ç»§ç»­ç§»åŠ¨è¿›è¡ŒåŒ¹é… </span></span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (S[i] == T[j]) {</span><br><span class="line">            j++;</span><br><span class="line">        }<span class="keyword">if</span> (j == <span class="built_in">strlen</span>(T)) {<span class="comment">//åŒ¹é…æˆåŠŸï¼Œè¿”å›ä¸‹æ ‡</span></span><br><span class="line">            <span class="keyword">return</span> i - <span class="built_in">strlen</span>(T) + <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›æº¯å’Œé€’å½’ç®—æ³•æ€»ç»“</title>
      <link href="/2021/05/30/%E5%9B%9E%E6%BA%AF%E5%92%8C%E9%80%92%E5%BD%92%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93/"/>
      <url>/2021/05/30/%E5%9B%9E%E6%BA%AF%E5%92%8C%E9%80%92%E5%BD%92%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<h1 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h1><h2 id="åˆ†ä¹¦é—®é¢˜"><a href="#åˆ†ä¹¦é—®é¢˜" class="headerlink" title="åˆ†ä¹¦é—®é¢˜"></a>åˆ†ä¹¦é—®é¢˜</h2><img src="https://ftp.bmp.ovh/imgs/2021/06/9d4613e7aa04fd0d.png" style="zoom:33%;"><h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>(1) å®šä¹‰ä¸€ä¸ªæ•´å‹çš„äºŒç»´æ•°ç»„ï¼Œå°†è¡¨ä¸­çš„<strong>é˜…è¯»å–œå¥½</strong>ç”¨åˆå§‹åŒ–æ–¹æ³•èµ‹ç»™è¿™ä¸ªäºŒç»´æ•°ç»„ã€‚å¯å®šä¹‰ï¼š</p><p>int like[5][5] = { {0,0,1,1,0}, {1,1,0,0,1}, {0,1,1,0,1}, {0,0,0,1,0}, {0,1,0,0,1} }; </p><p>(2) å®šä¹‰ä¸€ä¸ªæ•´å‹ä¸€ç»´æ•°ç»„book[5]ï¼Œç”¨æ¥<strong>è®°å½•ä¹¦æ˜¯å¦å·²è¢«é€‰ç”¨</strong>ã€‚ç”¨ä¸‹æ ‡ä½œä¸º5æœ¬ä¹¦çš„ç¼–å·ï¼Œè¢«é€‰è¿‡å…ƒç´ å€¼ä¸º1ï¼Œæœªè¢«é€‰è¿‡å…ƒç´ å€¼ä¸º0ï¼Œåˆå§‹åŒ–çš†ä¸º0ã€‚</p><p>int book[5] = {0,0,0,0,0};</p><p>(3) ç”»å‡ºæ€è·¯å›¾ã€‚</p><p>â‘  å®šä¹‰è¯•ç€ç»™ç¬¬iäººåˆ†ä¹¦çš„å‡½æ•°Try(i)ï¼Œi = 0,1,2,3,4ã€‚</p><p>â‘¡ è¯•ç€ç»™ç¬¬iä¸ªäººåˆ†ä¹¦ï¼Œå…ˆè¯•åˆ†0å·ä¹¦ï¼Œå†åˆ†1å·ä¹¦ï¼Œåˆ†2å·ä¹¦ï¼Œâ€¦â€¦ï¼Œå› æ­¤æœ‰ä¸€ä¸ªä¸ç»“ç‚¹ï¼Œè®©jè¡¨ç¤ºä¹¦ï¼Œj=0ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ4ã€‚</p><p>â‘¢æ¡ä»¶cæ˜¯ç”±ä¸¤éƒ¨åˆ†â€œä¸â€èµ·æ¥çš„ï¼Œâ€œç¬¬iä¸ªäººå–œæ¬¢jä¹¦ï¼Œä¸”jä¹¦å°šæœªè¢«åˆ†èµ°â€ã€‚æ»¡è¶³è¿™ä¸ªæ¡ä»¶æ˜¯iäººèƒ½å¤Ÿå¾—åˆ°jä¹¦çš„æ¡ä»¶ã€‚ </p><p>â‘£ å¦‚æœä¸æ»¡è¶³cæ¡ä»¶ï¼Œåˆ™ä»€ä¹ˆä¹Ÿä¸åšï¼Œè¿™æ˜¯ç›´æ¥å¯è§£ç»“ç‚¹ã€‚ã€</p><p>â‘¤ æ»¡è¶³cæ¡ä»¶ï¼Œåšä¸‰ä»¶äº‹ï¼š<br>      ç¬¬ä¸€ä»¶äº‹ï¼šå°†jä¹¦åˆ†ç»™iï¼Œç”¨ä¸€ä¸ªæ•°ç»„take[i]=j,è®°ä½ä¹¦jç»™äº†iï¼ŒåŒæ—¶è®°å½•jä¹¦å·²è¢«é€‰ç”¨ï¼Œbook[j]=1.<br>      ç¬¬äºŒä»¶äº‹ï¼šæŸ¥çœ‹iæ˜¯å¦ä¸º4ï¼Œå¦‚æœä¸ä¸º4ï¼Œè¡¨ç¤ºå°šæœªå°†æ‰€æœ‰5ä¸ªäººæ‰€è¦çš„ä¹¦åˆ†å®Œï¼Œè¿™æ—¶åº”é€’å½’å†è¯•ä¸‹ä¸€ä¸ªäººï¼Œå³Try(i+1)ã€‚è‹¥æœi==4ï¼Œåˆ™åº”å…ˆä½¿æ–¹æ¡ˆæ•°n=n+1ï¼Œç„¶åè¾“å‡ºç¬¬nä¸ªæ–¹æ¡ˆä¸‹çš„æ¯ä¸ªäººæ‰€å¾—ä¹‹ä¹¦ã€‚<br>      ç¬¬ä¸‰ä»¶äº‹ï¼šå›æº¯ã€‚è®©ç¬¬iäººé€€å›jä¹¦ï¼Œæ¢å¤jä¹¦å°šæœªè¢«é€‰çš„æ ‡å¿—ï¼Œå³book[j]=0.è¿™æ˜¯åœ¨å·²è¾“å‡ºç¬¬nä¸ªæ–¹æ¡ˆä¹‹åï¼Œå»å¯»æ‰¾ä¸‹ä¸€ä¸ªåˆ†ä¹¦æ–¹æ¡ˆæ‰€å¿…éœ€çš„ã€‚</p><img src="https://ftp.bmp.ovh/imgs/2021/06/11064001369b467f.png" style="zoom:33%;"><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> like[<span class="number">5</span>][<span class="number">5</span>] = { {<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>}, {<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>}, {<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>}, {<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>}, {<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>} }; <span class="comment">//è¡¨ç¤ºä¹¦çš„å–œå¥½æƒ…å†µ </span></span><br><span class="line"><span class="keyword">int</span> book[<span class="number">5</span>] = {<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>};  <span class="comment">//è¡¨ç¤ºä¹¦æ˜¯å¦åˆ†èµ° </span></span><br><span class="line"><span class="keyword">int</span> take[<span class="number">5</span>] = {<span class="number">0</span>};  <span class="comment">//è¡¨ç¤ºåˆ†ä¹¦æƒ…å†µ </span></span><br><span class="line"><span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Try</span><span class="params">(<span class="keyword">int</span> i)</span></span>{</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> j,k;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(j = <span class="number">0</span> ; j &lt; <span class="number">5</span> ; j++){ <span class="comment">//è¡¨ç¤ºä¹¦å· </span></span><br><span class="line"><span class="keyword">if</span>(like[i][j] == <span class="number">1</span> &amp;&amp; book[j] == <span class="number">0</span>){<span class="comment">//è¿™äººå–œæ¬¢è¿™ä¹¦ä¸”ä¹¦è¿˜æ²¡è¢«åˆ†èµ° </span></span><br><span class="line">take[i] = j;<span class="comment">//è®°å½•è¯¥äººæ‹¿èµ°è¯¥ä¹¦</span></span><br><span class="line">book[j] = <span class="number">1</span>;<span class="comment">//è®°å½•è¯¥ä¹¦å·²è¢«åˆ†èµ° </span></span><br><span class="line"><span class="keyword">if</span>(i == <span class="number">4</span>){ <span class="comment">//æ‰€æœ‰äººéƒ½åˆ†å¥½ä¹¦</span></span><br><span class="line">n++;<span class="comment">//æ–¹æ¡ˆæ•°å¢åŠ ï¼Œå‡†å¤‡æ‰“å°åˆ†æ•°æ–¹æ¡ˆ</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"==========ç¬¬%dä¸ªæ–¹æ¡ˆæ˜¯==========\n"</span>,n);</span><br><span class="line"><span class="keyword">for</span>(k = <span class="number">0</span> ; k &lt; <span class="number">5</span> ; k++){</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"ç¬¬%dä¸ªäººæ‹¿çš„ç¬¬%dæœ¬ä¹¦\n"</span>,k+<span class="number">1</span>,take[k]+<span class="number">1</span>); </span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"><span class="keyword">else</span>{<span class="comment">//ä¹¦è¿˜æ²¡åˆ†å®Œ </span></span><br><span class="line">Try(i+<span class="number">1</span>);<span class="comment">//æ»¡è¶³è¿™ä¸ªäººçš„éœ€æ±‚åï¼Œç»§ç»­å°è¯•åˆ†åè¾¹çš„ä¹¦ </span></span><br><span class="line">}</span><br><span class="line">book[j] = <span class="number">0</span>;<span class="comment">//å›æº¯æ—¶å°†ä¹¦é€€å›</span></span><br><span class="line">}<span class="comment">//å¦‚æœæ²¡æœ‰æ‰¾åˆ°å°±ç»§ç»­å°è¯•ä¸‹ä¸€æœ¬ä¹¦ </span></span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line"></span><br><span class="line">Try(<span class="number">0</span>);</span><br><span class="line">} </span><br></pre></td></tr></tbody></table></figure><h2 id="å…«çš‡åé—®é¢˜"><a href="#å…«çš‡åé—®é¢˜" class="headerlink" title="å…«çš‡åé—®é¢˜"></a>å…«çš‡åé—®é¢˜</h2><h3 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>å°†æ•´ä¸ªé—®é¢˜æ‹†è§£æˆå‡ ä¸ªå°é—®é¢˜ï¼Œåˆ†æ­¥è§£å†³ã€‚</p><p>1.åˆ¤æ–­æ˜¯å¦å¯ä»¥æ”¾ä¸‹çš‡åæ£‹å­ï¼ˆåŒè¡ŒåŒåˆ—åŒå¯¹è§’çº¿ä¸Šè¿˜æ²¡æœ‰æ£‹å­ï¼‰</p><p>2.tryå‡½æ•°ç”¨æ¥å®ç°é€’å½’å’Œå›æº¯</p><p>3.æ‰“å°ç»“æœ</p><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ³•ä¸€</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> place[<span class="number">8</span>] = {<span class="number">0</span>};<span class="comment">//çš‡åæ”¾ç½®çš„ä½ç½®</span></span><br><span class="line"><span class="keyword">int</span> snum = <span class="number">0</span>;<span class="comment">//æ–¹æ³•æ€»æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">showResult</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">canPlace</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">try</span><span class="params">(<span class="keyword">int</span> i)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">showResult</span><span class="params">()</span></span>{</span><br><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"===ç¬¬%dä¸ªæ–¹æ¡ˆ\n"</span>,++snum);</span><br><span class="line"><span class="keyword">for</span>( i = <span class="number">0</span> ; i &lt; <span class="number">8</span> ; i++ ){</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"ç¬¬%dè¡Œçš„çš‡åæ”¾ç½®åœ¨ç¬¬%dåˆ—\n"</span>,i,place[i]);</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">canPlace</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span>{</span><br><span class="line"><span class="keyword">int</span> k;</span><br><span class="line"><span class="keyword">for</span>(k = <span class="number">0</span> ; k &lt; <span class="number">8</span> ; k++ ){</span><br><span class="line"><span class="keyword">if</span>(place[k] == j || <span class="built_in">abs</span>(place[k] - j ) == <span class="built_in">abs</span>(k - i))</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">try</span><span class="params">(<span class="keyword">int</span> i)</span></span>{</span><br><span class="line"><span class="keyword">int</span> j;</span><br><span class="line"><span class="keyword">if</span>(i == <span class="number">7</span>){</span><br><span class="line">showResult();</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">for</span>(j = <span class="number">0</span> ; j &lt; <span class="number">8</span> ; j++ ){</span><br><span class="line"><span class="keyword">if</span>(canPlace(i,j)){ </span><br><span class="line">place[i] = j;</span><br><span class="line"><span class="keyword">try</span>(i+<span class="number">1</span>);</span><br><span class="line">place[i] = <span class="number">0</span>;</span><br><span class="line">} </span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line"><span class="keyword">try</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç›¸å¯¹äºæ³•ä¸€ï¼Œæ³•äºŒä½¿ç”¨çš„äºŒç»´æ•°ç»„æ›´åŠ ç›´è§‚</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> chessboard[<span class="number">8</span>][<span class="number">8</span>] = {<span class="number">0</span>};<span class="comment">//æ£‹ç›˜çš„ä½ç½®æ˜¯å¦æœ‰å…ƒç´  </span></span><br><span class="line"><span class="keyword">int</span> snum = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">isDanger</span><span class="params">(<span class="keyword">int</span> row,<span class="keyword">int</span> col)</span></span>{ </span><br><span class="line"><span class="keyword">int</span> i,j;</span><br><span class="line"><span class="keyword">for</span>( i = <span class="number">0</span> ; i &lt; <span class="number">8</span> ; i++ ){<span class="comment">//row</span></span><br><span class="line"><span class="keyword">if</span>(chessboard[row][i] == <span class="number">1</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">for</span>( i = <span class="number">0</span> ; i &lt; <span class="number">8</span> ; i++ ){<span class="comment">//column</span></span><br><span class="line"><span class="keyword">if</span>(chessboard[i][col] == <span class="number">1</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">for</span>( i = <span class="number">0</span> ; i &lt; <span class="number">8</span> ; i++ ){</span><br><span class="line"><span class="keyword">for</span>( j = <span class="number">0</span> ; j &lt; <span class="number">8</span> ; j++ ){</span><br><span class="line"><span class="keyword">if</span>( chessboard[i][j] == <span class="number">1</span> &amp;&amp; <span class="built_in">abs</span>(i-row) == <span class="built_in">abs</span>(j-col) )</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printResult</span><span class="params">()</span></span>{</span><br><span class="line"><span class="keyword">int</span> i,j;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"====ç¬¬%dä¸ªæ–¹æ¡ˆ====\n"</span>,++snum);</span><br><span class="line"><span class="keyword">for</span>( i = <span class="number">0</span> ; i &lt; <span class="number">8</span> ; i++ ){</span><br><span class="line"><span class="keyword">for</span>( j = <span class="number">0</span> ; j &lt; <span class="number">8</span> ; j++ ){</span><br><span class="line"><span class="keyword">if</span>( chessboard[i][j] == <span class="number">1</span> )</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"chessboard[%d][%d]\n"</span>,i,j);</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">eightQueen</span><span class="params">(<span class="keyword">int</span> row)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"><span class="keyword">int</span> col;</span><br><span class="line"><span class="keyword">if</span>( row &gt; <span class="number">7</span> ){</span><br><span class="line">printResult();</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">for</span>( col = <span class="number">0</span> ; col &lt; <span class="number">8</span> ; col++ ){</span><br><span class="line"><span class="keyword">if</span>(isDanger(row,col)){</span><br><span class="line">chessboard[row][col] = <span class="number">1</span>;</span><br><span class="line">eightQueen( row + <span class="number">1</span> );</span><br><span class="line">chessboard[row][col] = <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line"></span><br><span class="line">eightQueen(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="èƒŒåŒ…é—®é¢˜"><a href="#èƒŒåŒ…é—®é¢˜" class="headerlink" title="èƒŒåŒ…é—®é¢˜"></a>èƒŒåŒ…é—®é¢˜</h2><h3 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>æ¯ä¸ªç‰©å“æœ‰ä¸¤ç§çŠ¶æ€åŠæ”¾å…¥å’Œæœªæ”¾å…¥ã€‚æˆ‘ä»¬å‡è®¾é™¤æœ€åä¸€ä¸ªä»¥å¤–çš„å‰é¢å·²ç»æ˜¯æœ€ä¼˜è§£ï¼Œå†æ‰¾å‡ºæœ€åä¸€ä¸ªçš„æœ€ä¼˜è§£å³å¯ã€‚</p><img src="https://ftp.bmp.ovh/imgs/2021/06/25f4115791e1d802.png" style="zoom:33%;"><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> weight[<span class="number">5</span>] = {<span class="number">2</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">4</span>};</span><br><span class="line"><span class="keyword">int</span> value[<span class="number">5</span>] = {<span class="number">6</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">6</span>};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">exp</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span>{</span><br><span class="line"><span class="keyword">int</span> value1,value2;</span><br><span class="line"><span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(weight[i] &lt;= j &amp;&amp; i != <span class="number">-1</span>){   <span class="comment">//ç‰©ä½“è´¨é‡å°äºèƒŒåŒ…å®¹é‡ä¸”ä¸æ˜¯æ— æ•ˆæ•°æ® </span></span><br><span class="line">value1 = <span class="built_in">exp</span>(i<span class="number">-1</span>,j-weight[i]) + value[i];      <span class="comment">//è¿™ä¸ªç‰©ä½“æ”¾å…¥åçš„ä»·å€¼</span></span><br><span class="line">value2 = <span class="built_in">exp</span>(i<span class="number">-1</span>,j);   <span class="comment">//ä¸æ”¾çš„ä»·å€¼</span></span><br><span class="line">value1 &gt; value2 ? (max = value1) : (max = value2); <span class="comment">//æ¯”è¾ƒé€‰æ‹©æ”¾å…¥æˆ–ä¸æ”¾</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">return</span> max;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line"><span class="keyword">int</span> result;</span><br><span class="line">result = <span class="built_in">exp</span>(<span class="number">4</span>,<span class="number">10</span>);<span class="comment">//éœ€è¦æ£€æµ‹çš„ç‰©ä½“ä¸ªæ•°ï¼ŒèƒŒåŒ…å®¹é‡</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d"</span>,result);</span><br><span class="line">} </span><br></pre></td></tr></tbody></table></figure><h1 id="å›æº¯"><a href="#å›æº¯" class="headerlink" title="å›æº¯"></a>å›æº¯</h1><h2 id="ç´ æ•°ç¯é—®é¢˜"><a href="#ç´ æ•°ç¯é—®é¢˜" class="headerlink" title="ç´ æ•°ç¯é—®é¢˜"></a>ç´ æ•°ç¯é—®é¢˜</h2><p>ç”¨1~nå…±nä¸ªä¸é‡å¤æ•´æ•°æ„é€ ä¸€ä¸ªç¯å½¢ç»“æ„ï¼Œä½¿ç›¸é‚»ä¸¤ä¸ªæ•°ä¹‹å’Œä¸ºç´ æ•°ã€‚</p><p>å¦‚ä¸‹å›¾æ˜¯ä¸€ä¸ªn=6çš„ç´ æ•°ç¯ã€‚</p><img src="https://ftp.bmp.ovh/imgs/2021/06/3d0e41fcccd808f1.png" style="zoom:50%;"><h3 id="æ€è·¯-3"><a href="#æ€è·¯-3" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>åŒæ ·æŠŠé—®é¢˜æ‹†è§£æˆå‡ ä¸ªè´Ÿè´£ä¸åŒåŠŸèƒ½çš„å‡½æ•°ã€‚</p><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;malloc.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">isPrime</span><span class="params">(<span class="keyword">int</span> n)</span> <span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸ºç´ æ•°</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"><span class="keyword">int</span> i,k;</span><br><span class="line">k = (<span class="keyword">int</span>)<span class="built_in">sqrt</span>(n);</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">2</span>;i&lt;=k;i++)</span><br><span class="line">{</span><br><span class="line"><span class="keyword">if</span>(n%i==<span class="number">0</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">canPlace</span><span class="params">(<span class="keyword">int</span> *p,<span class="keyword">int</span> i,<span class="keyword">int</span> j,<span class="keyword">int</span> n)</span>  <span class="comment">//ä¼ å…¥æ•°ç»„é¦–æŒ‡é’ˆï¼Œè¦æ”¾ç½®çš„ä½ç½®ï¼Œè¦æ”¾ç½®çš„æ•°å€¼ï¼Œæ•°ç»„å¤§å°ï¼Œå‡½æ•°ç”¨æ¥æ£€æŸ¥èƒ½ä¸èƒ½æ”¾å…¥è¯¥æ•°</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"><span class="keyword">int</span> k,flag;</span><br><span class="line"><span class="keyword">for</span>(k=<span class="number">0</span>;k&lt;i;k++)<span class="comment">//æ£€æŸ¥å‰é¢æ˜¯å¦å·²ç»ä½¿ç”¨è¿‡è¯¥æ•°</span></span><br><span class="line">{</span><br><span class="line"><span class="keyword">if</span>(p[k]==j)</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line">flag = isPrime(j+p[i<span class="number">-1</span>]); <span class="comment">//è‹¥æ”¾ç½®åˆ™ä¸å‰æ•°å’Œæ˜¯å¦ä¸ºç´ æ•°</span></span><br><span class="line"><span class="keyword">if</span>(flag==<span class="number">1</span> &amp;&amp; i==n<span class="number">-1</span>)     <span class="comment">//è‹¥æ˜¯æœ€åä¸€ä¸ªä½ç½®åˆ™éœ€è¦å’Œç¬¬ä¸€ä¸ªæ•°æ„æˆç´ æ•°ç¯</span></span><br><span class="line">{</span><br><span class="line">flag = isPrime(j+p[<span class="number">0</span>]); </span><br><span class="line">}</span><br><span class="line"><span class="keyword">return</span> flag;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">showResult</span><span class="params">(<span class="keyword">int</span> *p,<span class="keyword">int</span> n)</span>  <span class="comment">//ä¼ å…¥æ•°ç»„é¦–åœ°å€å’Œæ•°ç»„å¤§å°</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="keyword">static</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"****ç¬¬%dä¸ªè§£****\n"</span>,++count);</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">{</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d "</span>,p[i]);</span><br><span class="line">}</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">primeCycle</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"><span class="keyword">int</span> i=<span class="number">1</span>,j,k;</span><br><span class="line"><span class="keyword">int</span> *p = (<span class="keyword">int</span> *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>)*n);  <span class="comment">//åŠ¨æ€å¼€è¾Ÿæ•°ç»„ç©ºé—´</span></span><br><span class="line"><span class="built_in">memset</span>(p,<span class="number">0</span>,n*<span class="keyword">sizeof</span>(<span class="keyword">int</span>));   <span class="comment">//æ•°ç»„ç½®é›¶</span></span><br><span class="line">p[<span class="number">0</span>] = <span class="number">1</span>;  <span class="comment">//å…ˆç»™ç¬¬0å·ä½èµ‹ä¸Šå€¼ ï¼Œå› ä¸ºæ˜¯ç¯çŠ¶ç»“æ„ï¼Œä¸ºé¿å…å‡ºç°ç›¸åŒç»“æ„çš„è§£ï¼Œå°†ç¬¬ä¸€ä¸ªå…ƒç´ å›ºå®šã€‚</span></span><br><span class="line"><span class="keyword">while</span>(i&gt;=<span class="number">1</span>)</span><br><span class="line">{</span><br><span class="line"><span class="keyword">for</span>(j=p[i]+<span class="number">1</span>;j&lt;=n;j++)   <span class="comment">//æ‰¾å‡ºèƒ½åœ¨è¯¥ä½ç½®æ”¾ç½®çš„æ»¡è¶³æ¡ä»¶çš„ç¬¬ä¸€ä¸ªæ•°ã€‚å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡å¯»æ‰¾ï¼Œåˆ™jä»1å¼€å§‹ï¼Œè‹¥æ˜¯å›æº¯ï¼Œåˆ™ä»ä¸Šæ¬¡ç¡®å®šçš„å€¼å¼€å§‹</span></span><br><span class="line">{</span><br><span class="line"><span class="keyword">if</span>(canPlace(p,i,j,n)==<span class="number">1</span>)</span><br><span class="line">{</span><br><span class="line">p[i] = j;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"><span class="keyword">if</span>(j&gt;n)   <span class="comment">//å¦‚æœä¸Šä¸€ä¸ªå¾ªç¯æ­£å¸¸ç»“æŸï¼Œå³è¯¥ä½ç½®æ²¡æœ‰å¯æ”¾ç½®çš„æ•°</span></span><br><span class="line">{</span><br><span class="line">p[i--] = <span class="number">0</span>;   <span class="comment">//p[i]=0;i--;å›æº¯è‡³ä¸Šä¸€ä¸ªä½ç½®,è¿™ä¸ªä½ç½®ç½®0ã€‚</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(i==n<span class="number">-1</span>)   <span class="comment">//å¦‚æœæœ€åä¸€ä¸ªä½ç½®çš„æ•°ä¹Ÿæ”¾ç½®å®Œæ¯•ï¼Œåˆ™è¾“å‡ºç»“æœï¼Œå¹¶å°†å‰ä¸€ä¸ªæ•°ç½®é›¶ä»¥ä¾¿å¯»æ‰¾ä¸‹ä¸€ç§è§£æƒ…å†µ</span></span><br><span class="line">{</span><br><span class="line">showResult(p,n);</span><br><span class="line">p[i--] = <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">else</span>              <span class="comment">//å¦‚æœè¿˜æ²¡æœ‰æ”¾ç½®å®Œæ•°ï¼Œåˆ™å°†i++ç»§ç»­è¿›è¡Œå¤§å¾ªç¯ã€‚</span></span><br><span class="line">i++;</span><br><span class="line">}</span><br><span class="line"><span class="built_in">free</span>(p); <span class="comment">//é‡Šæ”¾ç©ºé—´</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"finished\n"</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Input an integer\n"</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">primeCycle(n);</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>å¾…ç¼–è¾‘â€¦</p>]]></content>
      
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºå›è°ƒå’Œåå°„çš„ç®€å•åˆ†äº«</title>
      <link href="/2021/05/22/%E5%85%B3%E4%BA%8E%E5%9B%9E%E8%B0%83%E5%92%8C%E5%8F%8D%E5%B0%84%E7%9A%84%E7%AE%80%E5%8D%95%E5%88%86%E4%BA%AB/"/>
      <url>/2021/05/22/%E5%85%B3%E4%BA%8E%E5%9B%9E%E8%B0%83%E5%92%8C%E5%8F%8D%E5%B0%84%E7%9A%84%E7%AE%80%E5%8D%95%E5%88%86%E4%BA%AB/</url>
      
        <content type="html"><![CDATA[<h1 id="è°ƒç”¨"><a href="#è°ƒç”¨" class="headerlink" title="è°ƒç”¨"></a>è°ƒç”¨</h1><h2 id="åŒæ­¥è°ƒç”¨"><a href="#åŒæ­¥è°ƒç”¨" class="headerlink" title="åŒæ­¥è°ƒç”¨"></a>åŒæ­¥è°ƒç”¨</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">openDoor</span><span class="params">(Door door)</span></span>{</span><br><span class="line">        door.open(); </span><br><span class="line">        System.out.println(<span class="string">"æ–°çš„ä¸€å¤©å¼€å§‹äº†"</span>);</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">}</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Door</span></span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">open</span><span class="params">()</span></span>{</span><br><span class="line">        System.out,println(<span class="string">"é—¨è¢«æ‰“å¼€äº†"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>åœ¨æ‰“å°â€œæ–°çš„ä¸€å¤©å¼€å§‹äº†â€å†…å®¹æ—¶ï¼Œdoor.open()æ–¹æ³•å·²ç»æ‰§è¡Œç»“æŸã€‚ï¼ˆå¯èƒ½ä¼šé€ æˆé˜»å¡é—®é¢˜ï¼‰</p><h2 id="å¼‚æ­¥è°ƒç”¨"><a href="#å¼‚æ­¥è°ƒç”¨" class="headerlink" title="å¼‚æ­¥è°ƒç”¨"></a>å¼‚æ­¥è°ƒç”¨</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">openDoor</span><span class="params">(Door door)</span></span>{</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable(){</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>{</span><br><span class="line">                door.open();  </span><br><span class="line">            }</span><br><span class="line">        }).start();</span><br><span class="line">        System.out.println(<span class="string">"æ–°çš„ä¸€å¤©å¼€å§‹äº†"</span>);</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">}</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Door</span></span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">open</span><span class="params">()</span></span>{</span><br><span class="line">        System.out,println(<span class="string">"é—¨è¢«æ‰“å¼€äº†"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å°†è°ƒç”¨æ”¾åœ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹ä¸­ï¼Œåè¾¹çš„æ“ä½œå°†ä¸å†ä¾èµ–äºè°ƒç”¨æ–¹æ³•çš„ç»“æŸã€‚ï¼ˆè§£å†³åŒæ­¥è°ƒç”¨çš„é˜»å¡é—®é¢˜ï¼‰</p><h2 id="å›è°ƒ"><a href="#å›è°ƒ" class="headerlink" title="å›è°ƒ"></a>å›è°ƒ</h2><p>åŒå‘è°ƒç”¨æ¨¡å¼</p><p><em>A callback is a function this is passed as an argument to another function and is executed after its patent function has completed.</em></p><p><em>å›è°ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶åœ¨å…¶çˆ¶å‡½æ•°å®Œæˆåæ‰§è¡Œ</em></p><p>å›è°ƒçš„æ€æƒ³æ˜¯ï¼š<strong>ä¸€.ç±»Açš„a()æ–¹æ³•è°ƒç”¨ç±»Bçš„b()æ–¹æ³•</strong></p><p>â€‹                           <strong>äºŒ.ç±»Bçš„b()æ–¹æ³•æ‰§è¡Œå®Œæ¯•ä¸»åŠ¨è°ƒç”¨ç±»Açš„callback()æ–¹æ³•</strong></p><p>åŸç†ï¼šé¦–å…ˆåˆ›å»ºä¸€ä¸ªå›è°ƒå¯¹è±¡ï¼Œç„¶åå†åˆ›å»ºä¸€ä¸ªæ§åˆ¶å™¨å¯¹è±¡ï¼Œå°†å›è°ƒå¯¹è±¡éœ€è¦è¢«è°ƒç”¨çš„æ–¹æ³•å‘Šè¯‰æ§åˆ¶å™¨å¯¹è±¡ï¼Œæ§åˆ¶å™¨å¯¹è±¡è´Ÿè´£æ£€æŸ¥æŸä¸ªåœºæ™¯æ˜¯å¦å‡ºç°æˆ–æŸä¸ªæ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼Œå½“æ»¡è¶³æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨å›è°ƒå¯¹è±¡çš„æ–¹æ³•ã€‚</p><h3 id="ä¾‹ä¸€ï¼š"><a href="#ä¾‹ä¸€ï¼š" class="headerlink" title="ä¾‹ä¸€ï¼š"></a>ä¾‹ä¸€ï¼š</h3><p>æƒ…æ™¯ï¼šè€æ¿Aå¯¹å‘˜å·¥Bè¯´ï¼Œæˆ‘ç°åœ¨äº¤ç»™ä½ ä¸€ä¸ªä»»åŠ¡ï¼Œå¹¶ä¸”æˆ‘æŠŠæˆ‘çš„ç”µè¯å·ç ç»™ä½ ï¼Œä½ ä¸€æ—¦å®Œæˆä»»åŠ¡å°±ç»™æˆ‘æ‰“ç”µè¯ã€‚</p><p>1.åˆ›å»ºä¸€ä¸ªå›è°ƒæ¥å£</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CallBack</span></span></span><br><span class="line"><span class="class"></span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">acceptEvent</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>2.åˆ›å»ºå›è°ƒæ¥å£çš„å®ç°ç±»ï¼Œå³æœ¬ä¾‹ä¸­çš„è€æ¿ç±»</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Boss</span> <span class="keyword">implements</span> <span class="title">CallBack</span></span></span><br><span class="line"><span class="class"></span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">acceptEvent</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        System.out.println(<span class="string">"æ‰“ç”µè¯ç»™è€æ¿ï¼Œå‘ŠçŸ¥å·²ç»å®Œæˆå·¥ä½œäº†"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>3.åˆ›å»ºæ§åˆ¶ç±»ï¼Œä¹Ÿå°±æ˜¯æœ¬ä¾‹ä¸­çš„å‘˜å·¥å¯¹è±¡</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span></span></span><br><span class="line"><span class="class"></span>{</span><br><span class="line">    CallBack callBack;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(CallBack callBack)</span></span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        <span class="keyword">this</span>.callBack=callBack;</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doWork</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        System.out.println(<span class="string">"å·¥ä½œä¸­...."</span>);</span><br><span class="line">        callBack.acceptEvent();<span class="comment">//æ¥å£å®ç°ç±»çš„å¯¹è±¡è°ƒç”¨æ¥å£ä¸­çš„æ–¹æ³•</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>åˆ›å»ºæµ‹è¯•ç±»</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestMain</span></span></span><br><span class="line"><span class="class"></span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        <span class="comment">//åˆ›å»ºæ§åˆ¶å™¨å¯¹è±¡ï¼Œå°†æä¾›ç»™ä»–çš„å›è°ƒå¯¹è±¡ä¼ å…¥</span></span><br><span class="line">        Employee employee=<span class="keyword">new</span> Employee(<span class="keyword">new</span> Boss());    <span class="comment">//ä¼ é€’ä¸€ä¸ªå®ç°æ¥å£çš„ç±»çš„å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//å¯åŠ¨æ§åˆ¶å™¨å¯¹è±¡è¿è¡Œ</span></span><br><span class="line">        employee.doWork();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>åœ¨æœ¬ä¾‹ä¸­ï¼Œå¦‚æœå‘˜å·¥çš„å·¥ä½œç»“æœå¯èƒ½ä¸æ­¢å‘ä¸€ç±»äººä¼ é€’ï¼Œæ¯”å¦‚è¿˜ä¼šç»™ç»ç†ã€æµ‹è¯•ç­‰äººä¼ é€’ç»“æœã€‚è¿™æ—¶æˆ‘ä»¬å¯ä»¥å°†æ¥æ”¶ç»“æœè¿™ä¸ªæ–¹æ³•çœ‹åšä¸€ç§å…¬å…±éœ€æ±‚ï¼Œæ¥æ”¶åˆ°ç»“æœååç»­å¤„ç†æ“ä½œä¹Ÿä¸ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªæ–¹æ³•å®šä¹‰åˆ°æ¥å£ä¸­ï¼Œå†åœ¨å…·ä½“çš„ç±»ä¸­è¿›è¡Œå®ç°ã€‚</p><h3 id="ä¾‹äºŒï¼šï¼ˆå®‰å“ä¸­çš„å®ä¾‹ï¼‰"><a href="#ä¾‹äºŒï¼šï¼ˆå®‰å“ä¸­çš„å®ä¾‹ï¼‰" class="headerlink" title="ä¾‹äºŒï¼šï¼ˆå®‰å“ä¸­çš„å®ä¾‹ï¼‰"></a>ä¾‹äºŒï¼šï¼ˆå®‰å“ä¸­çš„å®ä¾‹ï¼‰</h3><p>åœ¨androidä¸­å›è°ƒæœºåˆ¶è¢«å¤§é‡çš„ä½¿ç”¨ã€‚æ¯”å¦‚ï¼Œåœ¨Activityä¸­å®šä¹‰äº†å¾ˆå¤šç”Ÿå‘½å‘¨æœŸçš„ä¸åŒçŠ¶æ€è¦è°ƒç”¨çš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•éƒ½æ˜¯ç©ºå®ç°ï¼Œç³»ç»Ÿæ¡†æ¶è¦è°ƒç”¨ï¼Œç”¨æˆ·ä¹Ÿè¦è°ƒç”¨æ¥å®ç°ã€‚</p><p>ã€€ã€€ä¸¾ä¸ªç®€å•çš„ä¾‹å­å°±æ˜¯Buttonçš„ç‚¹å‡»å“åº”äº‹ä»¶å®ç°æœºåˆ¶</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.app.Activity;  </span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;  </span><br><span class="line"><span class="keyword">import</span> android.view.View;  </span><br><span class="line"><span class="keyword">import</span> android.view.View.OnClickListener;  </span><br><span class="line"><span class="keyword">import</span> android.widget.Button;  </span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * è¿™ä¸ªå°±ç›¸å½“äºClass A </span></span><br><span class="line"><span class="comment"> * å®ç°äº† OnClickListeneræ¥å£</span></span><br><span class="line"><span class="comment"> */</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> <span class="keyword">implements</span> <span class="title">OnClickListener</span></span>{  </span><br><span class="line">    <span class="comment">/** </span></span><br><span class="line"><span class="comment">     * Class A åŒ…å«Class B(View)çš„å¼•ç”¨</span></span><br><span class="line"><span class="comment">     */</span>  </span><br><span class="line">    <span class="keyword">private</span> Button button;  </span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>{  </span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);  </span><br><span class="line">        setContentView(R.layout.activity_main);  </span><br><span class="line">        button = findViewById(R.id.button1);  </span><br><span class="line">          </span><br><span class="line">        <span class="comment">/** </span></span><br><span class="line"><span class="comment">         * Class A è°ƒç”¨Viewçš„æ–¹æ³•,è€ŒButton extends View-----&gt;Aç±»è°ƒç”¨Bç±»çš„æŸä¸ªæ–¹æ³• b </span></span><br><span class="line"><span class="comment">         */</span>  </span><br><span class="line">        button.setOnClickListener(<span class="keyword">this</span>);  </span><br><span class="line">    }  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">/** </span></span><br><span class="line"><span class="comment">     * ç”¨æˆ·ç‚¹å‡»Buttonæ—¶è°ƒç”¨çš„å›è°ƒå‡½æ•°ï¼Œä½ å¯ä»¥åšä½ è¦åšçš„äº‹  </span></span><br><span class="line"><span class="comment">     */</span>  </span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>{  </span><br><span class="line">        Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"OnClick"</span>, Toast.LENGTH_LONG).show();  </span><br><span class="line">    }  </span><br><span class="line">  </span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="ä¾‹ä¸‰ï¼šï¼ˆè¿˜æ˜¯å®‰å“å®ä¾‹ï¼‰"><a href="#ä¾‹ä¸‰ï¼šï¼ˆè¿˜æ˜¯å®‰å“å®ä¾‹ï¼‰" class="headerlink" title="ä¾‹ä¸‰ï¼šï¼ˆè¿˜æ˜¯å®‰å“å®ä¾‹ï¼‰"></a>ä¾‹ä¸‰ï¼šï¼ˆè¿˜æ˜¯å®‰å“å®ä¾‹ï¼‰</h3><p> ç‚¹å‡»æ–‡æœ¬æ¡†å¼¹å‡ºå¯¹è¯æ¡†ï¼Œå°†è¾“å…¥çš„æ–‡å­—æ˜¾ç¤ºåœ¨æ–‡æœ¬æ¡†ä¸­ã€‚</p><p><a href="https://github.com/liuyuxin-cloud/Android/tree/main/callbackdemo">https://github.com/liuyuxin-cloud/Android/tree/main/callbackdemo</a></p><h1 id="åå°„"><a href="#åå°„" class="headerlink" title="åå°„"></a>åå°„</h1><h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>ï¼ˆ1ï¼‰Javaåå°„æœºåˆ¶çš„æ ¸å¿ƒæ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶åŠ¨æ€åŠ è½½ç±»å¹¶è·å–ç±»çš„è¯¦ç»†ä¿¡æ¯ï¼Œä»è€Œæ“ä½œç±»æˆ–å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚æœ¬è´¨æ˜¯JVMå¾—åˆ°classå¯¹è±¡ä¹‹åï¼Œå†é€šè¿‡classå¯¹è±¡è¿›è¡Œåç¼–è¯‘ï¼Œä»è€Œè·å–å¯¹è±¡çš„å„ç§ä¿¡æ¯ã€‚</p><p>ï¼ˆ2ï¼‰Javaå±äºå…ˆç¼–è¯‘å†è¿è¡Œçš„è¯­è¨€ï¼Œç¨‹åºä¸­å¯¹è±¡çš„ç±»å‹åœ¨ç¼–è¯‘æœŸå°±ç¡®å®šä¸‹æ¥äº†ï¼Œè€Œå½“ç¨‹åºåœ¨è¿è¡Œæ—¶å¯èƒ½éœ€è¦åŠ¨æ€åŠ è½½æŸäº›ç±»ï¼Œè¿™äº›ç±»å› ä¸ºä¹‹å‰ç”¨ä¸åˆ°ï¼Œæ‰€ä»¥æ²¡æœ‰è¢«åŠ è½½åˆ°JVMã€‚é€šè¿‡åå°„ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°åˆ›å»ºå¯¹è±¡å¹¶è°ƒç”¨å…¶å±æ€§ï¼Œä¸éœ€è¦æå‰åœ¨ç¼–è¯‘æœŸçŸ¥é“è¿è¡Œçš„å¯¹è±¡æ˜¯è°ã€‚</p><p><strong>åå°„æœºåˆ¶ä½¿javaå…·æœ‰åŠ¨æ€ç‰¹æ€§</strong></p><h2 id="ç†è§£"><a href="#ç†è§£" class="headerlink" title="ç†è§£"></a>ç†è§£</h2><img src="https://ftp.bmp.ovh/imgs/2021/06/d693bb0688d7f75d.png" style="zoom:33%;"><p>å…³äºjava.lang.Class ç±»çš„ç†è§£</p><p>â€‹    å°†ç±»ç¼–è¯‘ç”Ÿæˆå­—èŠ‚ç æ–‡ä»¶(.class)å†ç”¨(java.exe)å‘½ä»¤å¯¹æ¯ä¸ªå­—èŠ‚ç æ–‡ä»¶è¿›è¡Œè§£é‡Šè¿è¡Œã€‚ç›¸å½“äºå°†æŸä¸ªå­—èŠ‚ç æ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¸­ã€‚</p><p>åŠ è½½åˆ°å†…å­˜ä¸­çš„ç±»ç§°ä¸ºè¿è¡Œæ—¶ç±»ï¼Œå®ƒä»¬æ˜¯Classç±»çš„å®ä¾‹ã€‚</p><p>ï¼ˆjavaä¸‡ç‰©çš†å¯¹è±¡  æˆ‘ä»¬çš„è‡ªå®šä¹‰ç±»æ˜¯Classç±»çš„å¯¹è±¡ï¼‰</p><h2 id="ç”¨é€”"><a href="#ç”¨é€”" class="headerlink" title="ç”¨é€”"></a>ç”¨é€”</h2><p>1ã€åç¼–è¯‘ï¼š.classâ€“&gt;.java</p><p>2ã€é€šè¿‡åå°„æœºåˆ¶è®¿é—®javaå¯¹è±¡çš„å±æ€§ï¼Œæ–¹æ³•ï¼Œæ„é€ æ–¹æ³•ç­‰</p><p>3ã€å½“æˆ‘ä»¬åœ¨ä½¿ç”¨IDE,æ¯”å¦‚Ecpliseï¼ŒIntelliJ IDEAæ—¶ï¼Œå½“æˆ‘ä»¬è¾“å…¥ä¸€ä¸ªå¯¹è±¡æˆ–è€…ç±»ï¼Œå¹¶æƒ³è°ƒç”¨ä»–çš„å±æ€§å’Œæ–¹æ³•æ˜¯ï¼Œä¸€æŒ‰ç‚¹å·ï¼Œç¼–è¯‘å™¨å°±ä¼šè‡ªåŠ¨åˆ—å‡ºä»–çš„å±æ€§æˆ–è€…æ–¹æ³•ï¼Œè¿™é‡Œå°±æ˜¯ç”¨åˆ°åå°„ã€‚</p><p>4ã€åå°„æœ€é‡è¦çš„ç”¨é€”å°±æ˜¯å¼€å‘å„ç§é€šç”¨æ¡†æ¶ã€‚æ¯”å¦‚å¾ˆå¤šæ¡†æ¶ï¼ˆSpringï¼‰éƒ½æ˜¯é…ç½®åŒ–çš„ï¼ˆæ¯”å¦‚é€šè¿‡XMLæ–‡ä»¶é…ç½®Beanï¼‰ï¼Œä¸ºäº†ä¿è¯æ¡†æ¶çš„é€šç”¨æ€§ï¼Œä»–ä»¬å¯èƒ½éœ€è¦æ ¹æ®é…ç½®æ–‡ä»¶åŠ è½½ä¸åŒçš„ç±»æˆ–è€…å¯¹è±¡ï¼Œè°ƒç”¨ä¸åŒçš„æ–¹æ³•ï¼Œè¿™ä¸ªæ—¶å€™å°±å¿…é¡»ä½¿ç”¨åˆ°åå°„äº†ï¼Œè¿è¡Œæ—¶åŠ¨æ€åŠ è½½éœ€è¦çš„åŠ è½½çš„å¯¹è±¡ã€‚</p><p>ä¾‹å­ï¼š</p><img src="https://ftp.bmp.ovh/imgs/2021/06/af8de99466562b90.png" style="zoom:33%;"><p>åå°„å‰å¯¹äºè‡ªå®šä¹‰ç±»çš„æ“ä½œï¼š</p><p>1.é€šè¿‡æ„é€ å™¨å®ä¾‹åŒ–å¯¹è±¡</p><p>2.é€šè¿‡å¯¹è±¡è°ƒç”¨å†…éƒ¨å±æ€§ã€æ–¹æ³•</p><p>3.åœ¨ç±»å¤–éƒ¨ä¸å¯ä»¥é€šè¿‡å¯¹è±¡è°ƒç”¨å†…éƒ¨ç§æœ‰(private)ç»“æ„ï¼ˆå°è£…æ€§çš„é™åˆ¶ï¼‰</p><p>åå°„åï¼š</p><p>1.é€šè¿‡åå°„åˆ›å»ºç±»çš„å¯¹è±¡</p><p>2.é€šè¿‡åå°„è°ƒç”¨å¯¹è±¡æŒ‡å®šçš„å±æ€§ã€æ–¹æ³•</p><p>3.é€šè¿‡åå°„å¯è°ƒç”¨ç±»çš„ç§æœ‰ç»“æ„</p><p>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨åå°„ï¼Ÿ</p><p>1.å…·æœ‰åŠ¨æ€æ€§æ—¶</p><p>2.ç¼–è¯‘æ—¶ä¸ç¡®å®šé€ å“ªä¸ªå¯¹è±¡æ—¶</p><h2 id="å¸¸ç”¨ç±»"><a href="#å¸¸ç”¨ç±»" class="headerlink" title="å¸¸ç”¨ç±»"></a>å¸¸ç”¨ç±»</h2><p>Java.lang.Class;</p><p>Java.lang.reflect.Constructor;</p><p>Java.lang.reflect.Field;</p><p>Java.lang.reflect.Method;</p><p>Java.lang.reflect.Modifier;</p><h2 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h2><p><strong>1ã€è·å¾—Classï¼šä¸»è¦æœ‰ä¸‰ç§æ–¹æ³•ï¼š</strong></p><p>ï¼ˆ1ï¼‰Objectâ€“&gt;getClass</p><p>ï¼ˆ2ï¼‰ä»»ä½•æ•°æ®ç±»å‹ï¼ˆåŒ…æ‹¬åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼‰éƒ½æœ‰ä¸€ä¸ªâ€œé™æ€â€çš„classå±æ€§</p><p>ï¼ˆ3ï¼‰é€šè¿‡classç±»çš„é™æ€æ–¹æ³•ï¼šforName(String className)ï¼ˆæœ€å¸¸ç”¨ï¼‰</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¬¬ä¸€ç§æ–¹å¼è·å–Classå¯¹è±¡  </span></span><br><span class="line">Student stu1 = <span class="keyword">new</span> Student();<span class="comment">//è¿™ä¸€new äº§ç”Ÿä¸€ä¸ªStudentå¯¹è±¡ï¼Œä¸€ä¸ªClasså¯¹è±¡ã€‚</span></span><br><span class="line">Class stuClass = stu1.getClass();<span class="comment">//è·å–Classå¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬äºŒç§æ–¹å¼è·å–Classå¯¹è±¡</span></span><br><span class="line">Class stuClass2 = Student.class;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬ä¸‰ç§æ–¹å¼è·å–Classå¯¹è±¡</span></span><br><span class="line"><span class="keyword">try</span> {</span><br><span class="line">Class stuClass3 = Class.forName(<span class="string">"fanshe.Student"</span>);<span class="comment">//æ³¨æ„æ­¤å­—ç¬¦ä¸²å¿…é¡»æ˜¯çœŸå®è·¯å¾„ï¼Œå°±æ˜¯å¸¦åŒ…åçš„ç±»è·¯å¾„ï¼ŒåŒ…å.ç±»å</span></span><br><span class="line">} <span class="keyword">catch</span> (ClassNotFoundException e) {</span><br><span class="line">e.printStackTrace();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>2ã€åˆ¤æ–­æ˜¯å¦ä¸ºæŸä¸ªç±»çš„ç¤ºä¾‹ï¼š</strong></p><p>ä¸€èˆ¬çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨instanceof å…³é”®å­—æ¥åˆ¤æ–­æ˜¯å¦ä¸ºæŸä¸ªç±»çš„å®ä¾‹ã€‚åŒæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å€ŸåŠ©åå°„ä¸­Classå¯¹è±¡çš„isInstance()æ–¹æ³•æ¥åˆ¤æ–­æ—¶å€™ä¸ºæŸä¸ªç±»çš„å®ä¾‹ï¼Œä»–æ˜¯ä¸€ä¸ªnativeæ–¹æ³•ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">native</span> <span class="keyword">boolean</span> <span class="title">isInstance</span><span class="params">(Object obj)</span></span>;</span><br></pre></td></tr></tbody></table></figure><p><strong>3ã€åˆ›å»ºå®ä¾‹ï¼šé€šè¿‡åå°„æ¥ç”Ÿæˆå¯¹è±¡ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼š</strong></p><p>ï¼ˆ1ï¼‰ä½¿ç”¨Classå¯¹è±¡çš„newInstance()æ–¹æ³•æ¥åˆ›å»ºClasså¯¹è±¡å¯¹åº”ç±»çš„å®ä¾‹ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class&lt;?&gt; c = String.class;Object str = c.newInstance();</span><br></pre></td></tr></tbody></table></figure><p>ï¼ˆ2ï¼‰å…ˆé€šè¿‡Classå¯¹è±¡è·å–æŒ‡å®šçš„Constructorå¯¹è±¡ï¼Œå†è°ƒç”¨Constructorå¯¹è±¡çš„newInstance()æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥ç”¨æŒ‡å®šçš„æ„é€ å™¨æ„é€ ç±»çš„å®ä¾‹ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·å–Stringçš„Classå¯¹è±¡</span></span><br><span class="line">Class&lt;?&gt; str = String.class;<span class="comment">//é€šè¿‡Classå¯¹è±¡è·å–æŒ‡å®šçš„Constructoræ„é€ å™¨å¯¹è±¡</span></span><br><span class="line">Constructor constructor=c.getConstructor(String.class);<span class="comment">//é€šè¿‡å‚æ•°åˆ¤æ–­æŒ‡å®šçš„æ„é€ å™¨</span></span><br><span class="line"><span class="comment">//æ ¹æ®æ„é€ å™¨åˆ›å»ºå®ä¾‹ï¼š</span></span><br><span class="line">Object obj = constructor.newInstance(â€œhello reflectionâ€);</span><br></pre></td></tr></tbody></table></figure><p><strong>4ã€é€šè¿‡åå°„è·å–æ„é€ æ–¹æ³•å¹¶ä½¿ç”¨ï¼š</strong></p><p>ï¼ˆ1ï¼‰æ‰¹é‡è·å–çš„æ–¹æ³•ï¼š<br>public Constructor[] getConstructors()ï¼šæ‰€æœ‰â€å…¬æœ‰çš„â€æ„é€ æ–¹æ³•<br>public Constructor[] getDeclaredConstructors()ï¼šè·å–æ‰€æœ‰çš„æ„é€ æ–¹æ³•(åŒ…æ‹¬ç§æœ‰ã€å—ä¿æŠ¤ã€é»˜è®¤ã€å…¬æœ‰)</p><p>ï¼ˆ2ï¼‰å•ä¸ªè·å–çš„æ–¹æ³•ï¼Œå¹¶è°ƒç”¨ï¼š<br>public Constructor getConstructor(Classâ€¦ parameterTypes):è·å–å•ä¸ªçš„â€å…¬æœ‰çš„â€æ„é€ æ–¹æ³•ï¼š<br>public Constructor getDeclaredConstructor(Classâ€¦ parameterTypes):è·å–â€æŸä¸ªæ„é€ æ–¹æ³•â€å¯ä»¥æ˜¯ç§æœ‰çš„ï¼Œæˆ–å—ä¿æŠ¤ã€é»˜è®¤ã€å…¬æœ‰ï¼›</p><p><a href="https://blog.csdn.net/a745233700/article/details/82893076">https://blog.csdn.net/a745233700/article/details/82893076</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonç¬”è®°</title>
      <link href="/2021/05/21/Python%E7%AC%94%E8%AE%B0/"/>
      <url>/2021/05/21/Python%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="å˜é‡å’Œç®€å•æ•°æ®ç±»å‹"><a href="#å˜é‡å’Œç®€å•æ•°æ®ç±»å‹" class="headerlink" title="å˜é‡å’Œç®€å•æ•°æ®ç±»å‹"></a>å˜é‡å’Œç®€å•æ•°æ®ç±»å‹</h2><h3 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h3><p><strong>å¼•å·æ‹¬èµ·æ¥çš„éƒ½æ˜¯å­—ç¬¦ä¸²</strong></p><p><strong>ä¿®æ”¹å¤§å°å†™</strong></p><p>.title()                æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™</p><p>.upper()            å…¨å¤§å†™</p><p>.lower()             å…¨å°å†™</p><p><strong>åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨å˜é‡</strong></p><p>åœ¨å­—ç¬¦ä¸²ä¸­æ’å…¥å˜é‡çš„å€¼ï¼Œåœ¨å‰å¼•å·å‰åŠ ä¸Šfï¼ˆformatï¼‰åœ¨å­—ç¬¦ä¸²å†…å°†æ’å…¥çš„å˜é‡ç”¨{}æ‹¬èµ·ã€‚</p><p><strong>åˆ é™¤ç©ºç™½</strong></p><p>pythonèƒ½æ‰¾å‡ºå­—ç¬¦ä¸²å¼€å¤´å’Œç»“å°¾å¤šä½™çš„ç©ºç™½ã€‚</p><p>.rstrip()            åˆ é™¤ç»“å°¾çš„ç©ºç™½ï¼ˆæš‚æ—¶ï¼‰æ°¸ä¹…åˆ é™¤éœ€å…³è”åˆ°å˜é‡</p><p>.lstrip()                    å¼€å¤´</p><p>.strip()                     å¼€å¤´å’Œç»“å°¾</p><h3 id="æ•°"><a href="#æ•°" class="headerlink" title="æ•°"></a>æ•°</h3><p><strong>æ•´æ•°</strong></p><p>**è¡¨ç¤ºä¹˜æ–¹è¿ç®—</p><p><strong>æµ®ç‚¹æ•°</strong></p><p>ç»“æœåŒ…å«çš„å°æ•°ä½æ•°å¯èƒ½æ˜¯ä¸ç¡®å®šçš„</p><p>ä»»æ„ä¸¤ä¸ªæ•°ç›¸é™¤æ—¶ï¼Œç»“æœæ€»æ˜¯æµ®ç‚¹æ•°ã€‚</p><p><strong>ä¸‹åˆ’çº¿</strong></p><p>å¯ä½¿ç”¨ä¸‹åˆ’çº¿å°†æ•°å­—åˆ†ç»„ä¸ä¼šæ‰“å°ä¸‹åˆ’çº¿</p><p><strong>èµ‹å€¼</strong></p><p>å¯åŒæ—¶ç»™å¤šä¸ªå˜é‡èµ‹å€¼</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x,y,z = <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span></span><br></pre></td></tr></tbody></table></figure><p><strong>å¸¸é‡</strong></p><p>pythonæ²¡æœ‰å†…ç½®çš„å¸¸é‡ç±»å‹ï¼Œé€šå¸¸ä½¿ç”¨å…¨å¤§å†™æ¥æŒ‡å‡ºå°†æŸä¸ªå˜é‡è§†ä¸ºå¸¸é‡ã€‚</p><h3 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h3><p>pythonç”¨#æ³¨é‡Šä¸€è¡Œ</p><h2 id="åˆ—è¡¨ç®€ä»‹"><a href="#åˆ—è¡¨ç®€ä»‹" class="headerlink" title="åˆ—è¡¨ç®€ä»‹"></a>åˆ—è¡¨ç®€ä»‹</h2><h3 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a>åˆ—è¡¨</h3><p>ç”¨[]è¡¨ç¤ºåˆ—è¡¨ï¼Œç”¨é€—å·åˆ†éš”å…¶ä¸­å…ƒç´ ã€‚</p><p>æ‰“å°åˆ—è¡¨æ—¶ä¼šå°†[]ä¸€åŒæ‰“å°ã€‚</p><h3 id="è®¿é—®åˆ—è¡¨å…ƒç´ "><a href="#è®¿é—®åˆ—è¡¨å…ƒç´ " class="headerlink" title="è®¿é—®åˆ—è¡¨å…ƒç´ "></a>è®¿é—®åˆ—è¡¨å…ƒç´ </h3><p>æ·»åŠ ç´¢å¼•     æ‰“å°æ—¶ä¸æ‰“å°[]</p><p>ç´¢å¼•ä»0å¼€å§‹</p><p>å½“ç´¢å¼•ä¸ºè´Ÿæ•°æ—¶ï¼Œpythonå°†ä»åˆ—è¡¨æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹è®¿é—®ã€‚</p><h3 id="å…ƒç´ çš„å¢åˆ æ”¹"><a href="#å…ƒç´ çš„å¢åˆ æ”¹" class="headerlink" title="å…ƒç´ çš„å¢åˆ æ”¹"></a>å…ƒç´ çš„å¢åˆ æ”¹</h3><p>åˆ›å»ºçš„åˆ—è¡¨å¤§å¤šæ˜¯åŠ¨æ€çš„ã€‚</p><p><strong>æ”¹</strong>        æ‹¿å‡ºç´¢å¼•ï¼ŒæŒ‡å®šæ–°å€¼ã€‚</p><p><strong>å¢</strong>        1. æœ«å°¾ï¼ˆé™„åŠ ï¼‰         .append(â€˜ â€˜)</p><p>â€‹            2. æ’å…¥                        .insert(  <em>int</em> ,â€™ â€˜)         æŒ‡å®šæ–°å…ƒç´ ç´¢å¼•ï¼Œå°†åæ–¹å…ƒç´ åç§»</p><p><strong>åˆ </strong>        1. delè¯­å¥                    del  <em>name</em>[<em>int</em>]        åˆ é™¤æŒ‡å®šç´¢å¼•å…ƒç´ ï¼Œåæ–¹å…ƒç´ å‰ç§»</p><p>â€‹            2. pop()æ–¹æ³•                .pop()                      åˆ é™¤åˆ—è¡¨ä¸­å…ƒç´ å¹¶å¯ç»§ç»­ä½¿ç”¨ã€‚</p><p>â€‹                                                                                  å¼¹å‡ºåˆ—è¡¨æœ«å°¾çš„å…ƒç´ ã€‚</p><p>â€‹                                                 .pop(<em>int</em>)                  å¼¹å‡ºä»»æ„ä½ç½®çš„å…ƒç´ </p><p>â€‹            3. remove()æ–¹æ³•         .remove(â€˜ â€˜)             æ ¹æ®å€¼åˆ é™¤å…ƒç´ (ä¹Ÿå¯ç»§ç»­ä½¿ç”¨è¿™ä¸ªå€¼)</p><h3 id="ç»„ç»‡åˆ—è¡¨"><a href="#ç»„ç»‡åˆ—è¡¨" class="headerlink" title="ç»„ç»‡åˆ—è¡¨"></a>ç»„ç»‡åˆ—è¡¨</h3><p><strong>æ°¸ä¹…æ’åº</strong>                    .sort()                                    æŒ‰å­—æ¯é¡ºåº</p><p>â€‹                                   .sort(reverse=True)             æŒ‰åå­—æ¯é¡ºåº</p><p><strong>ä¸´æ—¶æ’åº</strong>                    sorted(<em>name</em>)                       å¯ä¸´æ—¶æŒ‰é¡ºåºæˆ–åé¡ºåº</p><p><strong>åè½¬æ’åˆ—é¡ºåº</strong>            .reverse()                              æ°¸ä¹…æ€§ä¿®æ”¹</p><p><strong>ç¡®å®šåˆ—è¡¨é•¿åº¦</strong>            len(<em>name</em>)                            </p><h2 id="æ“ä½œåˆ—è¡¨"><a href="#æ“ä½œåˆ—è¡¨" class="headerlink" title="æ“ä½œåˆ—è¡¨"></a>æ“ä½œåˆ—è¡¨</h2><h3 id="éå†æ•´ä¸ªåˆ—è¡¨"><a href="#éå†æ•´ä¸ªåˆ—è¡¨" class="headerlink" title="éå†æ•´ä¸ªåˆ—è¡¨"></a>éå†æ•´ä¸ªåˆ—è¡¨</h3><p><strong>forå¾ªç¯</strong>        for item in list_of_items:</p><p>â€‹                            to do â€¦</p><p>å°†å¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡Œç›¸åŒçš„æ“ä½œï¼ŒçŸ¥é“åˆ—è¡¨ä¸­çš„å…ƒç´ éå†ç»“æŸã€‚</p><h3 id="æ•°å­—åˆ—è¡¨"><a href="#æ•°å­—åˆ—è¡¨" class="headerlink" title="æ•°å­—åˆ—è¡¨"></a>æ•°å­—åˆ—è¡¨</h3><p><strong>å‡½æ•°range()</strong>                                    è½»æ¾ç”Ÿæˆä¸€ç³»åˆ—æ•°ï¼šrange(<em>int1</em>,<em>int2</em>)    # int1 ~ int2 - 1</p><p>â€‹                                                                                            range(<em>int</em>)             #  0 ~ int - 1</p><p>â€‹                                                         å¯æŒ‡å®šç”Ÿæˆæ•°çš„æ­¥é•¿ï¼šrange(<em>int1</em>,<em>int2</em>,<em>int3</em>)        # ä»int1å¼€å§‹æ¯æ¬¡å¢åŠ int3ç›´è‡³å¤§äºç­‰äºint2</p><p><strong>ä½¿ç”¨range()åˆ›å»ºæ•°å­—åˆ—è¡¨</strong>            ä½¿ç”¨list()å°†range()ç»“æœè½¬åŒ–ä¸ºåˆ—è¡¨ï¼š<em>name</em> = list(range(<em>int</em>))</p><p><strong>è¿›è¡Œç®€å•è®¡ç®—</strong>                                  <em>numbers</em> = [<em>int1</em>,â€¦,<em>intn</em>]            min(<em>number</em>)        #æœ€å°å€¼</p><p>â€‹                                                                                                             max(<em>number</em>)       #æœ€å¤§å€¼</p><p>â€‹                                                                                                             sum(<em>number</em>)       #æ±‚å’Œ</p><p><strong>åˆ—è¡¨è§£æ</strong>                                        </p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">squares = [value**<span class="number">2</span> <span class="keyword">for</span> value <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">11</span>)]</span><br><span class="line"><span class="built_in">print</span>(squares)</span><br><span class="line"><span class="comment">#&gt;&gt;&gt;[1,4,9,16,25,36,49,64,81,100]</span></span><br></pre></td></tr></tbody></table></figure><h3 id="ä½¿ç”¨åˆ—è¡¨çš„ä¸€éƒ¨åˆ†"><a href="#ä½¿ç”¨åˆ—è¡¨çš„ä¸€éƒ¨åˆ†" class="headerlink" title="ä½¿ç”¨åˆ—è¡¨çš„ä¸€éƒ¨åˆ†"></a>ä½¿ç”¨åˆ—è¡¨çš„ä¸€éƒ¨åˆ†</h3><p><strong>åˆ‡ç‰‡</strong>                                            <em>name</em>[<em>int1</em> : <em>int2</em>]                    #ç´¢å¼•ç”±int1å¼€å§‹åˆ°int2-1ç»“æŸ</p><p>â€‹                                                                                                    #çœç•¥int1æ—¶ä»å¤´å¼€å§‹ï¼Œçœç•¥int2æ—¶åˆ°æœ«å°¾ç»“æŸã€‚å¯ä¸ºè´Ÿæ•°ã€‚</p><p>â€‹                                                                                                    #å¯ä½¿ç”¨forå¾ªç¯éå†</p><p><strong>å¤åˆ¶åˆ—è¡¨</strong>                                    <em>new_list</em> = <em>name</em>[ : ]                #å¤åˆ¶ï¼Œå°†å‰¯æœ¬èµ‹å€¼ç»™new_list</p><h3 id="å…ƒç»„"><a href="#å…ƒç»„" class="headerlink" title="å…ƒç»„"></a>å…ƒç»„</h3><p>å®šä¹‰ä¸€ç³»åˆ—ä¸å¯ä¿®æ”¹çš„å…ƒç´ </p><p><strong>å®šä¹‰</strong>                                            <em>name</em> = (item1,â€¦,itemn)    #ä½¿ç”¨ï¼ˆï¼‰å®šä¹‰å…ƒç»„  <strong>åªæœ‰ä¸€ä¸ªå…ƒç´ æ—¶è¦åœ¨åé¢åŠ ä¸Šé€—å·</strong></p><p><strong>éå†</strong>                                            ä½¿ç”¨forå¾ªç¯</p><p><strong>ä¿®æ”¹</strong>                                            é‡æ–°å®šä¹‰æ•´ä¸ªå…ƒç»„</p><h2 id="ifè¯­å¥"><a href="#ifè¯­å¥" class="headerlink" title="ifè¯­å¥"></a>ifè¯­å¥</h2><p><strong>åŸºæœ¬æ ¼å¼</strong>                                        </p><p>â€‹                                                                          if   <em>something</em> :</p><p>â€‹                                                                                <em>to doâ€¦</em></p><p>â€‹                                                                           elif  <em>something</em>:</p><p>â€‹                                                                                <em>to doâ€¦</em></p><p>â€‹                                                                           else :</p><p>â€‹                                                                                <em>to doâ€¦</em></p><p><strong>æ£€æŸ¥å¤šä¸ªæ¡ä»¶</strong>                                                    ä½¿ç”¨and/orå…³é”®å­—</p><p><strong>æ£€æŸ¥ç‰¹å®šå€¼æ˜¯å¦åŒ…å«/ä¸åŒ…å«åœ¨åˆ—è¡¨ä¸­</strong>            â€˜<em>item</em>â€˜ in <em>list_name</em> </p><p>â€‹                                                                            â€˜<em>item</em>â€˜ not in <em>list_name</em></p><h2 id="å­—å…¸"><a href="#å­—å…¸" class="headerlink" title="å­—å…¸"></a>å­—å…¸</h2><h3 id="ä½¿ç”¨å­—å…¸"><a href="#ä½¿ç”¨å­—å…¸" class="headerlink" title="ä½¿ç”¨å­—å…¸"></a>ä½¿ç”¨å­—å…¸</h3><p><strong>ç®€ä»‹</strong>                åœ¨pythonä¸­ï¼Œ<strong>å­—å…¸</strong>æ˜¯ä¸€ç³»åˆ—<strong>é”®å€¼å¯¹</strong>ã€‚ä¸<strong>é”®</strong>å…³è”çš„<strong>å€¼</strong>å¯ä»¥æ˜¯æ•°ã€å­—ç¬¦ä¸²ã€åˆ—è¡¨ä¹ƒè‡³å­—å…¸ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name = {<span class="string">'color'</span>:<span class="string">'green'</span>,<span class="string">'points'</span>:<span class="number">5</span>}</span><br></pre></td></tr></tbody></table></figure><p><strong>è®¿é—®å­—å…¸ä¸­çš„å€¼</strong>                    ä¾æ¬¡æŒ‡å®šå­—å…¸åå’Œæ”¾åœ¨æ–¹æ‹¬å·å†…çš„é”®ã€‚                #<em>name</em>[â€˜<em>item</em>â€˜]</p><p><strong>æ·»åŠ é”®å€¼å¯¹</strong>                            ä¾æ¬¡æŒ‡å®šå­—å…¸åå’Œæ”¾åœ¨æ–¹æ‹¬å·å†…çš„é”®åŠèµ‹å€¼ã€‚    #<em>name</em>[â€˜<em>item</em>â€˜] = â€˜<em>value</em>â€˜</p><p><strong>æ”¹</strong>                                           ä¾æ¬¡æŒ‡å®šå­—å…¸åå’Œæ”¾åœ¨æ–¹æ‹¬å·å†…çš„é”®åŠä¿®æ”¹å€¼ã€‚#<em>name</em>[â€˜itemâ€™] = â€˜<em>new value</em>â€˜</p><p><strong>åˆ </strong>                                            delè¯­å¥ ä¾æ¬¡æŒ‡å®šå­—å…¸åå’Œæ”¾åœ¨æ–¹æ‹¬å·å†…çš„é”®ã€‚#del <em>name</em>[â€˜<em>item</em>â€˜]     </p><p><strong>ç”±ç±»ä¼¼å¯¹è±¡ç»„æˆçš„å­—å…¸</strong></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">favorite_languages = {</span><br><span class="line"><span class="string">'jen'</span>:<span class="string">'python'</span>,</span><br><span class="line"><span class="string">'sarah'</span>:<span class="string">'java'</span>,</span><br><span class="line"><span class="string">'edward'</span>:<span class="string">'c'</span>,</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>ä½¿ç”¨get()æ¥è®¿é—®å€¼</strong>               å½“æŒ‡å®šçš„é”®ä¸å­˜åœ¨æ—¶ä¼šå‡ºé”™ï¼Œä½†åœ¨ä½¿ç”¨get()æ–¹æ³•æ—¶ä¼šè¿”å›ä¸€ä¸ªé»˜è®¤å€¼ã€‚</p><p>â€‹                                                #<em>name</em>.get(â€˜<em>item</em>â€˜,<em>default value</em>)é»˜è®¤å€¼å¯ä¸æŒ‡å®šï¼Œå°†è¿”å›none</p><h3 id="éå†å­—å…¸"><a href="#éå†å­—å…¸" class="headerlink" title="éå†å­—å…¸"></a>éå†å­—å…¸</h3><p><strong>éå†æ‰€æœ‰é”®å€¼å¯¹</strong>                    forå¾ªç¯                    #for key,value in <em>name</em>.items():</p><p>â€‹                                                                                #key,valueå¯ä»¥ä½¿ç”¨ä»»æ„åç§°</p><p><strong>éå†æ‰€æœ‰é”®</strong>                            forå¾ªç¯                    #for key in <em>name</em>.keys():</p><p>â€‹                                                                                #å®é™…ä¸Šè¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼ŒåŒ…å«å­—å…¸ä¸­æ‰€æœ‰é”®</p><p><strong>æŒ‰ç‰¹å®šé¡ºåºéå†æ‰€æœ‰é”®</strong>        forå¾ªç¯                    #å¯ä½¿ç”¨sorted()å‡½æ•°å¯¹keysè¿›è¡Œæ’åº</p><p><strong>éå†æ‰€æœ‰å€¼</strong>                           forå¾ªç¯                    #for value in <em>name</em>.values():</p><p>â€‹                                                                               #éœ€è¦è€ƒè™‘å‰”é™¤é‡å¤é¡¹æ—¶å¯ä½¿ç”¨set()æ–¹æ³•  ç»“æœæ˜¯ä¸€ä¸ªä¸                                                                                    é‡å¤çš„åˆ—è¡¨</p><p>â€‹                                                                               #å¯ç›´æ¥ç”¨{}åˆ›å»ºé›†åˆï¼Œé›†åˆä¸­å…ƒç´ ä¸ä¼šé‡å¤ã€‚</p><h3 id="åµŒå¥—"><a href="#åµŒå¥—" class="headerlink" title="åµŒå¥—"></a>åµŒå¥—</h3><p><strong>å­—å…¸åˆ—è¡¨</strong>                                å…ˆåˆ›å»ºå‡ ä¸ªå­—å…¸ï¼Œåå°†å­—å…¸å­˜å‚¨åˆ°åˆ—è¡¨ä¸­</p><p><strong>åœ¨å­—å…¸ä¸­å­˜å‚¨åˆ—è¡¨</strong>                å°†åˆ—è¡¨ä½œä¸ºå­—å…¸é‡Œçš„å€¼ï¼›å¯ä½¿ç”¨äºŒé‡å¾ªç¯éå†å­—å…¸ä¸­çš„åˆ—è¡¨</p><p><strong>åœ¨å­—å…¸ä¸­å­˜å‚¨å­—å…¸</strong>                åµŒå¥—åœ¨å­—å…¸é‡Œçš„å­—å…¸å°½å¯èƒ½å…·æœ‰ç›¸åŒç»“æ„</p><h2 id="ç”¨æˆ·è¾“å…¥å’Œwhileå¾ªç¯"><a href="#ç”¨æˆ·è¾“å…¥å’Œwhileå¾ªç¯" class="headerlink" title="ç”¨æˆ·è¾“å…¥å’Œwhileå¾ªç¯"></a>ç”¨æˆ·è¾“å…¥å’Œwhileå¾ªç¯</h2><h3 id="å‡½æ•°inputï¼ˆï¼‰çš„å·¥ä½œåŸç†"><a href="#å‡½æ•°inputï¼ˆï¼‰çš„å·¥ä½œåŸç†" class="headerlink" title="å‡½æ•°inputï¼ˆï¼‰çš„å·¥ä½œåŸç†"></a>å‡½æ•°inputï¼ˆï¼‰çš„å·¥ä½œåŸç†</h3><p><strong>input(<em>string</em>)</strong>                        æ¥æ”¶ä¸€ä¸ªå‚æ•°ç”¨æ¥å‘ç”¨æˆ·æ˜¾ç¤ºçš„æç¤ºæˆ–è¯´æ˜ã€‚æ¥æ”¶ç”¨æˆ·è¾“å…¥çš„å­—ç¬¦ä¸²</p><p><strong>int()</strong>                                        å°†æ¥æ”¶åˆ°çš„å­—ç¬¦ä¸²ç±»å‹çš„æ•°å­—è½¬åŒ–ä¸ºintç±»å‹</p><h3 id="whileå¾ªç¯"><a href="#whileå¾ªç¯" class="headerlink" title="whileå¾ªç¯"></a>whileå¾ªç¯</h3><p><strong>è®¾ç½®é€€å‡ºæ¡ä»¶</strong>                        while   <em>option</em></p><p><strong>ä½¿ç”¨æ ‡å¿—</strong>                                while   <em>flag</em>    å½“è¦æ±‚å¾ˆå¤šæ¡ä»¶æ»¡è¶³æ—¶æ‰ç»§ç»­è¿è¡Œæ—¶ï¼Œå¯å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œç”¨äºåˆ¤æ–­æ•´ä¸ªç¨‹åºæ˜¯å¦å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚</p><p>â€‹                                                #active = True å½“æœ‰æ¡ä»¶ä½¿active = Falseæ—¶é€€å‡ºå¾ªç¯ã€‚</p><p><strong>ä½¿ç”¨breakã€continue</strong></p><h3 id="ä½¿ç”¨whileå¾ªç¯å¤„ç†åˆ—è¡¨å’Œå­—å…¸"><a href="#ä½¿ç”¨whileå¾ªç¯å¤„ç†åˆ—è¡¨å’Œå­—å…¸" class="headerlink" title="ä½¿ç”¨whileå¾ªç¯å¤„ç†åˆ—è¡¨å’Œå­—å…¸"></a>ä½¿ç”¨whileå¾ªç¯å¤„ç†åˆ—è¡¨å’Œå­—å…¸</h3><p>forå¾ªç¯æ˜¯ä¸€ç§éå†åˆ—è¡¨çš„æœ‰æ•ˆæ–¹å¼ï¼Œä½†<strong>ä¸åº”åœ¨forå¾ªç¯ä¸­ä¿®æ”¹åˆ—è¡¨</strong>ï¼Œåœ¨<strong>éå†åˆ—è¡¨åŒæ—¶ä¿®æ”¹</strong>æ—¶ï¼Œä½¿ç”¨whileå¾ªç¯ã€‚</p><p><strong>åœ¨åˆ—è¡¨ä¹‹é—´ç§»åŠ¨å…ƒç´ </strong></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªå¾…éªŒè¯çš„ç”¨æˆ·åˆ—è¡¨</span></span><br><span class="line"><span class="comment">#  å’Œä¸€ä¸ªç”¨äºå­˜å‚¨çš„å·²éªŒè¯ç”¨æˆ·çš„ç©ºåˆ—è¡¨ã€‚</span></span><br><span class="line">unconfirmed_users = [<span class="string">'alice'</span>,<span class="string">'brain'</span>,<span class="string">'candace'</span>]</span><br><span class="line">confirmed_users = []</span><br><span class="line"></span><br><span class="line"><span class="comment">#éªŒè¯æ¯ä¸€ä¸ªç”¨æˆ·ï¼Œç›´åˆ°æ²¡æœ‰æœªéªŒè¯çš„ç”¨æˆ·ä¸ºæ­¢ã€‚</span></span><br><span class="line"><span class="comment">#  å°†æ¯ä¸ªç»è¿‡éªŒè¯çš„ç”¨æˆ·éƒ½ç§»åˆ°å·²éªŒè¯ç”¨æˆ·åˆ—è¡¨ä¸­</span></span><br><span class="line"><span class="keyword">while</span> unconfirmed_users:</span><br><span class="line">    current_user = uncomfirmed_users.pop()</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f"Verifying user:<span class="subst">{current_user.title()}</span>"</span>)</span><br><span class="line">    confirmed_users.append(current_user)</span><br><span class="line">    </span><br><span class="line"><span class="comment">#æ˜¾ç¤ºæ‰€æœ‰å·²éªŒè¯çš„ç”¨æˆ·</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"\n The following users have been confirmed:"</span>)</span><br><span class="line"><span class="keyword">for</span> confirmed_user <span class="keyword">in</span> confirmed_users:</span><br><span class="line">    <span class="built_in">print</span>(confirmed_user.title())</span><br></pre></td></tr></tbody></table></figure><p><strong>åˆ é™¤ä¸ºç‰¹å®šå€¼çš„æ‰€æœ‰åˆ—è¡¨å…ƒç´ </strong></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pets = [<span class="string">'cat'</span>,<span class="string">'dog'</span>,<span class="string">'fish'</span>,<span class="string">'cat'</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="string">'cat'</span> <span class="keyword">in</span> pets:</span><br><span class="line">pets.remove(<span class="string">'cat'</span>)</span><br></pre></td></tr></tbody></table></figure><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><h3 id="å®šä¹‰å‡½æ•°"><a href="#å®šä¹‰å‡½æ•°" class="headerlink" title="å®šä¹‰å‡½æ•°"></a>å®šä¹‰å‡½æ•°</h3><p>def  <em>f_name</em>():                            defå…³é”®å­—å®šä¹‰å‡½æ•°</p><p>â€œâ€â€å¯¹å‡½æ•°ä½œç”¨çš„è§£é‡Šâ€â€â€            æ–‡æ¡£å­—ç¬¦ä¸²çš„æ³¨é‡Š</p><h3 id="ä¼ é€’å®å‚"><a href="#ä¼ é€’å®å‚" class="headerlink" title="ä¼ é€’å®å‚"></a>ä¼ é€’å®å‚</h3><p><strong>ä½ç½®å®å‚</strong>                                    æ ¹æ®å‡½æ•°ä¸­çš„å½¢å‚ä½ç½®å¯¹åº”å®å‚</p><p><strong>å…³é”®å­—å®å‚</strong>                                å³ç”¨  <em>å½¢å‚å= â€˜å®å‚ â€˜</em>  æŒ‡å®š</p><p><strong>è¿”å›å€¼</strong>                                        ç›´æ¥  <em>return</em></p><p><strong>é»˜è®¤å€¼</strong>                                        å®šä¹‰æ—¶å¯ä¸ºå‚æ•°è®¾ç½®é»˜è®¤å€¼  <em>å½¢å‚ = â€˜ â€¦â€™</em></p><p><strong>å‚æ•°å¯é€‰</strong>                                    å½“æœ‰å‚æ•°å¯ä»¥ä¸å¿…ä¼ å…¥æ—¶ï¼Œå°†è¯¥å‚æ•°å®šä¹‰åœ¨æœ€åå¹¶ç”¨ç©ºä¸²è®¾ä¸ºé»˜è®¤å€¼</p><p><strong>è¿”å›å­—å…¸</strong>                                    åœ¨æ–¹æ³•ä¸­å®šä¹‰å­—å…¸ï¼Œreturnå­—å…¸å</p><p><strong>ä¼ é€’åˆ—è¡¨</strong>                                    å¯å°†åˆ—è¡¨åä½œä¸ºå‚æ•°ä¼ ç»™å‡½æ•°</p><p><strong>ç¦æ­¢å‡½æ•°ä¿®æ”¹åˆ—è¡¨</strong>                    å°†åˆ—è¡¨çš„å‰¯æœ¬ä¼ ç»™å‡½æ•°            <em>function_name(list_name[:])</em>    #åˆ‡ç‰‡è¡¨ç¤ºæ³•[:]åˆ›å»ºåˆ—è¡¨çš„å‰¯æœ¬ã€‚</p><p><strong>ä¼ é€’ä»»æ„æ•°é‡çš„å®å‚</strong>                åªæœ‰ä¸€ä¸ªå½¢å‚ å½¢å‚å‰åŠ ä¸Šæ˜Ÿå·*    <em>def  f_name(*params)</em>        #*ä»£è¡¨è®©pythonåˆ›å»ºä¸€ä¸ªåä¸ºparamsçš„ç©ºå…ƒ                                                   ç»„ï¼Œå¹¶å°†æ‰€æœ‰æ¥æ”¶åˆ°çš„å€¼éƒ½å°è£…è¿›è¿™ä¸ªå…ƒç»„ä¸­</p><p><strong>ä½¿ç”¨ä»»æ„æ•°é‡å…³é”®å­—å®å‚</strong>        åœ¨å…³é”®å­—å½¢å‚å‰åŠ ä¸Šä¸¤ä¸ªæ˜Ÿå·ï¼Œä»£è¡¨è®©pythonåˆ›å»ºä¸€ä¸ªç©ºå­—å…¸ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">build_profile</span>(<span class="params">first,last,**user_info</span>):</span></span><br><span class="line"><span class="string">"""åˆ›å»ºä¸€ä¸ªå­—å…¸ï¼Œå…¶ä¸­åŒ…å«æˆ‘ä»¬çŸ¥é“çš„æœ‰å…³ç”¨æˆ·çš„ä¸€åˆ‡"""</span></span><br><span class="line">user_info[<span class="string">'first_name'</span>] = first</span><br><span class="line">user_info[<span class="string">'last_name'</span>] = last</span><br><span class="line"><span class="keyword">return</span> user_info</span><br><span class="line"></span><br><span class="line">user_profile = bulid_profile(<span class="string">'albert'</span>,<span class="string">'einstein'</span>,</span><br><span class="line"> location = <span class="string">'princeton'</span></span><br><span class="line"> field = <span class="string">'physics'</span>)</span><br><span class="line"><span class="built_in">print</span>(user_profile)</span><br></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">{<span class="string">'location'</span> : <span class="string">'princeton'</span>, <span class="string">'field'</span> : <span class="string">'physics'</span>,<span class="string">'first_name'</span> : <span class="string">'albert'</span>,<span class="string">'last_name'</span> : <span class="string">'einstein'</span>}</span><br></pre></td></tr></tbody></table></figure><h3 id="å°†å‡½æ•°å­˜å‚¨åœ¨æ¨¡å—ä¸­"><a href="#å°†å‡½æ•°å­˜å‚¨åœ¨æ¨¡å—ä¸­" class="headerlink" title="å°†å‡½æ•°å­˜å‚¨åœ¨æ¨¡å—ä¸­"></a>å°†å‡½æ•°å­˜å‚¨åœ¨æ¨¡å—ä¸­</h3><p>importè¯­å¥å…è®¸åœ¨å½“å‰è¿è¡Œçš„ç¨‹åºä¸­ä½¿ç”¨æ¨¡å—ä¸­çš„ä»£ç ã€‚</p><p><strong>å¯¼å…¥æ•´ä¸ªæ¨¡å—</strong>                            æ¨¡å—æ˜¯æ‰©å±•åä¸º.py çš„æ–‡ä»¶ï¼Œimport+<em>module_name</em> å³å¯å¯¼å…¥æ¨¡å—å¹¶ä½¿ç”¨å…¶ä¸­çš„å‡½æ•°</p><p>â€‹                                                    #<em>module_name.fuction_name</em></p><p><strong>å¯¼å…¥ç‰¹å®šå‡½æ•°</strong>                            from  <em>module_name</em>  import  <em>function_0,function_1,function_2</em></p><p><strong>ä½¿ç”¨asç»™å‡½æ•°æŒ‡å®šåˆ«å</strong>            è¦å¯¼å…¥çš„å‡½æ•°çš„åç§°å¯èƒ½ä¸ç¨‹åºä¸­ç°æœ‰çš„åç§°å†²çªï¼Œæˆ–è€…å› ä¸ºå‡½æ•°åç§°å¤ªé•¿ï¼Œå¯æŒ‡å®šç‹¬ä¸€æ— äºŒçš„åˆ«åã€‚</p><p>â€‹                                                   #  <em>from module_name import function_name as nike_name</em></p><p><strong>ç»™æ¨¡å—æŒ‡å®šåˆ«å</strong>                        #  <em>import module_name as nike_name</em></p><h2 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h2><h3 id="åˆ›å»ºå’Œä½¿ç”¨ç±»"><a href="#åˆ›å»ºå’Œä½¿ç”¨ç±»" class="headerlink" title="åˆ›å»ºå’Œä½¿ç”¨ç±»"></a>åˆ›å»ºå’Œä½¿ç”¨ç±»</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Classname</span>#ç±»åé¦–å­—æ¯å¤§å†™</span></span><br><span class="line"><span class="class">"""åˆ›å»ºç±»"""</span></span><br><span class="line"><span class="class"><span class="title">def</span> <span class="title">__init__</span>(<span class="params">self,*name,age*</span>)#ç›¸å½“äºæ„é€ å™¨ åˆå§‹åŒ–å±æ€§ <span class="title">self</span>å½¢å‚å¿…é¡»æœ‰ä¸”ä½äºæœ€å‰ æ¯æ¬¡åˆ›å»ºå®ä¾‹æ—¶<span class="title">python</span>è‡ªåŠ¨è¿è¡Œ</span></span><br><span class="line">self.name = name        </span><br><span class="line">self.age = age            </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">function_name0</span>    #...        #...    </span></span><br><span class="line"><span class="function"><span class="title">def</span> <span class="title">function_name1</span>    #...        #...        </span></span><br></pre></td></tr></tbody></table></figure><h3 id="æ ¹æ®ç±»åˆ›å»ºå®ä¾‹"><a href="#æ ¹æ®ç±»åˆ›å»ºå®ä¾‹" class="headerlink" title="æ ¹æ®ç±»åˆ›å»ºå®ä¾‹"></a>æ ¹æ®ç±»åˆ›å»ºå®ä¾‹</h3><p>è·Ÿjavaç±»ä¼¼                        instanse1 = class_name(params)</p><p>å¾…ç¼–è¾‘â€¦â€¦</p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaå¤ä¹ ç¬¬ä¸‰æ¬¡</title>
      <link href="/2021/05/21/java%E5%A4%8D%E4%B9%A0%E7%AC%AC%E4%B8%89%E6%AC%A1/"/>
      <url>/2021/05/21/java%E5%A4%8D%E4%B9%A0%E7%AC%AC%E4%B8%89%E6%AC%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="javaå¤ä¹ ç¬¬ä¸‰æ¬¡"><a href="#javaå¤ä¹ ç¬¬ä¸‰æ¬¡" class="headerlink" title="javaå¤ä¹ ç¬¬ä¸‰æ¬¡"></a>javaå¤ä¹ ç¬¬ä¸‰æ¬¡</h1><h2 id="lambda-è¡¨è¾¾å¼"><a href="#lambda-è¡¨è¾¾å¼" class="headerlink" title="lambda è¡¨è¾¾å¼"></a>lambda è¡¨è¾¾å¼</h2><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>lambdaè¡¨è¾¾å¼æ˜¯ä¸€ä¸ª<strong>å¯ä¼ é€’çš„ä»£ç å—</strong>ï¼Œå¯åœ¨ä»¥åæ‰§è¡Œä¸€æ¬¡æˆ–å¤šæ¬¡ã€‚lambdaè¡¨ç¤ºå‚æ•°ã€‚</p><p>Lambda å…è®¸æŠŠ<strong>å‡½æ•°</strong>ä½œä¸ºä¸€ä¸ªæ–¹æ³•çš„å‚æ•°ï¼ˆå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’è¿›æ–¹æ³•ä¸­ï¼‰ã€‚</p><p>ä½¿ç”¨ Lambda è¡¨è¾¾å¼å¯ä»¥ä½¿ä»£ç å˜çš„æ›´åŠ ç®€æ´ç´§å‡‘ã€‚</p><h3 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h3><ul><li><strong>å¯é€‰ç±»å‹å£°æ˜ï¼š</strong>ä¸éœ€è¦å£°æ˜å‚æ•°ç±»å‹ï¼Œç¼–è¯‘å™¨å¯ä»¥ç»Ÿä¸€è¯†åˆ«å‚æ•°å€¼ã€‚</li><li><strong>å¯é€‰çš„å‚æ•°åœ†æ‹¬å·ï¼š</strong>ä¸€ä¸ªå‚æ•°æ— éœ€å®šä¹‰åœ†æ‹¬å·ï¼Œä½†å¤šä¸ªå‚æ•°éœ€è¦å®šä¹‰åœ†æ‹¬å·ã€‚</li><li><strong>å¯é€‰çš„å¤§æ‹¬å·ï¼š</strong>å¦‚æœä¸»ä½“åŒ…å«äº†ä¸€ä¸ªè¯­å¥ï¼Œå°±ä¸éœ€è¦ä½¿ç”¨å¤§æ‹¬å·ã€‚</li><li><strong>å¯é€‰çš„è¿”å›å…³é”®å­—ï¼š</strong>å¦‚æœä¸»ä½“åªæœ‰ä¸€ä¸ªè¡¨è¾¾å¼è¿”å›å€¼åˆ™ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¿”å›å€¼ï¼Œå¤§æ‹¬å·éœ€è¦æŒ‡å®šæ˜è¡¨è¾¾å¼è¿”å›äº†ä¸€ä¸ªæ•°å€¼ã€‚</li></ul><h3 id="ä¹¦å†™æ ¼å¼"><a href="#ä¹¦å†™æ ¼å¼" class="headerlink" title="ä¹¦å†™æ ¼å¼"></a>ä¹¦å†™æ ¼å¼</h3><p><strong>-&gt;</strong>    æ“ä½œç¬¦å°†lambdaè¡¨è¾¾å¼åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†            å·¦ä¾§ï¼šlambdaè¡¨è¾¾å¼çš„å‚æ•°åˆ—è¡¨            å³ä¾§ï¼šlambdaè¡¨è¾¾å¼æ‰€æ‰§è¡Œçš„åŠŸèƒ½å³lambdaä½“</p><p><strong>1.æ— å‚æ•°ï¼Œæ— è¿”å›å€¼</strong></p><p>æ— å‚æ•°ä»è¦æä¾›ç©ºæ‹¬å·ï¼Œå°±åƒæ— æ–¹æ³•å‚æ•°ä¸€æ ·ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">() -&gt; System.out.println(<span class="string">"Hello world"</span>);</span><br></pre></td></tr></tbody></table></figure><p><strong>2.ä¸€ä¸ªå‚æ•°ï¼Œæ— è¿”å›å€¼</strong></p><p>å½“å‚æ•°ç±»å‹å¯æ¨å¯¼å¾—å‡ºæ—¶å°æ‹¬å·å¯ä»¥çœç•¥</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(x) -&gt; System.out.println(x);</span><br><span class="line">x -&gt; System.out.println(x);</span><br></pre></td></tr></tbody></table></figure><p><strong>3.å¤šä¸ªå‚æ•°ï¼Œæœ‰è¿”å›å€¼</strong></p><p>å½“å‚æ•°ç±»å‹å¯æ¨å¯¼å¾—å‡ºæ—¶å‚æ•°ç±»å‹å¯çœç•¥</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(x, y) -&gt; x â€“ y ;</span><br><span class="line">(<span class="keyword">int</span> x, <span class="keyword">int</span> y) -&gt; x + y ;  </span><br></pre></td></tr></tbody></table></figure><p><strong>4.åªæœ‰ä¸€æ¡è¯­å¥</strong></p><p>å¤§æ‹¬å·å’Œreturnéƒ½å¯ä»¥çœç•¥</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(x, y) -&gt; x â€“ y ;</span><br></pre></td></tr></tbody></table></figure><p><strong>5.æœ‰å¤šæ¡è¯­å¥</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(x,y) -&gt; {</span><br><span class="line">System.out.println(<span class="string">"å‡½æ•°å¼æ¥å£"</span>);</span><br><span class="line"><span class="keyword">return</span> x - y ;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="å‡½æ•°å¼æ¥å£"><a href="#å‡½æ•°å¼æ¥å£" class="headerlink" title="å‡½æ•°å¼æ¥å£"></a>å‡½æ•°å¼æ¥å£</h3><p>åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼Œéœ€è¦è¿™ç§æ¥å£çš„å¯¹è±¡æ—¶ï¼Œå°±å¯ä»¥æä¾›ä¸€ä¸ªlambdaè¡¨è¾¾å¼ã€‚è¿™ç§æ¥å£ç§°ä¸ºå‡½æ•°å¼æ¥å£ã€‚</p><p><strong>æ˜¯lambdaè¡¨è¾¾å¼ä½¿ç”¨çš„å‰æ</strong></p><h3 id="æ–¹æ³•å¼•ç”¨"><a href="#æ–¹æ³•å¼•ç”¨" class="headerlink" title="æ–¹æ³•å¼•ç”¨"></a>æ–¹æ³•å¼•ç”¨</h3><p><strong>åªæœ‰å½“lambdaè¡¨è¾¾å¼çš„ä½“åªè°ƒç”¨ä¸€ä¸ªæ–¹æ³•è€Œä¸åšå…¶ä»–æ“ä½œæ—¶ï¼Œæ‰èƒ½æŠŠlambdaè¡¨è¾¾å¼é‡å†™ä¸ºæ–¹æ³•å¼•ç”¨</strong></p><p> <strong>å¯¹è±¡::å®ä¾‹æ–¹æ³•</strong>    objectName::instanceMethod                     å°†lambdaçš„å‚æ•°å½“åšæ–¹æ³•çš„å‚æ•°ä½¿ç”¨</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Consumer&lt;String&gt; sc = System.out::println;</span><br><span class="line"><span class="comment">//ç­‰æ•ˆ</span></span><br><span class="line">Consumer&lt;String&gt; sc2 = (x) -&gt; System.out.println(x);</span><br><span class="line">sc.accept(<span class="string">"618, ç‹‚æ¬¢happy"</span>);</span><br></pre></td></tr></tbody></table></figure><p><strong>ç±»::é™æ€æ–¹æ³•</strong>        ClassName::staticMethod                             å°†lambdaçš„å‚æ•°å½“åšæ–¹æ³•çš„å‚æ•°ä½¿ç”¨</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Function&lt;Integer, String&gt; sf = String::valueOf;</span><br><span class="line"><span class="comment">//ç­‰æ•ˆ</span></span><br><span class="line">Function&lt;Integer, String&gt; sf2 = (x) -&gt; String.valueOf(x);</span><br><span class="line">String apply1 = sf.apply(<span class="number">61888</span>);</span><br></pre></td></tr></tbody></table></figure><p><strong>ç±»::å®ä¾‹æ–¹æ³•</strong>       ClassName::instanceMethod                        å°†lambdaçš„ç¬¬ä¸€ä¸ªå‚æ•°å½“åšæ–¹æ³•çš„è°ƒç”¨è€…ï¼Œå…¶ä»–çš„å‚æ•°ä½œä¸ºæ–¹æ³•çš„å‚æ•°ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">BiPredicate&lt;String, String&gt; sbp = String::equals;</span><br><span class="line"><span class="comment">//ç­‰æ•ˆ</span></span><br><span class="line">BiPredicate&lt;String, String&gt; sbp2 = (x, y) -&gt; x.equals(y);</span><br><span class="line"><span class="keyword">boolean</span> test = sbp.test(<span class="string">"a"</span>, <span class="string">"A"</span>);</span><br></pre></td></tr></tbody></table></figure><h3 id="æ„é€ å™¨å¼•ç”¨"><a href="#æ„é€ å™¨å¼•ç”¨" class="headerlink" title="æ„é€ å™¨å¼•ç”¨"></a>æ„é€ å™¨å¼•ç”¨</h3><p>ä¸æ–¹æ³•å¼•ç”¨ç±»ä¼¼ï¼Œä¸è¿‡æ–¹æ³•åä¸ºnew</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] :: <span class="keyword">new</span><span class="comment">//ç­‰ä»·x -&gt; new int[x]</span></span><br></pre></td></tr></tbody></table></figure><h3 id="å˜é‡ä½œç”¨åŸŸ"><a href="#å˜é‡ä½œç”¨åŸŸ" class="headerlink" title="å˜é‡ä½œç”¨åŸŸ"></a>å˜é‡ä½œç”¨åŸŸ</h3><p>lambda è¡¨è¾¾å¼åªèƒ½å¼•ç”¨æ ‡è®°äº† final çš„å¤–å±‚å±€éƒ¨å˜é‡ï¼Œè¿™å°±æ˜¯è¯´ä¸èƒ½åœ¨ lambda å†…éƒ¨ä¿®æ”¹å®šä¹‰åœ¨åŸŸå¤–çš„å±€éƒ¨å˜é‡ï¼Œå¦åˆ™ä¼šç¼–è¯‘é”™è¯¯ã€‚</p><p>lambda è¡¨è¾¾å¼çš„å±€éƒ¨å˜é‡å¯ä»¥ä¸ç”¨å£°æ˜ä¸º finalï¼Œä½†æ˜¯å¿…é¡»ä¸å¯è¢«åé¢çš„ä»£ç ä¿®æ”¹ï¼ˆå³éšæ€§çš„å…·æœ‰ final çš„è¯­ä¹‰ï¼‰</p><p>åœ¨ Lambda è¡¨è¾¾å¼å½“ä¸­ä¸å…è®¸å£°æ˜ä¸€ä¸ªä¸å±€éƒ¨å˜é‡åŒåçš„å‚æ•°æˆ–è€…å±€éƒ¨å˜é‡ã€‚</p><h2 id="å†…éƒ¨ç±»"><a href="#å†…éƒ¨ç±»" class="headerlink" title="å†…éƒ¨ç±»"></a>å†…éƒ¨ç±»</h2><h3 id="ç®€ä»‹-1"><a href="#ç®€ä»‹-1" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p><strong>å†…éƒ¨ç±»ï¼š</strong> æ‰€è°“å†…éƒ¨ç±»å°±æ˜¯åœ¨ä¸€ä¸ªç±»å†…éƒ¨è¿›è¡Œå…¶ä»–ç±»ç»“æ„çš„åµŒå¥—æ“ä½œã€‚å¹¿ä¹‰ä¸Šæˆ‘ä»¬å°†å†…éƒ¨ç±»åˆ†ä¸ºå››ç§ï¼šæˆå‘˜å†…éƒ¨ç±»ã€é™æ€å†…éƒ¨ç±»ã€å±€éƒ¨ï¼ˆæ–¹æ³•ï¼‰å†…éƒ¨ç±»ã€åŒ¿åå†…éƒ¨ç±»ã€‚</p><p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨ï¼Ÿ</strong></p><p>åœ¨å®é™…é—®é¢˜ä¸­æˆ‘ä»¬ä¼šé‡åˆ°ä¸€äº›æ¥å£æ— æ³•è§£å†³æˆ–éš¾ä»¥è§£å†³çš„é—®é¢˜ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å†…éƒ¨ç±»ç»§æ‰¿æŸä¸ªå…·ä½“çš„æˆ–æŠ½è±¡çš„ç±»ï¼Œ<strong>é—´æ¥è§£å†³ç±»æ— æ³•å¤šç»§æ‰¿å¼•èµ·çš„ä¸€ç³»åˆ—é—®é¢˜</strong>ã€‚</p><p>ä¾‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Outer</span></span>{</span><br><span class="line">    <span class="keyword">private</span> String str =<span class="string">"å¤–éƒ¨ç±»ä¸­çš„å­—ç¬¦ä¸²"</span>;</span><br><span class="line">    <span class="comment">//************************** </span></span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸€ä¸ªå†…éƒ¨ç±»</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Inner</span></span>{</span><br><span class="line">        <span class="keyword">private</span> String inStr= <span class="string">"å†…éƒ¨ç±»ä¸­çš„å­—ç¬¦ä¸²"</span>;</span><br><span class="line">        <span class="comment">//å®šä¹‰ä¸€ä¸ªæ™®é€šæ–¹æ³•</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>{</span><br><span class="line">            <span class="comment">//è°ƒç”¨å¤–éƒ¨ç±»çš„strå±æ€§</span></span><br><span class="line">            System.out.println(str);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//************************** </span></span><br><span class="line">    <span class="comment">//åœ¨å¤–éƒ¨ç±»ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•è´Ÿè´£äº§ç”Ÿå†…éƒ¨ç±»å¯¹è±¡å¹¶è°ƒç”¨print()æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="comment">//å†…éƒ¨ç±»å¯¹è±¡</span></span><br><span class="line">        Inner in = <span class="keyword">new</span> Inner();</span><br><span class="line">        <span class="comment">//å†…éƒ¨ç±»å¯¹è±¡æä¾›çš„print</span></span><br><span class="line">        in.print();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">        <span class="comment">//åˆ›å»ºå¤–éƒ¨ç±»å¯¹è±¡</span></span><br><span class="line">        Outer out = <span class="keyword">new</span> Outer();</span><br><span class="line">        <span class="comment">//å¤–éƒ¨ç±»æ–¹æ³•</span></span><br><span class="line">        out.fun();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="ç‰¹æ€§-1"><a href="#ç‰¹æ€§-1" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h3><ol><li><p>å†…éƒ¨ç±»ä¸å¤–éƒ¨ç±»å¯ä»¥æ–¹ä¾¿çš„è®¿é—®å½¼æ­¤çš„ç§æœ‰åŸŸï¼ˆåŒ…æ‹¬ç§æœ‰æ–¹æ³•ã€ç§æœ‰å±æ€§ï¼‰ã€‚</p></li><li><p>å†…éƒ¨ç±»æ˜¯å¦å¤–ä¸€ç§å°è£…ï¼Œå¯¹å¤–éƒ¨çš„å…¶ä»–ç±»éšè—ã€‚</p></li><li><p>å†…éƒ¨ç±»å¯ä»¥å®ç°javaçš„å•ç»§æ‰¿å±€é™ã€‚</p></li><li><p>å†…éƒ¨ç±»å¯ä»¥ç”¨å¤šä¸ªå®ä¾‹ï¼Œæ¯ä¸ªå®ä¾‹éƒ½æœ‰è‡ªå·±çš„çŠ¶æ€ä¿¡æ¯ï¼Œå¹¶ä¸”ä¸å…¶ä»–å¤–å›´å¯¹è±¡çš„ä¿¡æ¯ç›¸äº’ç‹¬ç«‹ã€‚</p></li><li><p>å†…éƒ¨ç±»å¹¶æ²¡æœ‰ä»¤äººè¿·æƒ‘çš„â€œis-aâ€å…³ç³»ï¼Œä»–å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å®ä½“ã€‚</p></li><li><p>åˆ›å»ºå†…éƒ¨ç±»å¯¹è±¡çš„æ—¶åˆ»å¹¶ä¸ä¾èµ–äºå¤–å›´ç±»å¯¹è±¡çš„åˆ›å»ºã€‚</p></li><li><pre><code class="java">class A {    private String name = "Aç±»çš„ç§æœ‰åŸŸ";    public String getName() {        return name;    }}class B {    private int age = 20;    public int getAge() {        return age;    }}class Outter {    private class InnerClassA extends A {        public String name() {            return super.getName();    }}    private class InnerClassB extends B {        public int age() {            return super.getAge();    }}    public String name() {        return new InnerClassA().name();    }    public int age() {        return new InnerClassB().age();    }}public class Test2 {        public static void main(String[] args) {            Outter outter = new Outter();            System.out.println(outter.name());            System.out.println(outter.age());        }}</code></pre></li></ol><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p><a href="https://blog.csdn.net/weixin_42762133/article/details/82890555">https://blog.csdn.net/weixin_42762133/article/details/82890555</a></p><h2 id="å¼‚å¸¸"><a href="#å¼‚å¸¸" class="headerlink" title="å¼‚å¸¸"></a>å¼‚å¸¸</h2><p>å¾…ç¼–è¾‘â€¦â€¦..</p>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaå¤ä¹ ç¬¬äºŒæ¬¡</title>
      <link href="/2021/05/21/java%E5%A4%8D%E4%B9%A0%E7%AC%AC%E4%BA%8C%E6%AC%A1/"/>
      <url>/2021/05/21/java%E5%A4%8D%E4%B9%A0%E7%AC%AC%E4%BA%8C%E6%AC%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="javaå¤ä¹ ç¬¬äºŒæ¬¡"><a href="#javaå¤ä¹ ç¬¬äºŒæ¬¡" class="headerlink" title="javaå¤ä¹ ç¬¬äºŒæ¬¡"></a>javaå¤ä¹ ç¬¬äºŒæ¬¡</h1><h2 id="ç»§æ‰¿ï¼ˆextendsï¼‰"><a href="#ç»§æ‰¿ï¼ˆextendsï¼‰" class="headerlink" title="ç»§æ‰¿ï¼ˆextendsï¼‰"></a>ç»§æ‰¿ï¼ˆextendsï¼‰</h2><p>è¡¨æ˜æ­£åœ¨æ„é€ çš„æ–°ç±»æ´¾ç”Ÿäºä¸€ä¸ªå·²å­˜åœ¨çš„ç±»ã€‚ç§°ä¸ºè¶…ç±»ã€åŸºç±»æˆ–çˆ¶ç±»ï¼Œæ–°ç±»ç§°ä¸ºå­ç±»ã€‚</p><p>åº”å°†æœ€ä¸€èˆ¬çš„æ–¹æ³•æ”¾åœ¨è¶…ç±»ä¸­ï¼Œæ›´ä¸€èˆ¬çš„æ–¹æ³•æ”¾åœ¨å­ç±»ä¸­ã€‚</p><h3 id="è¦†ç›–æ–¹æ³•"><a href="#è¦†ç›–æ–¹æ³•" class="headerlink" title="è¦†ç›–æ–¹æ³•"></a>è¦†ç›–æ–¹æ³•</h3><p>åœ¨å­ç±»ä¸­ï¼Œå¯ä»¥å¢åŠ å­—æ®µã€æ–¹æ³•æˆ–è¦†ç›–è¶…ç±»çš„æ–¹æ³•ï¼Œä½†ç»§æ‰¿ä¸ä¼šåˆ é™¤ä»»ä½•å­—æ®µæˆ–æ–¹æ³•ã€‚</p><p>è°ƒç”¨è¶…ç±»æ–¹æ³•/æ„é€ å™¨ä½¿ç”¨å…³é”®å­—superã€‚</p><h3 id="å¤šæ€"><a href="#å¤šæ€" class="headerlink" title="å¤šæ€"></a>å¤šæ€</h3><p>æŒ‡å¯¹è±¡å˜é‡æ˜¯å¤šæ€çš„ï¼ŒæŒ‡è¶…ç±»çš„ä»»ä½•å¯¹è±¡çš„ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨å­ç±»å¯¹è±¡æ›¿æ¢ã€‚ï¼ˆå­ç±»å¯¹è±¡å…·æœ‰å­ç±»å’Œè¶…ç±»çš„æ€§è´¨ï¼Œä½†è¶…ç±»å¯¹è±¡ä¸ä¸€å®šå…·æœ‰å­ç±»çš„æ€§è´¨ï¼‰</p><h3 id="æ–¹æ³•è°ƒç”¨"><a href="#æ–¹æ³•è°ƒç”¨" class="headerlink" title="æ–¹æ³•è°ƒç”¨"></a>æ–¹æ³•è°ƒç”¨</h3><p>1.ç¼–è¯‘å™¨æŸ¥çœ‹å¯¹è±¡çš„ç±»å‹å£°æ˜å’Œæ–¹æ³•åã€‚ä¼šåˆ—ä¸¾æ‰€æœ‰åŒåæ–¹æ³•ã€‚</p><p>2.ç¡®å®šæ–¹æ³•è°ƒç”¨çš„å‚æ•°è¿›è¡ŒåŒ¹é…ã€‚</p><p>3.å¦‚æœæ–¹æ³•è¢«privateã€finalã€staticä¿®é¥°ï¼Œåˆ™ç¼–è¯‘å™¨èƒ½å‡†ç¡®è°ƒç”¨ï¼ˆé™æ€ç»‘å®šï¼‰ã€‚</p><p>4.é‡‡ç”¨åŠ¨æ€ç»‘å®šè°ƒç”¨æ–¹æ³•æ—¶ï¼Œè™šæ‹Ÿæœºä¼šè°ƒç”¨ä¸æ‰€å¼•ç”¨å¯¹è±¡å®é™…ç±»å‹å¯¹åº”çš„æ–¹æ³•ã€‚ä¼˜å…ˆè°ƒç”¨å­ç±»çš„ï¼Œè‹¥å­ç±»æœªå®šä¹‰ï¼Œåˆ™è°ƒç”¨è¶…ç±»æ–¹æ³•ã€‚</p><h3 id="é˜»æ­¢ç»§æ‰¿ï¼ˆfinalï¼‰"><a href="#é˜»æ­¢ç»§æ‰¿ï¼ˆfinalï¼‰" class="headerlink" title="é˜»æ­¢ç»§æ‰¿ï¼ˆfinalï¼‰"></a>é˜»æ­¢ç»§æ‰¿ï¼ˆfinalï¼‰</h3><p>é˜»æ­¢ç»§æ‰¿ç±»ï¼šå°†ç±»å£°æ˜ä¸ºfinal</p><p>é˜»æ­¢å­ç±»è¦†ç›–æ–¹æ³•ï¼šå°†æ–¹æ³•å£°æ˜ä¸ºfinal</p><h3 id="å¼ºåˆ¶ç±»å‹è½¬æ¢"><a href="#å¼ºåˆ¶ç±»å‹è½¬æ¢" class="headerlink" title="å¼ºåˆ¶ç±»å‹è½¬æ¢"></a>å¼ºåˆ¶ç±»å‹è½¬æ¢</h3><p>å°†å­ç±»å¯¹è±¡èµ‹å€¼ç»™è¶…ç±»æ˜¯å¯ä»¥çš„ï¼Œä½†å°†è¶…ç±»å¯¹è±¡èµ‹å€¼ç»™å­ç±»å¿…é¡»è¿›è¡Œå¼ºè½¬ã€‚<strong>åœ¨è¿›è¡Œå¼ºè½¬å‰éœ€ä½¿ç”¨instanceofæ“ä½œç¬¦åˆ¤æ–­æ˜¯å¦èƒ½æˆåŠŸå¼ºè½¬ã€‚</strong></p><h3 id="æŠ½è±¡ç±»"><a href="#æŠ½è±¡ç±»" class="headerlink" title="æŠ½è±¡ç±»"></a>æŠ½è±¡ç±»</h3><p>ä½äºä¸Šå±‚çš„ç±»æ›´å…·æœ‰ä¸€èˆ¬æ€§ï¼Œæ›´æŠ½è±¡ã€‚å¯ä½¿ç”¨abstractå…³é”®å­—å°†ç±»å£°æ˜ä¸ºæŠ½è±¡ã€‚</p><p><strong>åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæŠ½è±¡æ–¹æ³•çš„ç±»æœ¬èº«å¿…é¡»å£°æ˜ä¸ºæŠ½è±¡ã€‚</strong></p><p>æŠ½è±¡æ–¹æ³•æ²¡æœ‰æ–¹æ³•ä½“ã€‚</p><p>æŠ½è±¡ç±»å¯åŒ…å«å…·ä½“æ–¹æ³•ã€‚ï¼ˆä¸å»ºè®®è¿™æ ·åšï¼‰</p><p>æŠ½è±¡ç±»ä¸èƒ½å®ä¾‹åŒ–ï¼Œä½†å¯ä»¥å®šä¹‰ä¸€ä¸ªæŠ½è±¡ç±»çš„å¯¹è±¡å˜é‡ï¼Œä½†è¿™ä¸ªå˜é‡åªèƒ½å¼•ç”¨éæŠ½è±¡å­ç±»çš„å®ä¾‹ã€‚</p><h3 id="objectç±»ï¼ˆæ‰€æœ‰ç±»çš„è¶…ç±»ï¼‰"><a href="#objectç±»ï¼ˆæ‰€æœ‰ç±»çš„è¶…ç±»ï¼‰" class="headerlink" title="objectç±»ï¼ˆæ‰€æœ‰ç±»çš„è¶…ç±»ï¼‰"></a>objectç±»ï¼ˆæ‰€æœ‰ç±»çš„è¶…ç±»ï¼‰</h3><p>javaä¸­çš„æ¯ä¸ªç±»éƒ½ç»§æ‰¿objectç±»ã€‚</p><p>å¯ä»¥ç”¨objectç±»å‹çš„å˜é‡å¼•ç”¨ä»»ä½•ç±»å‹çš„å¯¹è±¡ã€‚</p><h4 id="equalsæ–¹æ³•ï¼ˆbooleanï¼‰"><a href="#equalsæ–¹æ³•ï¼ˆbooleanï¼‰" class="headerlink" title="equalsæ–¹æ³•ï¼ˆbooleanï¼‰"></a>equalsæ–¹æ³•ï¼ˆbooleanï¼‰</h4><p>objectç±»ä¸­çš„equalsæ–¹æ³•ç”¨äºæ£€æµ‹ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ç­‰äºå¦ä¸€ä¸ªå¯¹è±¡ã€‚ï¼ˆç¡®å®šæ˜¯å¦å¼•ç”¨ç›¸ç­‰ï¼‰</p><p>å¦‚æœæ£€æµ‹ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦æ‹¥æœ‰ç›¸ç­‰çš„çŠ¶æ€ï¼Œåˆ™éœ€é‡å†™equalsæ–¹æ³•ã€‚ï¼ˆè‹¥åœ¨å­ç±»ä¸­åˆ™éœ€å…ˆè°ƒç”¨è¶…ç±»çš„æ–¹æ³•ï¼‰</p><p>æ€§è´¨ï¼šè‡ªåã€å¯¹ç§°ã€ä¼ é€’ã€ä¸€è‡´</p><h4 id="hashCodeï¼ˆæ•£åˆ—ç ï¼‰æ–¹æ³•ï¼ˆintï¼‰"><a href="#hashCodeï¼ˆæ•£åˆ—ç ï¼‰æ–¹æ³•ï¼ˆintï¼‰" class="headerlink" title="hashCodeï¼ˆæ•£åˆ—ç ï¼‰æ–¹æ³•ï¼ˆintï¼‰"></a>hashCodeï¼ˆæ•£åˆ—ç ï¼‰æ–¹æ³•ï¼ˆintï¼‰</h4><p>æ˜¯ç”±å¯¹è±¡å¯¼å‡ºçš„ä¸€ä¸ªæ•´å‹å€¼ã€‚æ— è§„å¾‹ã€‚ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡æ•£åˆ—ç åŸºæœ¬ä¸åŒã€‚</p><p>æ­¤æ–¹æ³•å®šä¹‰åœ¨objectç±»ä¸­ï¼Œå› æ­¤æ¯ä¸ªå¯¹è±¡éƒ½æœ‰é»˜è®¤çš„æ•£åˆ—ç ï¼Œå…¶å€¼ç”±å¯¹è±¡çš„å­˜å‚¨åœ°å€å¾—å‡ºã€‚</p><p>å­—ç¬¦ä¸²çš„æ•£åˆ—ç æ˜¯ç”±å†…å®¹å¯¼å‡ºçš„ï¼Œè€Œå­—ç¬¦ä¸²æ„å»ºå™¨ç”±å­˜å‚¨åœ°å€å¯¼å‡ºã€‚</p><h4 id="toStringæ–¹æ³•"><a href="#toStringæ–¹æ³•" class="headerlink" title="toStringæ–¹æ³•"></a>toStringæ–¹æ³•</h4><p>objectç±»ä¸­å®šä¹‰ï¼Œè¿”å›å¯¹è±¡çš„ç±»åå’Œæ•£åˆ—ç ã€‚</p><p>å¯åœ¨ç±»ä¸­é‡å†™æ‰“å°å¯¹è±¡çŠ¶æ€ã€‚</p><h3 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h3><p>**æ¥å£ä¸æ˜¯ç±»ï¼Œè€Œæ˜¯å¯¹å¸Œæœ›ç¬¦åˆè¿™ä¸ªæ¥å£ç±»çš„ä¸€ç»„éœ€æ±‚ **</p><p>æ‰€æœ‰æ–¹æ³•è‡ªåŠ¨ä¸ºpublic</p><p>**ç»å¯¹ä¸ä¼šæœ‰å®ä¾‹å­—æ®µ **</p><p>å¯ä»¥å®šä¹‰æ–¹æ³•ï¼ˆæ— æ–¹æ³•ä½“ï¼‰å¯ä»¥å®šä¹‰å¸¸é‡ã€‚</p><p>ä¸èƒ½æ„é€ æ¥å£çš„å¯¹è±¡ï¼Œå´èƒ½å£°æ˜æ¥å£çš„å˜é‡ï¼Œå¿…é¡»å¼•ç”¨å®ç°äº†è¿™ä¸ªæ¥å£çš„ç±»çš„å¯¹è±¡ã€‚</p><p>å¯ä½¿ç”¨extendsæ‰©å±•æ¥å£ã€‚</p><h3 id="æ¥å£ä¸æŠ½è±¡ç±»"><a href="#æ¥å£ä¸æŠ½è±¡ç±»" class="headerlink" title="æ¥å£ä¸æŠ½è±¡ç±»"></a>æ¥å£ä¸æŠ½è±¡ç±»</h3><p>ä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼Œä½†å¯ä»¥å®ç°å¤šä¸ªæ¥å£ã€‚</p><p>å¾…ç¼–è¾‘â€¦â€¦</p>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaå¤ä¹ ç¬¬ä¸€æ¬¡</title>
      <link href="/2021/05/21/java%E5%A4%8D%E4%B9%A0%E7%AC%AC%E4%B8%80%E6%AC%A1/"/>
      <url>/2021/05/21/java%E5%A4%8D%E4%B9%A0%E7%AC%AC%E4%B8%80%E6%AC%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="java-å¤ä¹ ç¬¬ä¸€æ¬¡"><a href="#java-å¤ä¹ ç¬¬ä¸€æ¬¡" class="headerlink" title="java  å¤ä¹ ç¬¬ä¸€æ¬¡"></a>java  å¤ä¹ ç¬¬ä¸€æ¬¡</h1><h2 id="ç±»å’Œå¯¹è±¡"><a href="#ç±»å’Œå¯¹è±¡" class="headerlink" title="ç±»å’Œå¯¹è±¡"></a>ç±»å’Œå¯¹è±¡</h2><h3 id="ç±»é—´å…³ç³»"><a href="#ç±»é—´å…³ç³»" class="headerlink" title="ç±»é—´å…³ç³»"></a>ç±»é—´å…³ç³»</h3><ul><li>ä¾èµ–</li></ul><p>å³ä½¿ç”¨ä¸€ä¸ªç±»æ—¶éœ€è¦è®¿é—®å¦ä¸€ä¸ªç±»çš„å¯¹è±¡</p><p>e.g.  è®¢å•ç±»éœ€è¦è®¿é—®è´¦æˆ·å¯¹è±¡æŸ¥çœ‹ä¿¡ç”¨çŠ¶æ€</p><ul><li>èšåˆ</li></ul><p>ç±»Açš„å¯¹è±¡åŒ…å«ä¸€äº›ç±»Bçš„å¯¹è±¡</p><ul><li>ç»§æ‰¿</li></ul><p>å­ç±»ç»§æ‰¿çˆ¶ç±»</p><h3 id="è‡ªå®šä¹‰ç±»"><a href="#è‡ªå®šä¹‰ç±»" class="headerlink" title="è‡ªå®šä¹‰ç±»"></a>è‡ªå®šä¹‰ç±»</h3><h4 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h4><ul><li> finalå®ä¾‹å­—æ®µ </li></ul><blockquote><ul><li><p>è¿™æ ·çš„å­—æ®µå¿…é¡»åœ¨æ„é€ å¯¹è±¡æ—¶åˆå§‹åŒ–å¹¶ä¸èƒ½å†ä¿®æ”¹ã€‚</p></li><li><p>æ­¤ä¿®é¥°ç¬¦å¯¹äºç±»å‹ä¸ºåŸºæœ¬ç±»å‹æˆ–ä¸å¯å˜ç±»çš„å­—æ®µå°¤å…¶æœ‰ç”¨ã€‚</p></li></ul></blockquote><ul><li><p>é™æ€å­—æ®µ </p><blockquote><ul><li><p>å°†ä¸€ä¸ªå­—æ®µå®šä¹‰ä¸ºstaticï¼Œåˆ™æ¯ä¸ªç±»åªæœ‰ä¸€ä¸ªè¿™æ ·çš„å­—æ®µï¼Œå³ä½¿æ²¡æœ‰å¯¹è±¡ï¼Œé™æ€å­—æ®µä¹Ÿå­˜åœ¨ã€‚ï¼ˆå±äºç±»è€Œä¸å±äºå•ä¸ªå¯¹è±¡ï¼‰</p></li><li><p>è€Œå¯¹äºéé™æ€çš„å®ä¾‹å­—æ®µï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªå·±çš„ä¸€ä¸ªå‰¯æœ¬ã€‚ï¼ˆæ‰€æœ‰ç±»çš„å¯¹è±¡çš„è¿™ä¸ªå­—æ®µéƒ½æ˜¯ä¸€ä¸ª/ç±»çš„æ¯ä¸ªå¯¹è±¡éƒ½æœ‰å„è‡ªçš„ï¼‰</p></li></ul></blockquote></li><li><p>åˆå§‹åŒ–æ•°æ®å­—æ®µçš„æ–¹æ³•</p><blockquote><p>1.åœ¨æ„é€ å™¨ä¸­è®¾ç½®å€¼</p><p>2.åœ¨å£°æ˜ä¸­èµ‹å€¼</p><p>3.åˆå§‹åŒ–å—: ä¸€ä¸ªç±»çš„å£°æ˜ä¸­å¯ä»¥åŒ…å«ä»»æ„å¤šä¸ªä»£ç å—ã€‚åªè¦æ„é€ ç±»çš„å¯¹è±¡ï¼Œè¿™äº›å—å°±ä¼šè¢«æ‰§è¡Œã€‚</p></blockquote></li></ul><h4 id="æ„é€ å™¨"><a href="#æ„é€ å™¨" class="headerlink" title="æ„é€ å™¨"></a>æ„é€ å™¨</h4><ul><li><p>ä¸ç±»åŒå</p></li><li><p>ä¸€ä¸ªç±»å¯ä»¥æœ‰å¤šä¸ªæ„é€ å™¨ï¼ˆå‚æ•°ä¸åŒï¼‰ï¼ˆé‡è½½ï¼‰</p></li><li><p>æ„é€ å™¨å¯ä»¥æ²¡æœ‰å‚æ•°æˆ–æœ‰å¤šä¸ªå‚æ•°</p></li><li><p>æ²¡æœ‰è¿”å›å€¼(å…¶å®è¿”å›å€¼å°±æ˜¯æ‰€åˆ›å»ºçš„ç±»çš„å¯¹è±¡)</p></li><li><p>å¸¸ä¸newæ“ä½œç¬¦ä¸€èµ·è°ƒç”¨</p></li><li><p>æ— å‚æ•°çš„æ„é€ å™¨ï¼šåˆ›å»ºå¯¹è±¡æ—¶ï¼Œå¯¹è±¡çŠ¶æ€ä¼šè®¾ç½®ä¸ºé€‚å½“çš„é»˜è®¤å€¼ã€‚</p></li><li><p>ä½¿ç”¨thiså…³é”®å­—è°ƒç”¨åŒç±»çš„å¦ä¸€ä¸ªæ„é€ å™¨</p></li></ul><h4 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h4><ul><li><p>æ˜¾å¼å‚æ•°å’Œéšå¼å‚æ•°</p><blockquote><ul><li><p>åœ¨æ–¹æ³•ååçš„æ‹¬å·ä¸­å£°æ˜çš„æ˜¯æ˜¾å¼å‚æ•°</p></li><li><p>åœ¨æ–¹æ³•ä¸­ä½¿ç”¨çš„å¯¹è±¡çš„å±æ€§ï¼ˆæ–¹æ³•è°ƒç”¨çš„ç›®æ ‡æˆ–æ¥æ”¶è€…ï¼‰æ˜¯éšå¼å‚æ•°ã€‚å…³é”®å­—thisæŒ‡ç¤ºéšå¼å‚æ•°ã€‚</p></li></ul></blockquote></li><li><p>é™æ€æ–¹æ³•</p><blockquote><p>è°ƒç”¨æ—¶å¹¶ä¸ä½¿ç”¨ä»»ä½•ç±»çš„å¯¹è±¡ï¼Œ æ²¡æœ‰éšå¼å‚æ•°ï¼Œä¸èƒ½è®¿é—®å¯¹è±¡çš„å®ä¾‹å­—æ®µï¼Œä¸èƒ½åœ¨å¯¹è±¡ä¸Šæ‰§è¡Œæ“ä½œã€‚</p><p>å¯è®¿é—®é™æ€å­—æ®µï¼Œç”¨ç±»ç›´æ¥è°ƒç”¨ï¼Œé™æ€æ–¹æ³•å’Œé™æ€æ•°æ®æˆå‘˜ä¼šéšç€ç±»çš„å®šä¹‰è€Œè¢«åˆ†é…å’Œè£…è½½å…¥å†…å­˜ä¸­ã€‚</p></blockquote></li><li><p>æ™®é€šæ–¹æ³•</p><blockquote><ul><li><p>æ—¢å¯ä»¥è®¿é—®é™æ€æ•°æ®æˆå‘˜ åˆå¯ä»¥è®¿é—®éé™æ€æ•°æ®æˆå‘˜</p></li><li><p>åªæœ‰åœ¨ç±»çš„å¯¹è±¡åˆ›å»ºæ—¶åœ¨å¯¹è±¡çš„å†…å­˜ä¸­æ‰æœ‰è¿™ä¸ªæ–¹æ³•çš„ä»£ç æ®µ</p></li><li><p>åªèƒ½ç”¨æ„é€ çš„ç±»çš„å¯¹è±¡è°ƒç”¨æ–¹æ³•</p></li></ul></blockquote></li></ul><ul><li><p>å·¥å‚æ–¹æ³•</p><blockquote><ul><li><p>ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•æ„é€ å¯¹è±¡</p></li><li><p>æ— æ³•å‘½åæ„é€ å™¨ï¼ˆæ„é€ å™¨çš„åå­—å¿…é¡»ä¸ç±»åç›¸åŒï¼Œä½†å¸Œæœ›æœ‰ä¸¤ä¸ªä¸åŒçš„åå­—æ—¶ï¼‰</p></li><li><p>ä½¿ç”¨æ„é€ å™¨æ—¶æ— æ³•æ”¹å˜æ„é€ å¯¹è±¡çš„ç±»å‹</p></li></ul></blockquote></li></ul><h2 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h2><p>æƒ³è¦ä½¿ç”¨å¯¹è±¡ï¼Œå¿…é¡»é€šè¿‡æ„é€ å™¨æ„é€ å¯¹è±¡å¹¶æŒ‡å®šåˆå§‹çŠ¶æ€ï¼Œå†å¯¹å¯¹è±¡åº”ç”¨æ–¹æ³•ã€‚</p><p>å¯ç”¨varå…³é”®å­—å£°æ˜å±€éƒ¨å˜é‡ï¼Œæ— éœ€æŒ‡å®šç±»å‹ã€‚</p><h2 id="staticå…³é”®å­—"><a href="#staticå…³é”®å­—" class="headerlink" title="staticå…³é”®å­—"></a>staticå…³é”®å­—</h2><h4 id="é™æ€å­—æ®µ"><a href="#é™æ€å­—æ®µ" class="headerlink" title="é™æ€å­—æ®µ"></a>é™æ€å­—æ®µ</h4><p>â€‹            å°†ä¸€ä¸ªå­—æ®µå®šä¹‰ä¸ºstaticï¼Œåˆ™æ¯ä¸ªç±»åªæœ‰ä¸€ä¸ªè¿™æ ·çš„å­—æ®µï¼Œå³ä½¿æ²¡æœ‰å¯¹è±¡ï¼Œé™æ€å­—æ®µä¹Ÿå­˜åœ¨ã€‚ï¼ˆå±äºç±»è€Œä¸å±äºå•ä¸ªå¯¹è±¡ï¼‰è€Œå¯¹äº        éé™æ€çš„å®ä¾‹å­—æ®µï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªå·±çš„ä¸€ä¸ªå‰¯æœ¬ã€‚ï¼ˆæ‰€æœ‰ç±»çš„å¯¹è±¡çš„è¿™ä¸ªå­—æ®µéƒ½æ˜¯ä¸€ä¸ª/ç±»çš„æ¯ä¸ªå¯¹è±¡éƒ½æœ‰å„è‡ªçš„ï¼‰</p><h4 id="é™æ€å¸¸é‡"><a href="#é™æ€å¸¸é‡" class="headerlink" title="é™æ€å¸¸é‡"></a>é™æ€å¸¸é‡</h4><p>â€‹        åœ¨ç±»ä¸­å®šä¹‰ä¸€ä¸ªé™æ€å¸¸é‡åï¼Œå¯ç›´æ¥ç”¨ç±»æ¥è°ƒç”¨è¿™ä¸ªå¸¸é‡ã€‚</p><h4 id="é™æ€æ–¹æ³•"><a href="#é™æ€æ–¹æ³•" class="headerlink" title="é™æ€æ–¹æ³•"></a>é™æ€æ–¹æ³•</h4><p>è°ƒç”¨æ—¶å¹¶ä¸ä½¿ç”¨ä»»ä½•ç±»çš„å¯¹è±¡ï¼Œæ²¡æœ‰éšå¼å‚æ•°ï¼Œä¸èƒ½è®¿é—®å¯¹è±¡çš„å®ä¾‹å­—æ®µï¼Œä¸èƒ½åœ¨å¯¹è±¡ä¸Šæ‰§è¡Œæ“ä½œã€‚å¯è®¿é—®é™æ€å­—æ®µï¼Œç”¨ç±»ç›´æ¥è°ƒç”¨ã€‚</p><h2 id="LocalDateç±»"><a href="#LocalDateç±»" class="headerlink" title="LocalDateç±»"></a>LocalDateç±»</h2><ul><li>ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•æ„é€ å¯¹è±¡ã€‚</li></ul><blockquote><p>LocalDate.now()ï¼›æ„é€ è¿™ä¸ªå¯¹è±¡æ—¶çš„æ—¥æœŸ</p><p>LocalDate.of(YYYY,MM,DD)ï¼›æŒ‡å®šæ—¥æœŸ</p></blockquote><p>å¯¹äºå·²æ„é€ çš„å¯¹è±¡å¯ä½¿ç”¨getYearï¼ŒgetMonthValueï¼ŒgetDayOfMonthæ–¹æ³•å¾—åˆ°å¹´æœˆæ—¥</p><p>ä½¿ç”¨plusDayï¼ˆintï¼‰æ–¹æ³•è®¡ç®—è·ç¦»å½“å‰æ—¥æœŸçš„æ–°æ—¥æœŸ</p><p>åªè®¿é—®å¯¹è±¡ä¸æ›´æ”¹çš„æˆä¸ºè®¿é—®å™¨æ–¹æ³•</p><p>ä¿®æ”¹å¯¹è±¡çš„ç§°ä¸ºä¿®æ”¹å™¨æ–¹æ³•</p><h2 id="javaä¸­å„ç§è®¿é—®å™¨ä¿®é¥°ç¬¦"><a href="#javaä¸­å„ç§è®¿é—®å™¨ä¿®é¥°ç¬¦" class="headerlink" title="javaä¸­å„ç§è®¿é—®å™¨ä¿®é¥°ç¬¦"></a>javaä¸­å„ç§è®¿é—®å™¨ä¿®é¥°ç¬¦</h2><h3 id="Public"><a href="#Public" class="headerlink" title="Public"></a>Public</h3><p>â€‹        ä¿®é¥°çš„ç±»ï¼Œç±»å±æ€§å˜é‡åŠæ–¹æ³•ï¼ŒåŒ…å†…åŠåŒ…å¤–çš„ä»»ä½•ç±»ï¼ˆåŒ…æ‹¬å­ç±»å’Œæ™®é€šç±»ï¼‰éƒ½å¯ä»¥è®¿é—®ã€‚</p><h3 id="Private"><a href="#Private" class="headerlink" title="Private"></a>Private</h3><p>â€‹        ä¿®é¥°çš„ç±»ï¼Œç±»å±æ€§å˜é‡åŠæ–¹æ³•ï¼Œåªæœ‰æœ¬ç±»å¯ä»¥è®¿é—®ï¼Œè€Œåœ¨åŒ…å†…åŒ…å¤–çš„ä»»ä½•ç±»éƒ½ä¸èƒ½è®¿é—®ã€‚</p><h3 id="Protect"><a href="#Protect" class="headerlink" title="Protect"></a>Protect</h3><p>â€‹        ä¿®é¥°çš„ç±»ï¼Œç±»å±æ€§å˜é‡åŠæ–¹æ³•ï¼ŒåŒ…å†…çš„ä»»ä½•ç±»åŠåŒ…å¤–é‚£äº›ç»§æ‰¿äº†è¯¥ç±»çš„å­ç±»æ‰èƒ½è®¿é—®ï¼Œé‡ç‚¹çªå‡ºç»§æ‰¿ã€‚</p><h3 id="Default"><a href="#Default" class="headerlink" title="Default"></a>Default</h3><p>â€‹        å¦‚æœä¸€ä¸ªç±»ï¼Œç±»å±æ€§å˜é‡åŠæ–¹æ³•æ²¡æœ‰ç”¨ä»»ä½•çš„ä¿®é¥°ç¬¦ï¼Œåˆ™å…¶ä¸ºé»˜è®¤çš„è®¿é—®æƒé™Defaultï¼Œé»˜è®¤çš„è®¿é—®æƒé™çš„ç±»ï¼Œç±»å±æ€§å˜é‡åŠæ–¹æ³•ï¼ŒåŒ…å†…çš„ä»»ä½•ç±»ï¼ˆåŒ…æ‹¬ç»§æ‰¿äº†æ­¤ç±»çš„å­ç±»ï¼‰éƒ½å¯ä»¥è®¿é—®ä»–ï¼Œè€Œå¯¹äºåŒ…å¤–çš„ä»»ä½•ç±»éƒ½ä¸èƒ½è®¿é—®ä»–ï¼ˆåŒ…æ‹¬åŒ…å¤–ç»§æ‰¿äº†æ­¤ç±»çš„å­ç±»ï¼‰ï¼Œé‡ç‚¹çªå‡ºåŒ…ã€‚</p><h3 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h3><p>â€‹        Protectedä¿®é¥°ç¬¦ä¿®é¥°çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•ä¹Ÿç§°ä¸ºå—ä¿æŠ¤çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•ï¼Œå—ä¿æŠ¤çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•å¯ä»¥å†æœ¬ç±»æˆ–è€…åŒä¸€ä¸ªåŒ…ä¸­çš„å…¶ä»–ç±»ï¼ˆåŒ…æ‹¬å­ç±»ï¼‰ä¸­é€šè¿‡ç±»çš„å®ä¾‹è¿›è¡Œè®¿é—®ï¼Œä¹Ÿå¯ä»¥è¢«åŒä¸€ä¸ªåŒ…ä¸­çš„ç±»æˆ–ä¸åŒåŒ…ä¸­çš„ç±»ç»§æ‰¿ï¼Œä½†æ˜¯ä¸èƒ½å†ä¸åŒåŒ…ä¸­çš„å…¶ä»–ç±»ï¼ˆåŒ…æ‹¬å­    ç±»ï¼‰ä¸­é€šè¿‡ç±»çš„å®ä¾‹è¿›è¡Œè®¿é—®ã€‚Protectedå±äºå­ç±»é™åˆ¶ä¿®é¥°ç¬¦ã€‚</p><p>â€‹        Publicä¿®é¥°ç¬¦ä¿®é¥°çš„ç±»ï¼Œé‚£ä¹ˆè¯¥ç±»çš„ç±»åå¿…é¡»ä¸ä»–æ‰€åœ¨çš„æºæ–‡ä»¶åŒåï¼Œä¸€ä¸ª.javaæºæ–‡ä»¶ä¸­æœ‰ä¸”åªæœ‰ä¸€ä¸ªPublicç±»ï¼Œé¡¶å±‚ç±»åªèƒ½ç”¨Publicå’Œé»˜è®¤ä¿®é¥°ç¬¦ï¼ˆæ— ä¿®é¥°ç¬¦ï¼‰ä¿®é¥°ã€‚</p><p>â€‹        Protectedä¿®é¥°ç¬¦ä¿®é¥°çš„ç±»å±æ€§æˆå‘˜å˜é‡å’Œæ–¹æ³•ï¼Œåªå¯ä»¥è¢«å­ç±»è®¿é—®ï¼Œè€Œä¸ç®¡å­ç±»æ˜¯ä¸æ˜¯å’Œçˆ¶ç±»ä½äºåŒä¸€ä¸ªåŒ…ä¸­ã€‚</p><p>â€‹        Defaultä¿®é¥°ç¬¦ä¿®é¥°çš„ç±»å±æ€§æˆå‘˜å˜é‡å’Œæ–¹æ³•ï¼Œåªå¯ä»¥è¢«åŒä¸€ä¸ªåŒ…ä¸­çš„å…¶ä»–ç±»è®¿é—®ï¼Œä¸ç®¡å…¶ä»–ç±»æ˜¯ä¸æ˜¯è¯¥ç±»çš„å­ç±»ã€‚Defaultå±äºåŒ…é™åˆ¶ä¿®é¥°ç¬¦ã€‚</p><h2 id="Javaä¸­staticæ–¹æ³•å’Œæ™®é€šæ–¹æ³•çš„åŒºåˆ«"><a href="#Javaä¸­staticæ–¹æ³•å’Œæ™®é€šæ–¹æ³•çš„åŒºåˆ«" class="headerlink" title="Javaä¸­staticæ–¹æ³•å’Œæ™®é€šæ–¹æ³•çš„åŒºåˆ«"></a>Javaä¸­staticæ–¹æ³•å’Œæ™®é€šæ–¹æ³•çš„åŒºåˆ«</h2><h3 id="é™æ€æ–¹æ³•-1"><a href="#é™æ€æ–¹æ³•-1" class="headerlink" title="é™æ€æ–¹æ³•"></a>é™æ€æ–¹æ³•</h3><p>æ˜¯ä½¿ç”¨staticå…³é”®å­—ä¿®é¥°çš„æ–¹æ³•ï¼Œåˆå«ç±»æ–¹æ³•ã€‚å±äºç±»çš„ï¼Œä¸å±äºå¯¹è±¡ï¼Œåœ¨å®ä¾‹åŒ–å¯¹è±¡ä¹‹å‰å°±å¯ä»¥é€šè¿‡ç±»å.æ–¹æ³•åè°ƒç”¨é™æ€æ–¹æ³•ã€‚ï¼ˆé™æ€å±æ€§ï¼Œé™æ€æ–¹æ³•éƒ½æ˜¯å±äºç±»çš„ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ç±»åè°ƒç”¨ï¼‰ã€‚</p><p>A.åœ¨é™æ€æ–¹æ³•ä¸­ï¼Œå¯ä»¥è°ƒç”¨é™æ€æ–¹æ³•ã€‚<br>B.åœ¨é™æ€æ–¹æ³•ä¸­ï¼Œä¸èƒ½è°ƒç”¨éé™æ€æ–¹æ³•ã€‚<br>C.åœ¨é™æ€æ–¹æ³•ä¸­ï¼Œå¯ä»¥å¼•ç”¨ç±»å˜é‡ï¼ˆå³ï¼Œstaticä¿®é¥°çš„å˜é‡ï¼‰ã€‚<br>D.åœ¨é™æ€æ–¹æ³•ä¸­ï¼Œä¸èƒ½å¼•ç”¨æˆå‘˜å˜é‡ï¼ˆå³ï¼Œæ²¡æœ‰staticä¿®é¥°çš„å˜é‡ï¼‰ã€‚<br>E.åœ¨é™æ€æ–¹æ³•ä¸­ï¼Œä¸èƒ½ä½¿ç”¨superå’Œthiså…³é”®å­—</p><p>F.é™æ€æ–¹æ³•å¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œç±»åè°ƒç”¨å’Œå¯¹è±¡è°ƒç”¨ã€‚ï¼ˆç±»å.æ–¹æ³•å / å¯¹è±¡å.æ–¹æ³•åï¼‰</p><p>G.é™æ€æ–¹æ³•çš„ç”Ÿå‘½å‘¨æœŸè·Ÿç›¸åº”çš„ç±»ä¸€æ ·é•¿ï¼Œé™æ€æ–¹æ³•å’Œé™æ€å˜é‡ä¼šéšç€ç±»çš„å®šä¹‰è€Œè¢«åˆ†é…å’Œè£…è½½å…¥å†…å­˜ä¸­ã€‚ä¸€ç›´åˆ°çº¿ç¨‹ç»“æŸï¼Œé™æ€å±æ€§å’Œæ–¹æ³•æ‰ä¼šè¢«é”€æ¯ã€‚ï¼ˆä¹Ÿå°±æ˜¯é™æ€æ–¹æ³•å±äºç±»ï¼‰é™æ€æ–¹æ³•ä¼šéšç€ç±»çš„å®šä¹‰è€Œè¢«åˆ†é…å’Œè£…è½½å…¥å†…å­˜ä¸­ï¼Œç¼–è¯‘å™¨åªä¸ºæ•´ä¸ªç±»åˆ›å»ºäº†ä¸€ä¸ªé™æ€å˜é‡çš„å‰¯æœ¬ï¼Œä¹Ÿå°±æ˜¯åªåˆ†é…ä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œè™½ç„¶å¯èƒ½æœ‰å¤šä¸ªå®ä¾‹ï¼Œä½†è¿™äº›å®ä¾‹å…±äº«è¯¥å†…å­˜ï¼Œç‰¹åˆ«å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä»»ä½•ä¸€ä¸ªå¯¹è±¡å¯¹é™æ€æ•°æ®æˆå‘˜çš„ä¿®æ”¹ï¼Œéƒ½ä¼šå½±å“å…¶å®ƒå¯¹è±¡ã€‚</p><h3 id="éé™æ€æ–¹æ³•"><a href="#éé™æ€æ–¹æ³•" class="headerlink" title="éé™æ€æ–¹æ³•"></a>éé™æ€æ–¹æ³•</h3><p>æ˜¯ä¸å«æœ‰staticå…³é”®å­—ä¿®é¥°çš„æ™®é€šæ–¹æ³•ï¼Œåˆç§°ä¸ºå®ä¾‹æ–¹æ³•ï¼Œæˆå‘˜æ–¹æ³•ã€‚å±äºå¯¹è±¡çš„ï¼Œä¸å±äºç±»çš„ã€‚ï¼ˆæˆå‘˜å±æ€§ï¼Œæˆå‘˜æ–¹æ³•æ˜¯å±äºå¯¹è±¡çš„ï¼Œå¿…é¡»é€šè¿‡newå…³é”®å­—åˆ›å»ºå¯¹è±¡åï¼Œå†é€šè¿‡å¯¹è±¡è°ƒç”¨ï¼‰ã€‚</p><p>A.åœ¨æ™®é€šæ–¹æ³•ä¸­ï¼Œå¯ä»¥è°ƒç”¨æ™®é€šæ–¹æ³•ã€‚<br>B.åœ¨æ™®é€šæ–¹æ³•ä¸­ï¼Œå¯ä»¥è°ƒç”¨é™æ€æ–¹æ³•<br>C.åœ¨æ™®é€šæ–¹æ³•ä¸­ï¼Œå¯ä»¥å¼•ç”¨ç±»å˜é‡å’Œæˆå‘˜å˜é‡<br>D.åœ¨æ™®é€šæ–¹æ³•ä¸­ï¼Œå¯ä»¥ä½¿ç”¨superå’Œthiså…³é”®å­—</p><p>E.éé™æ€æ–¹æ³•çš„ç”Ÿå‘½å‘¨æœŸå’Œç±»çš„å®ä¾‹åŒ–å¯¹è±¡ä¸€æ ·é•¿ï¼Œåªæœ‰å½“ç±»å®ä¾‹åŒ–äº†ä¸€ä¸ªå¯¹è±¡ï¼Œéé™æ€æ–¹æ³•æ‰ä¼šè¢«åˆ›å»ºï¼Œè€Œå½“è¿™ä¸ªå¯¹è±¡è¢«é”€æ¯æ—¶ï¼Œéé™æ€æ–¹æ³•ä¹Ÿé©¬ä¸Šè¢«é”€æ¯ã€‚ï¼ˆä¹Ÿå°±æ˜¯éé™æ€æ–¹æ³•å±äºå¯¹è±¡ï¼‰ã€‚é™æ€ä¸èƒ½å¼•ç”¨éé™æ€è¿™ä¸€ç‰¹æ€§ï¼Œæ˜¯ç”±äºé™æ€çš„ä¼šéšç€ç±»çš„å®šä¹‰è€Œè¢«åˆ†é…å’Œè£…è½½å…¥å†…å­˜ä¸­è¿™ä¸€å…³é”®ç‚¹å†³å®šçš„ï¼›å¦‚æœé™æ€å¼•ç”¨äº†éé™æ€çš„ï¼Œæ ¹æœ¬æ— æ³•ä»å†…å­˜ä¸­æ‰¾åˆ°éé™æ€çš„ä»£ç æ®µï¼ŒåŠ¿å¿…ä¼šå‡ºé”™ï¼Œè¿™ç§åšæ³•æ˜¯Javaè™šæ‹Ÿæœºå†³ä¸å…è®¸çš„</p><p>F.ä½†æ˜¯éé™æ€æ–¹æ³•åªèƒ½é€šè¿‡å¯¹è±¡è°ƒç”¨ã€‚ï¼ˆå¯¹è±¡å.æ–¹æ³•åï¼‰</p><h4 id="æ€»ç»“ï¼šç±»æ–¹æ³•å¯ä»¥ç›´æ¥é€šè¿‡ç±»åè°ƒç”¨ï¼Œå®ä¾‹æ–¹æ³•å¿…éœ€å…ˆå®ä¾‹åŒ–ç±»ï¼Œå†åˆå§‹åŒ–å¯¹è±¡ï¼Œç„¶åé€šè¿‡ç±»çš„å®ä¾‹å¯¹è±¡æ‰èƒ½è°ƒç”¨"><a href="#æ€»ç»“ï¼šç±»æ–¹æ³•å¯ä»¥ç›´æ¥é€šè¿‡ç±»åè°ƒç”¨ï¼Œå®ä¾‹æ–¹æ³•å¿…éœ€å…ˆå®ä¾‹åŒ–ç±»ï¼Œå†åˆå§‹åŒ–å¯¹è±¡ï¼Œç„¶åé€šè¿‡ç±»çš„å®ä¾‹å¯¹è±¡æ‰èƒ½è°ƒç”¨" class="headerlink" title="æ€»ç»“ï¼šç±»æ–¹æ³•å¯ä»¥ç›´æ¥é€šè¿‡ç±»åè°ƒç”¨ï¼Œå®ä¾‹æ–¹æ³•å¿…éœ€å…ˆå®ä¾‹åŒ–ç±»ï¼Œå†åˆå§‹åŒ–å¯¹è±¡ï¼Œç„¶åé€šè¿‡ç±»çš„å®ä¾‹å¯¹è±¡æ‰èƒ½è°ƒç”¨"></a>æ€»ç»“ï¼šç±»æ–¹æ³•å¯ä»¥ç›´æ¥é€šè¿‡ç±»åè°ƒç”¨ï¼Œå®ä¾‹æ–¹æ³•å¿…éœ€å…ˆå®ä¾‹åŒ–ç±»ï¼Œå†åˆå§‹åŒ–å¯¹è±¡ï¼Œç„¶åé€šè¿‡ç±»çš„å®ä¾‹å¯¹è±¡æ‰èƒ½è°ƒç”¨</h4><h2 id="String-ç±»"><a href="#String-ç±»" class="headerlink" title="String ç±»"></a>String ç±»</h2><ul><li>é“¾æ¥åšå®¢ï¼š<a href="https://www.cnblogs.com/zhangyinhua/p/7689974.html">https://www.cnblogs.com/zhangyinhua/p/7689974.html</a></li></ul><h3 id="ä¸€ã€Stringç®€ä»‹"><a href="#ä¸€ã€Stringç®€ä»‹" class="headerlink" title="ä¸€ã€Stringç®€ä»‹"></a>ä¸€ã€Stringç®€ä»‹</h3><h4 id="1-1ã€Stringï¼ˆå­—ç¬¦ä¸²å¸¸é‡ï¼‰æ¦‚è¿°"><a href="#1-1ã€Stringï¼ˆå­—ç¬¦ä¸²å¸¸é‡ï¼‰æ¦‚è¿°" class="headerlink" title="1.1ã€Stringï¼ˆå­—ç¬¦ä¸²å¸¸é‡ï¼‰æ¦‚è¿°"></a>1.1ã€Stringï¼ˆå­—ç¬¦ä¸²å¸¸é‡ï¼‰æ¦‚è¿°</h4><p>ã€€ã€€åœ¨APIä¸­æ˜¯è¿™æ ·æè¿°ï¼š</p><p>ã€€ã€€ã€€ã€€String ç±»ä»£è¡¨å­—ç¬¦ä¸²ã€‚Java ç¨‹åºä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸²å­—é¢å€¼ï¼ˆå¦‚ â€œabcâ€ ï¼‰éƒ½ä½œä¸ºæ­¤ç±»çš„å®ä¾‹å®ç°ã€‚<br>ã€€ã€€ã€€ã€€å­—ç¬¦ä¸²æ˜¯å¸¸é‡ï¼›å®ƒä»¬çš„å€¼åœ¨åˆ›å»ºä¹‹åä¸èƒ½æ›´æ”¹ã€‚å­—ç¬¦ä¸²ç¼“å†²åŒºæ”¯æŒå¯å˜çš„å­—ç¬¦ä¸²ã€‚å› ä¸º String å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥å¯ä»¥å…±äº«ã€‚</p><p>ã€€ã€€java.lang.Stringï¼š</p><p>ã€€ã€€ã€€ã€€<img src="https://i.bmp.ovh/imgs/2021/06/b2e0a2fe6e82f27f.png"></p><h4 id="1-2ã€åˆ†æStringæºç "><a href="#1-2ã€åˆ†æStringæºç " class="headerlink" title="1.2ã€åˆ†æStringæºç "></a>1.2ã€åˆ†æStringæºç </h4><h5 id="1ï¼‰Stringçš„æˆå‘˜å˜é‡"><a href="#1ï¼‰Stringçš„æˆå‘˜å˜é‡" class="headerlink" title="1ï¼‰Stringçš„æˆå‘˜å˜é‡"></a>1ï¼‰Stringçš„æˆå‘˜å˜é‡</h5><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">ã€€<span class="comment">/** Stringçš„å±æ€§å€¼ */</span>  </span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">char</span> value[];</span><br><span class="line"></span><br><span class="line"> <span class="comment">/** The offset is the first index of the storage that is used. */</span></span><br><span class="line"> <span class="comment">/**æ•°ç»„è¢«ä½¿ç”¨çš„å¼€å§‹ä½ç½®**/</span></span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> offset;</span><br><span class="line"></span><br><span class="line"> <span class="comment">/** The count is the number of characters in the String. */</span></span><br><span class="line"> <span class="comment">/**Stringä¸­å…ƒç´ çš„ä¸ªæ•°**/</span></span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> count;</span><br><span class="line"></span><br><span class="line"> <span class="comment">/** Cache the hash code for the string */</span></span><br><span class="line"><span class="comment">/**Stringç±»å‹çš„hashå€¼**/</span></span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">int</span> hash; <span class="comment">// Default to 0</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">/** use serialVersionUID from JDK 1.0.2 for interoperability */</span></span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = -<span class="number">6849794470754667710L</span>;</span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Class String is special cased within the Serialization Stream         Protocol.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * A String instance is written into an ObjectOutputStream according to</span></span><br><span class="line"><span class="comment">  * &lt;a href="{<span class="doctag">@docRoot</span>}/../platform/serialization/spec/output.html"&gt;</span></span><br><span class="line"><span class="comment">  * Object Serialization Specification, Section 6.2, "Stream Elements"&lt;/a&gt;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"></span><br><span class="line">ã€€ã€€<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ObjectStreamField[] serialPersistentFields =</span><br><span class="line">     <span class="keyword">new</span> ObjectStreamField[<span class="number">0</span>];</span><br></pre></td></tr></tbody></table></figure><p>ã€€ã€€ã€€ã€€ä»æºç çœ‹å‡ºStringåº•å±‚ä½¿ç”¨ä¸€ä¸ªå­—ç¬¦æ•°ç»„æ¥ç»´æŠ¤çš„ã€‚</p><p>ã€€ã€€ã€€ã€€æˆå‘˜å˜é‡å¯ä»¥çŸ¥é“Stringç±»çš„å€¼æ˜¯finalç±»å‹çš„ï¼Œä¸èƒ½è¢«æ”¹å˜çš„ï¼Œæ‰€ä»¥åªè¦ä¸€ä¸ªå€¼æ”¹å˜å°±ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„Stringç±»å‹å¯¹è±¡ï¼Œå­˜å‚¨Stringæ•°æ®ä¹Ÿä¸ä¸€å®šä»æ•°ç»„çš„ç¬¬0ä¸ªå…ƒç´ å¼€å§‹çš„ï¼Œè€Œæ˜¯ä»offsetæ‰€æŒ‡çš„å…ƒç´ å¼€å§‹ã€‚</p><h5 id="2ï¼‰Stringçš„æ„é€ æ–¹æ³•"><a href="#2ï¼‰Stringçš„æ„é€ æ–¹æ³•" class="headerlink" title="2ï¼‰Stringçš„æ„é€ æ–¹æ³•"></a>2ï¼‰Stringçš„æ„é€ æ–¹æ³•</h5><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">String() </span><br><span class="line">          åˆå§‹åŒ–ä¸€ä¸ªæ–°åˆ›å»ºçš„ String å¯¹è±¡ï¼Œä½¿å…¶è¡¨ç¤ºä¸€ä¸ªç©ºå­—ç¬¦åºåˆ—ã€‚ </span><br><span class="line">String(<span class="keyword">byte</span>[] bytes) </span><br><span class="line">          é€šè¿‡ä½¿ç”¨å¹³å°çš„é»˜è®¤å­—ç¬¦é›†è§£ç æŒ‡å®šçš„ <span class="keyword">byte</span> æ•°ç»„ï¼Œæ„é€ ä¸€ä¸ªæ–°çš„ Stringã€‚ </span><br><span class="line">String(<span class="keyword">byte</span>[] bytes, Charset charset) </span><br><span class="line">          é€šè¿‡ä½¿ç”¨æŒ‡å®šçš„ charset è§£ç æŒ‡å®šçš„ <span class="keyword">byte</span> æ•°ç»„ï¼Œæ„é€ ä¸€ä¸ªæ–°çš„ Stringã€‚  </span><br><span class="line">String(<span class="keyword">byte</span>[] bytes, <span class="keyword">int</span> offset, <span class="keyword">int</span> length) </span><br><span class="line">          é€šè¿‡ä½¿ç”¨å¹³å°çš„é»˜è®¤å­—ç¬¦é›†è§£ç æŒ‡å®šçš„ <span class="keyword">byte</span> å­æ•°ç»„ï¼Œæ„é€ ä¸€ä¸ªæ–°çš„ Stringã€‚ </span><br><span class="line">String(<span class="keyword">byte</span>[] bytes, <span class="keyword">int</span> offset, <span class="keyword">int</span> length, Charset charset) </span><br><span class="line">          é€šè¿‡ä½¿ç”¨æŒ‡å®šçš„ charset è§£ç æŒ‡å®šçš„ <span class="keyword">byte</span> å­æ•°ç»„ï¼Œæ„é€ ä¸€ä¸ªæ–°çš„ Stringã€‚ </span><br><span class="line">String(<span class="keyword">byte</span>[] bytes, <span class="keyword">int</span> offset, <span class="keyword">int</span> length, String charsetName) </span><br><span class="line">          é€šè¿‡ä½¿ç”¨æŒ‡å®šçš„å­—ç¬¦é›†è§£ç æŒ‡å®šçš„ <span class="keyword">byte</span> å­æ•°ç»„ï¼Œæ„é€ ä¸€ä¸ªæ–°çš„ Stringã€‚ </span><br><span class="line">String(<span class="keyword">byte</span>[] bytes, String charsetName) </span><br><span class="line">          é€šè¿‡ä½¿ç”¨æŒ‡å®šçš„ charset è§£ç æŒ‡å®šçš„ <span class="keyword">byte</span> æ•°ç»„ï¼Œæ„é€ ä¸€ä¸ªæ–°çš„ Stringã€‚ </span><br><span class="line">String(<span class="keyword">char</span>[] value) </span><br><span class="line">          åˆ†é…ä¸€ä¸ªæ–°çš„ Stringï¼Œä½¿å…¶è¡¨ç¤ºå­—ç¬¦æ•°ç»„å‚æ•°ä¸­å½“å‰åŒ…å«çš„å­—ç¬¦åºåˆ—ã€‚ </span><br><span class="line">String(<span class="keyword">char</span>[] value, <span class="keyword">int</span> offset, <span class="keyword">int</span> count) </span><br><span class="line">          åˆ†é…ä¸€ä¸ªæ–°çš„ Stringï¼Œå®ƒåŒ…å«å–è‡ªå­—ç¬¦æ•°ç»„å‚æ•°ä¸€ä¸ªå­æ•°ç»„çš„å­—ç¬¦ã€‚ </span><br><span class="line">String(<span class="keyword">int</span>[] codePoints, <span class="keyword">int</span> offset, <span class="keyword">int</span> count) </span><br><span class="line">          åˆ†é…ä¸€ä¸ªæ–°çš„ Stringï¼Œå®ƒåŒ…å« Unicode ä»£ç ç‚¹æ•°ç»„å‚æ•°ä¸€ä¸ªå­æ•°ç»„çš„å­—ç¬¦ã€‚ </span><br><span class="line">String(String original) </span><br><span class="line">          åˆå§‹åŒ–ä¸€ä¸ªæ–°åˆ›å»ºçš„ String å¯¹è±¡ï¼Œä½¿å…¶è¡¨ç¤ºä¸€ä¸ªä¸å‚æ•°ç›¸åŒçš„å­—ç¬¦åºåˆ—ï¼›æ¢å¥è¯è¯´ï¼Œæ–°åˆ›å»ºçš„å­—ç¬¦ä¸²æ˜¯è¯¥å‚æ•°å­—ç¬¦ä¸²çš„å‰¯æœ¬ã€‚ </span><br><span class="line">String(StringBuffer buffer) </span><br><span class="line">          åˆ†é…ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œå®ƒåŒ…å«å­—ç¬¦ä¸²ç¼“å†²åŒºå‚æ•°ä¸­å½“å‰åŒ…å«çš„å­—ç¬¦åºåˆ—ã€‚ </span><br><span class="line">String(StringBuilder builder) </span><br><span class="line">          åˆ†é…ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œå®ƒåŒ…å«å­—ç¬¦ä¸²ç”Ÿæˆå™¨å‚æ•°ä¸­å½“å‰åŒ…å«çš„å­—ç¬¦åºåˆ—ã€‚ </span><br></pre></td></tr></tbody></table></figure><h3 id="äºŒã€åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡ä¸¤ç§æ–¹å¼çš„åŒºåˆ«"><a href="#äºŒã€åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡ä¸¤ç§æ–¹å¼çš„åŒºåˆ«" class="headerlink" title="äºŒã€åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡ä¸¤ç§æ–¹å¼çš„åŒºåˆ«"></a>äºŒã€åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡ä¸¤ç§æ–¹å¼çš„åŒºåˆ«</h3><h4 id="2-1ã€ç›´æ¥èµ‹å€¼æ–¹å¼åˆ›å»ºå¯¹è±¡"><a href="#2-1ã€ç›´æ¥èµ‹å€¼æ–¹å¼åˆ›å»ºå¯¹è±¡" class="headerlink" title="2.1ã€ç›´æ¥èµ‹å€¼æ–¹å¼åˆ›å»ºå¯¹è±¡"></a>2.1ã€ç›´æ¥èµ‹å€¼æ–¹å¼åˆ›å»ºå¯¹è±¡</h4><p>ã€€ã€€ç›´æ¥èµ‹å€¼æ–¹å¼åˆ›å»ºå¯¹è±¡æ˜¯åœ¨æ–¹æ³•åŒºçš„å¸¸é‡æ± </p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String str=<span class="string">"hello"</span>;<span class="comment">//ç›´æ¥èµ‹å€¼çš„æ–¹å¼</span></span><br></pre></td></tr></tbody></table></figure><h4 id="2-2ã€é€šè¿‡æ„é€ æ–¹æ³•åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡"><a href="#2-2ã€é€šè¿‡æ„é€ æ–¹æ³•åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡" class="headerlink" title="2.2ã€é€šè¿‡æ„é€ æ–¹æ³•åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡"></a>2.2ã€é€šè¿‡æ„é€ æ–¹æ³•åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡</h4><p>ã€€ã€€é€šè¿‡æ„é€ æ–¹æ³•åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡æ˜¯åœ¨å †å†…å­˜</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String str=<span class="keyword">new</span> String(<span class="string">"hello"</span>);<span class="comment">//å®ä¾‹åŒ–çš„æ–¹å¼</span></span><br></pre></td></tr></tbody></table></figure><h4 id="2-3ã€ä¸¤ç§å®ä¾‹åŒ–æ–¹å¼çš„æ¯”è¾ƒ"><a href="#2-3ã€ä¸¤ç§å®ä¾‹åŒ–æ–¹å¼çš„æ¯”è¾ƒ" class="headerlink" title="2.3ã€ä¸¤ç§å®ä¾‹åŒ–æ–¹å¼çš„æ¯”è¾ƒ"></a>2.3ã€ä¸¤ç§å®ä¾‹åŒ–æ–¹å¼çš„æ¯”è¾ƒ</h4><h5 id="1ï¼‰ç¼–å†™ä»£ç æ¯”è¾ƒ"><a href="#1ï¼‰ç¼–å†™ä»£ç æ¯”è¾ƒ" class="headerlink" title="1ï¼‰ç¼–å†™ä»£ç æ¯”è¾ƒ"></a>1ï¼‰ç¼–å†™ä»£ç æ¯”è¾ƒ</h5><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestString</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        String str1 = <span class="string">"Lance"</span>;</span><br><span class="line">        String str2 = <span class="keyword">new</span> String(<span class="string">"Lance"</span>);</span><br><span class="line">        String str3 = str2; <span class="comment">//å¼•ç”¨ä¼ é€’ï¼Œstr3ç›´æ¥æŒ‡å‘st2çš„å †å†…å­˜åœ°å€</span></span><br><span class="line">        String str4 = <span class="string">"Lance"</span>;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         *  ==:</span></span><br><span class="line"><span class="comment">         * åŸºæœ¬æ•°æ®ç±»å‹ï¼šæ¯”è¾ƒçš„æ˜¯åŸºæœ¬æ•°æ®ç±»å‹çš„å€¼æ˜¯å¦ç›¸åŒ</span></span><br><span class="line"><span class="comment">         * å¼•ç”¨æ•°æ®ç±»å‹ï¼šæ¯”è¾ƒçš„æ˜¯å¼•ç”¨æ•°æ®ç±»å‹çš„åœ°å€å€¼æ˜¯å¦ç›¸åŒ</span></span><br><span class="line"><span class="comment">         * æ‰€ä»¥åœ¨è¿™é‡Œçš„è¯ï¼šStringç±»å¯¹è±¡==æ¯”è¾ƒï¼Œæ¯”è¾ƒçš„æ˜¯åœ°å€ï¼Œè€Œä¸æ˜¯å†…å®¹</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">         System.out.println(str1==str2);<span class="comment">//false</span></span><br><span class="line">         System.out.println(str1==str3);<span class="comment">//false</span></span><br><span class="line">         System.out.println(str3==str2);<span class="comment">//true</span></span><br><span class="line">         System.out.println(str1==str4);<span class="comment">//true</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h5 id="2ï¼‰å†…å­˜å›¾åˆ†æ"><a href="#2ï¼‰å†…å­˜å›¾åˆ†æ" class="headerlink" title="2ï¼‰å†…å­˜å›¾åˆ†æ"></a>2ï¼‰å†…å­˜å›¾åˆ†æ</h5><p><img src="https://i.bmp.ovh/imgs/2021/06/681a849a91ac6fc9.png"></p><p>å¯èƒ½è¿™é‡Œè¿˜æ˜¯ä¸å¤Ÿæ˜æ˜¾ï¼Œæ„é€ æ–¹æ³•å®ä¾‹åŒ–æ–¹å¼çš„å†…å­˜å›¾ï¼šString str = new String(â€œHelloâ€);</p><p>é¦–å…ˆï¼š</p><p>â€‹                              <img src="https://i.bmp.ovh/imgs/2021/06/78d97ef8ef8590e2.png"> ã€€ã€€ã€€ã€€</p><p>å½“æˆ‘ä»¬å†ä¸€æ¬¡çš„newä¸€ä¸ªStringå¯¹è±¡æ—¶ï¼š</p><p>ã€€ã€€ã€€ã€€ã€€ã€€<img src="https://i.bmp.ovh/imgs/2021/06/409ef81452f665b1.png"></p><h5 id="3ï¼‰å­—ç¬¦ä¸²å¸¸é‡æ± "><a href="#3ï¼‰å­—ç¬¦ä¸²å¸¸é‡æ± " class="headerlink" title="3ï¼‰å­—ç¬¦ä¸²å¸¸é‡æ± "></a>3ï¼‰å­—ç¬¦ä¸²å¸¸é‡æ± </h5><p>ã€€ã€€ã€€ã€€ã€€ã€€åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œå¦‚æœé‡‡ç”¨ç›´æ¥èµ‹å€¼çš„æ–¹å¼ï¼ˆString str=â€Lanceâ€ï¼‰è¿›è¡Œå¯¹è±¡çš„å®ä¾‹åŒ–ï¼Œåˆ™ä¼šå°†åŒ¿åå¯¹è±¡â€œLanceâ€æ”¾å…¥å¯¹è±¡æ± ï¼Œæ¯å½“ä¸‹ä¸€æ¬¡å¯¹ä¸åŒçš„å¯¹è±¡è¿›è¡Œç›´æ¥èµ‹å€¼çš„æ—¶å€™ä¼šç›´æ¥åˆ©ç”¨æ± ä¸­åŸæœ‰çš„åŒ¿åå¯¹è±¡ï¼Œ</p><p>ã€€ã€€ã€€ã€€ã€€ã€€è¿™æ ·ï¼Œæ‰€æœ‰ç›´æ¥èµ‹å€¼çš„Stringå¯¹è±¡ï¼Œå¦‚æœåˆ©ç”¨ç›¸åŒçš„â€œLanceâ€ï¼Œåˆ™Stringå¯¹è±¡==è¿”å›trueï¼›</p><p>ã€€ã€€ã€€ã€€ã€€ã€€æ¯”å¦‚ï¼šå¯¹è±¡æ‰‹å·¥å…¥æ± </p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestString</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>{</span><br><span class="line">     String str =<span class="keyword">new</span> String(<span class="string">"Lance"</span>).intern();<span class="comment">//å¯¹åŒ¿åå¯¹è±¡"hello"è¿›è¡Œæ‰‹å·¥å…¥æ± æ“ä½œ</span></span><br><span class="line">     String str1=<span class="string">"Lance"</span>;</span><br><span class="line">     System.out.println(str==str1);<span class="comment">//true</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h5 id="4ï¼‰æ€»ç»“ï¼šä¸¤ç§å®ä¾‹åŒ–æ–¹å¼çš„åŒºåˆ«"><a href="#4ï¼‰æ€»ç»“ï¼šä¸¤ç§å®ä¾‹åŒ–æ–¹å¼çš„åŒºåˆ«" class="headerlink" title="4ï¼‰æ€»ç»“ï¼šä¸¤ç§å®ä¾‹åŒ–æ–¹å¼çš„åŒºåˆ«"></a>4ï¼‰æ€»ç»“ï¼šä¸¤ç§å®ä¾‹åŒ–æ–¹å¼çš„åŒºåˆ«</h5><p>ã€€ã€€ã€€ã€€ã€€ã€€1ï¼‰ç›´æ¥èµ‹å€¼ï¼ˆString str = â€œhelloâ€ï¼‰ï¼šåªå¼€è¾Ÿä¸€å—å †å†…å­˜ç©ºé—´ï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨å…¥æ± ï¼Œä¸ä¼šäº§ç”Ÿåƒåœ¾ã€‚</p><p>ã€€ã€€ã€€ã€€ã€€ã€€2ï¼‰æ„é€ æ–¹æ³•ï¼ˆString str=  new String(â€œhelloâ€);ï¼‰:ä¼šå¼€è¾Ÿä¸¤å—å †å†…å­˜ç©ºé—´ï¼Œå…¶ä¸­ä¸€å—å †å†…å­˜ä¼šå˜æˆåƒåœ¾è¢«ç³»ç»Ÿå›æ”¶ï¼Œè€Œä¸”ä¸èƒ½å¤Ÿè‡ªåŠ¨å…¥æ± ï¼Œéœ€è¦é€šè¿‡public  String intern();æ–¹æ³•è¿›è¡Œæ‰‹å·¥å…¥æ± ã€‚</p><p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ä¸ä¼šé‡‡ç”¨æ„é€ æ–¹æ³•è¿›è¡Œå­—ç¬¦ä¸²çš„å®ä¾‹åŒ–ã€‚</p><p>ã€€ã€€ã€€ã€€5ï¼‰é¿å…ç©ºæŒ‡å‘</p><p>ã€€ã€€ã€€ã€€ã€€ã€€é¦–å…ˆäº†è§£ï¼š == å’Œpublic boolean equals()æ¯”è¾ƒå­—ç¬¦ä¸²çš„åŒºåˆ«</p><p>ã€€ã€€ã€€ã€€ã€€ã€€==åœ¨å¯¹å­—ç¬¦ä¸²æ¯”è¾ƒçš„æ—¶å€™ï¼Œå¯¹æ¯”çš„æ˜¯å†…å­˜åœ°å€ï¼Œè€Œequalsæ¯”è¾ƒçš„æ˜¯å­—ç¬¦ä¸²å†…å®¹ï¼Œåœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œequals()é€šè¿‡æ¥å—å‚æ•°ï¼Œå¯ä»¥é¿å…ç©ºæŒ‡å‘ã€‚</p><p>ã€€ã€€ã€€ã€€ã€€ã€€ä¸¾ä¾‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€String str = <span class="keyword">null</span>;</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€<span class="keyword">if</span>(str.equals(<span class="string">"hello"</span>)){<span class="comment">//æ­¤æ—¶ä¼šå‡ºç°ç©ºæŒ‡å‘å¼‚å¸¸</span></span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€...</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€}</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€<span class="keyword">if</span>(<span class="string">"hello"</span>.equals(str)){<span class="comment">//æ­¤æ—¶equalsä¼šå¤„ç†nullå€¼ï¼Œå¯ä»¥é¿å…ç©ºæŒ‡å‘å¼‚å¸¸</span></span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€...</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€}</span><br></pre></td></tr></tbody></table></figure><p>ã€€ã€€ã€€6ï¼‰Stringç±»å¯¹è±¡ä¸€æ—¦å£°æ˜åˆ™ä¸å¯ä»¥æ”¹å˜ï¼›è€Œæ”¹å˜çš„åªæ˜¯åœ°å€ï¼ŒåŸæ¥çš„å­—ç¬¦ä¸²è¿˜æ˜¯å­˜åœ¨çš„ï¼Œå¹¶ä¸”äº§ç”Ÿåƒåœ¾</p><p> ã€€ã€€ã€€ã€€ã€€<img src="https://i.bmp.ovh/imgs/2021/06/661f67370a5cd175.png" style="zoom:50%;"></p><h3 id="ä¸‰ã€Stringå¸¸ç”¨çš„æ–¹æ³•"><a href="#ä¸‰ã€Stringå¸¸ç”¨çš„æ–¹æ³•" class="headerlink" title="ä¸‰ã€Stringå¸¸ç”¨çš„æ–¹æ³•"></a>ä¸‰ã€Stringå¸¸ç”¨çš„æ–¹æ³•</h3><p>ã€€ã€€<img src="https://i.bmp.ovh/imgs/2021/06/b4ccb91e286f6ba2.png" style="zoom:67%;"></p><h4 id="3-1ã€Stringçš„åˆ¤æ–­åŠŸèƒ½"><a href="#3-1ã€Stringçš„åˆ¤æ–­åŠŸèƒ½" class="headerlink" title="3.1ã€Stringçš„åˆ¤æ–­åŠŸèƒ½"></a>3.1ã€Stringçš„åˆ¤æ–­åŠŸèƒ½</h4><h5 id="1ï¼‰å¸¸ç”¨æ–¹æ³•"><a href="#1ï¼‰å¸¸ç”¨æ–¹æ³•" class="headerlink" title="1ï¼‰å¸¸ç”¨æ–¹æ³•"></a>1ï¼‰å¸¸ç”¨æ–¹æ³•</h5><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ã€€ã€€<span class="function"><span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span>ï¼šæ¯”è¾ƒå­—ç¬¦ä¸²çš„å†…å®¹æ˜¯å¦ç›¸åŒ</span></span><br><span class="line"><span class="function">ã€€ã€€<span class="keyword">boolean</span> <span class="title">equalsIgnoreCase</span><span class="params">(String str)</span>ï¼š æ¯”è¾ƒå­—ç¬¦ä¸²çš„å†…å®¹æ˜¯å¦ç›¸åŒ,å¿½ç•¥å¤§å°å†™</span></span><br><span class="line"><span class="function">ã€€ã€€<span class="keyword">boolean</span> <span class="title">startsWith</span><span class="params">(String str)</span>ï¼š åˆ¤æ–­å­—ç¬¦ä¸²å¯¹è±¡æ˜¯å¦ä»¥æŒ‡å®šçš„strå¼€å¤´</span></span><br><span class="line"><span class="function">ã€€ã€€<span class="keyword">boolean</span> <span class="title">endsWith</span><span class="params">(String str)</span>ï¼š åˆ¤æ–­å­—ç¬¦ä¸²å¯¹è±¡æ˜¯å¦ä»¥æŒ‡å®šçš„strç»“å°¾</span></span><br></pre></td></tr></tbody></table></figure><h5 id="2ï¼‰ä»£ç æµ‹è¯•"><a href="#2ï¼‰ä»£ç æµ‹è¯•" class="headerlink" title="2ï¼‰ä»£ç æµ‹è¯•"></a>2ï¼‰ä»£ç æµ‹è¯•</h5><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestString</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">           <span class="comment">// åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡</span></span><br><span class="line">        String s1 = <span class="string">"hello"</span>;</span><br><span class="line">        String s2 = <span class="string">"hello"</span>;</span><br><span class="line">        String s3 = <span class="string">"Hello"</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// boolean equals(Object obj):æ¯”è¾ƒå­—ç¬¦ä¸²çš„å†…å®¹æ˜¯å¦ç›¸åŒ</span></span><br><span class="line">        System.out.println(s1.equals(s2));</span><br><span class="line">        System.out.println(s1.equals(s3));</span><br><span class="line">        System.out.println(<span class="string">"-----------"</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// boolean equalsIgnoreCase(String str):æ¯”è¾ƒå­—ç¬¦ä¸²çš„å†…å®¹æ˜¯å¦ç›¸åŒ,å¿½ç•¥å¤§å°å†™</span></span><br><span class="line">        System.out.println(s1.equalsIgnoreCase(s2));</span><br><span class="line">        System.out.println(s1.equalsIgnoreCase(s3));</span><br><span class="line">        System.out.println(<span class="string">"-----------"</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// boolean startsWith(String str):åˆ¤æ–­å­—ç¬¦ä¸²å¯¹è±¡æ˜¯å¦ä»¥æŒ‡å®šçš„strå¼€å¤´</span></span><br><span class="line">        System.out.println(s1.startsWith(<span class="string">"he"</span>));</span><br><span class="line">        System.out.println(s1.startsWith(<span class="string">"ll"</span>));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ã€€ã€€ã€€ã€€ç»“æœï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">true</span><br><span class="line">false</span><br><span class="line">------------</span><br><span class="line">true</span><br><span class="line">true</span><br><span class="line">------------</span><br><span class="line">true</span><br><span class="line">false</span><br></pre></td></tr></tbody></table></figure><h4 id="3-2ã€Stringç±»çš„è·å–åŠŸèƒ½"><a href="#3-2ã€Stringç±»çš„è·å–åŠŸèƒ½" class="headerlink" title="3.2ã€Stringç±»çš„è·å–åŠŸèƒ½"></a>3.2ã€Stringç±»çš„è·å–åŠŸèƒ½</h4><h5 id="1ï¼‰å¸¸ç”¨æ–¹æ³•-1"><a href="#1ï¼‰å¸¸ç”¨æ–¹æ³•-1" class="headerlink" title="1ï¼‰å¸¸ç”¨æ–¹æ³•"></a>1ï¼‰å¸¸ç”¨æ–¹æ³•</h5><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">length</span><span class="params">()</span>:è·å–å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå…¶å®ä¹Ÿå°±æ˜¯å­—ç¬¦ä¸ªæ•°</span></span><br><span class="line"><span class="function"><span class="keyword">char</span> <span class="title">charAt</span><span class="params">(<span class="keyword">int</span> index)</span>:è·å–æŒ‡å®šç´¢å¼•å¤„çš„å­—ç¬¦</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">indexOf</span><span class="params">(String str)</span>:è·å–stråœ¨å­—ç¬¦ä¸²å¯¹è±¡ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•</span></span><br><span class="line"><span class="function">String <span class="title">substring</span><span class="params">(<span class="keyword">int</span> start)</span>:ä»startå¼€å§‹æˆªå–å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="function">String <span class="title">substring</span><span class="params">(<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span>:ä»startå¼€å§‹ï¼Œåˆ°endç»“æŸæˆªå–å­—ç¬¦ä¸²ã€‚åŒ…æ‹¬startï¼Œä¸åŒ…æ‹¬end</span></span><br></pre></td></tr></tbody></table></figure><h5 id="2ï¼‰ä»£ç æµ‹è¯•-1"><a href="#2ï¼‰ä»£ç æµ‹è¯•-1" class="headerlink" title="2ï¼‰ä»£ç æµ‹è¯•"></a>2ï¼‰ä»£ç æµ‹è¯•</h5><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestString</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">          <span class="comment">// åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡</span></span><br><span class="line">        String s = <span class="string">"helloworld"</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// int length():è·å–å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå…¶å®ä¹Ÿå°±æ˜¯å­—ç¬¦ä¸ªæ•°</span></span><br><span class="line">        System.out.println(s.length());</span><br><span class="line">        System.out.println(<span class="string">"--------"</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// char charAt(int index):è·å–æŒ‡å®šç´¢å¼•å¤„çš„å­—ç¬¦</span></span><br><span class="line">        System.out.println(s.charAt(<span class="number">0</span>));</span><br><span class="line">        System.out.println(s.charAt(<span class="number">1</span>));</span><br><span class="line">        System.out.println(<span class="string">"--------"</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// int indexOf(String str):è·å–stråœ¨å­—ç¬¦ä¸²å¯¹è±¡ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•</span></span><br><span class="line">        System.out.println(s.indexOf(<span class="string">"l"</span>));</span><br><span class="line">        System.out.println(s.indexOf(<span class="string">"owo"</span>));</span><br><span class="line">        System.out.println(s.indexOf(<span class="string">"ak"</span>));</span><br><span class="line">        System.out.println(<span class="string">"--------"</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// String substring(int start):ä»startå¼€å§‹æˆªå–å­—ç¬¦ä¸²</span></span><br><span class="line">        System.out.println(s.substring(<span class="number">0</span>));</span><br><span class="line">        System.out.println(s.substring(<span class="number">5</span>));</span><br><span class="line">        System.out.println(<span class="string">"--------"</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// String substring(int start,int end):ä»startå¼€å§‹ï¼Œåˆ°endç»“æŸæˆªå–å­—ç¬¦ä¸²</span></span><br><span class="line">        System.out.println(s.substring(<span class="number">0</span>, s.length()));</span><br><span class="line">        System.out.println(s.substring(<span class="number">3</span>, <span class="number">8</span>));</span><br><span class="line">        </span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ã€€ã€€ç»“æœï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">10</span><br><span class="line">----</span><br><span class="line">h</span><br><span class="line">e</span><br><span class="line">----</span><br><span class="line">2</span><br><span class="line">4</span><br><span class="line">-1</span><br><span class="line">----</span><br><span class="line">helloworld</span><br><span class="line">world</span><br><span class="line">----</span><br><span class="line">helloworld</span><br><span class="line">lowor</span><br></pre></td></tr></tbody></table></figure><h4 id="3-3ã€Stringçš„è½¬æ¢åŠŸèƒ½"><a href="#3-3ã€Stringçš„è½¬æ¢åŠŸèƒ½" class="headerlink" title="3.3ã€Stringçš„è½¬æ¢åŠŸèƒ½"></a>3.3ã€Stringçš„è½¬æ¢åŠŸèƒ½</h4><h5 id="1ï¼‰å¸¸ç”¨æ–¹æ³•-2"><a href="#1ï¼‰å¸¸ç”¨æ–¹æ³•-2" class="headerlink" title="1ï¼‰å¸¸ç”¨æ–¹æ³•"></a>1ï¼‰å¸¸ç”¨æ–¹æ³•</h5><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ã€€ã€€<span class="keyword">char</span>[] toCharArray()ï¼šæŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦æ•°ç»„</span><br><span class="line">ã€€ã€€<span class="function">String <span class="title">toLowerCase</span><span class="params">()</span>ï¼šæŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="function">ã€€ã€€String <span class="title">toUpperCase</span><span class="params">()</span>ï¼šæŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™å­—ç¬¦ä¸²</span></span><br></pre></td></tr></tbody></table></figure><h5 id="2ï¼‰æ ¸å¿ƒä»£ç "><a href="#2ï¼‰æ ¸å¿ƒä»£ç " class="headerlink" title="2ï¼‰æ ¸å¿ƒä»£ç "></a>2ï¼‰æ ¸å¿ƒä»£ç </h5><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestString</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">         <span class="comment">// åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡</span></span><br><span class="line">        String s = <span class="string">"abcde"</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// char[] toCharArray():æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦æ•°ç»„</span></span><br><span class="line">        <span class="keyword">char</span>[] chs = s.toCharArray();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; chs.length; x++) {</span><br><span class="line">            System.out.println(chs[x]);</span><br><span class="line">        }</span><br><span class="line"> </span><br><span class="line">        System.out.println(<span class="string">"-----------"</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// String toLowerCase():æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™å­—ç¬¦ä¸²</span></span><br><span class="line">        System.out.println(<span class="string">"HelloWorld"</span>.toLowerCase());</span><br><span class="line">        <span class="comment">// String toUpperCase():æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™å­—ç¬¦ä¸²</span></span><br><span class="line">        System.out.println(<span class="string">"HelloWorld"</span>.toUpperCase());</span><br><span class="line">        </span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><p>ã€€ã€€ç»“æœï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br><span class="line">e</span><br><span class="line">-----</span><br><span class="line">helloworld</span><br><span class="line">HELLOWORLD</span><br></pre></td></tr></tbody></table></figure><p>ã€€ã€€æ³¨æ„ï¼šã€€ã€€</p><p>ã€€ã€€ã€€ã€€å­—ç¬¦ä¸²çš„éå†æœ‰ä¸¤ç§æ–¹å¼ï¼šä¸€æ˜¯ength()åŠ ä¸ŠcharAt()ã€‚äºŒæ˜¯æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦æ•°ç»„ï¼Œç„¶åéå†æ•°ç»„ã€‚</p><h4 id="3-4ã€å…¶ä»–å¸¸ç”¨æ–¹æ³•"><a href="#3-4ã€å…¶ä»–å¸¸ç”¨æ–¹æ³•" class="headerlink" title="3.4ã€å…¶ä»–å¸¸ç”¨æ–¹æ³•"></a>3.4ã€å…¶ä»–å¸¸ç”¨æ–¹æ³•</h4><h5 id="1ï¼‰å¸¸ç”¨æ–¹æ³•-3"><a href="#1ï¼‰å¸¸ç”¨æ–¹æ³•-3" class="headerlink" title="1ï¼‰å¸¸ç”¨æ–¹æ³•"></a>1ï¼‰å¸¸ç”¨æ–¹æ³•</h5><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ã€€ã€€å»é™¤å­—ç¬¦ä¸²ä¸¤ç«¯ç©ºæ ¼ï¼š<span class="function">String <span class="title">trim</span><span class="params">()</span></span></span><br><span class="line"><span class="function">ã€€ã€€æŒ‰ç…§æŒ‡å®šç¬¦å·åˆ†å‰²å­—ç¬¦ä¸²ï¼šString[] <span class="title">split</span><span class="params">(String str)</span></span></span><br></pre></td></tr></tbody></table></figure><h5 id="2ï¼‰æ ¸å¿ƒä»£ç -1"><a href="#2ï¼‰æ ¸å¿ƒä»£ç -1" class="headerlink" title="2ï¼‰æ ¸å¿ƒä»£ç "></a>2ï¼‰æ ¸å¿ƒä»£ç </h5><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestString</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">          <span class="comment">// åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡</span></span><br><span class="line">        String s1 = <span class="string">"helloworld"</span>;</span><br><span class="line">        String s2 = <span class="string">" helloworld "</span>;</span><br><span class="line">        String s3 = <span class="string">" hello world "</span>;</span><br><span class="line">        System.out.println(<span class="string">"---"</span> + s1 + <span class="string">"---"</span>);</span><br><span class="line">        System.out.println(<span class="string">"---"</span> + s1.trim() + <span class="string">"---"</span>);</span><br><span class="line">        System.out.println(<span class="string">"---"</span> + s2 + <span class="string">"---"</span>);</span><br><span class="line">        System.out.println(<span class="string">"---"</span> + s2.trim() + <span class="string">"---"</span>);</span><br><span class="line">        System.out.println(<span class="string">"---"</span> + s3 + <span class="string">"---"</span>);</span><br><span class="line">        System.out.println(<span class="string">"---"</span> + s3.trim() + <span class="string">"---"</span>);</span><br><span class="line">        System.out.println(<span class="string">"-------------------"</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// String[] split(String str)</span></span><br><span class="line">        <span class="comment">// åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡</span></span><br><span class="line">        String s4 = <span class="string">"aa,bb,cc"</span>;</span><br><span class="line">        String[] strArray = s4.split(<span class="string">","</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; strArray.length; x++) {</span><br><span class="line">            System.out.println(strArray[x]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ã€€ã€€ç»“æœï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">---helloworld---</span><br><span class="line">---helloworld---</span><br><span class="line">--- helloworld ---</span><br><span class="line">---helloworld---</span><br><span class="line">--- hello world ---</span><br><span class="line">---hello world---   </span><br><span class="line">--------------------</span><br><span class="line">aa</span><br><span class="line">bb</span><br><span class="line">cc</span><br></pre></td></tr></tbody></table></figure><h3 id="å››ã€Stringçš„ä¸å¯å˜æ€§"><a href="#å››ã€Stringçš„ä¸å¯å˜æ€§" class="headerlink" title="å››ã€Stringçš„ä¸å¯å˜æ€§"></a>å››ã€Stringçš„ä¸å¯å˜æ€§</h3><p>å½“æˆ‘ä»¬å»é˜…è¯»æºä»£ç çš„æ—¶å€™ï¼Œä¼šå‘ç°æœ‰è¿™æ ·çš„ä¸€å¥è¯ï¼š</p><p><img src="https://i.bmp.ovh/imgs/2021/06/77ba33db8221bf91.png"></p><p>æ„æ€å°±æ˜¯è¯´ï¼šStringæ˜¯ä¸ªå¸¸é‡ï¼Œä»ä¸€å‡ºç”Ÿå°±æ³¨å®šä¸å¯å˜ã€‚</p><p>æˆ‘æƒ³å¤§å®¶åº”è¯¥å°±çŸ¥é“ä¸ºä»€ä¹ˆStringä¸å¯å˜äº†ï¼ŒStringç±»è¢«finalä¿®é¥°ï¼Œå®˜æ–¹æ³¨é‡Šè¯´æ˜åˆ›å»ºåä¸èƒ½è¢«æ”¹å˜ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆStringè¦ä½¿ç”¨finalä¿®é¥°å‘¢ï¼Ÿã€€</p><h4 id="4-1ã€å‰è¨€"><a href="#4-1ã€å‰è¨€" class="headerlink" title="4.1ã€å‰è¨€"></a>4.1ã€å‰è¨€</h4><p>ã€€ã€€äº†è§£ä¸€ä¸ªç»å…¸çš„é¢è¯•é¢˜ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Apple</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        String a = <span class="string">"abc"</span>;</span><br><span class="line">        String b = <span class="string">"abc"</span>;</span><br><span class="line">        String c = <span class="keyword">new</span> String(<span class="string">"abc"</span>);</span><br><span class="line">        System.out.println(a==b);  <span class="comment">//true</span></span><br><span class="line">        System.out.println(a.equals(b));  <span class="comment">//true</span></span><br><span class="line">        System.out.println(a==c);  <span class="comment">//false</span></span><br><span class="line">        System.out.println(a.equals(c));  <span class="comment">//true</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ã€€ã€€å†…å­˜å›¾ï¼š</p><p>ã€€ã€€ã€€ã€€<img src="https://i.bmp.ovh/imgs/2021/06/bd29ee48dfea9c6a.png" style="zoom:80%;"></p><h4 id="4-2ã€åˆ†æ"><a href="#4-2ã€åˆ†æ" class="headerlink" title="4.2ã€åˆ†æ"></a>4.2ã€åˆ†æ</h4><p>ã€€ã€€å› ä¸ºStringå¤ªè¿‡å¸¸ç”¨ï¼ŒJAVAç±»åº“çš„è®¾è®¡è€…åœ¨å®ç°æ—¶åšäº†ä¸ªå°å°çš„å˜åŒ–ï¼Œå³é‡‡ç”¨äº†äº«å…ƒæ¨¡å¼,æ¯å½“ç”Ÿæˆä¸€ä¸ªæ–°å†…å®¹çš„å­—ç¬¦ä¸²æ—¶ï¼Œä»–ä»¬éƒ½è¢«æ·»åŠ åˆ°ä¸€ä¸ªå…±äº«æ± ä¸­ï¼Œå½“ç¬¬äºŒæ¬¡å†æ¬¡ç”ŸæˆåŒæ ·å†…å®¹çš„å­—ç¬¦ä¸²å®ä¾‹æ—¶ï¼Œ</p><p>ã€€ã€€å°±å…±äº«æ­¤å¯¹è±¡ï¼Œè€Œä¸æ˜¯åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä½†æ˜¯è¿™æ ·çš„åšæ³•ä»…ä»…é€‚åˆäºé€šè¿‡=ç¬¦å·è¿›è¡Œçš„åˆå§‹åŒ–ã€‚ã€€ã€€</p><p>ã€€ã€€éœ€è¦è¯´æ˜ä¸€ç‚¹çš„æ˜¯ï¼Œåœ¨objectä¸­ï¼Œequals()æ˜¯ç”¨æ¥æ¯”è¾ƒå†…å­˜åœ°å€çš„ï¼Œä½†æ˜¯Stringé‡å†™äº†equals()æ–¹æ³•ï¼Œç”¨æ¥æ¯”è¾ƒå†…å®¹çš„ï¼Œå³ä½¿æ˜¯ä¸åŒåœ°å€ï¼Œåªè¦å†…å®¹ä¸€è‡´ï¼Œä¹Ÿä¼šè¿”å›trueï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆa.equals(c)è¿”å›trueçš„åŸå› äº†ã€‚</p><h4 id="4-3ã€Stringä¸å¯å˜çš„å¥½å¤„"><a href="#4-3ã€Stringä¸å¯å˜çš„å¥½å¤„" class="headerlink" title="4.3ã€Stringä¸å¯å˜çš„å¥½å¤„"></a>4.3ã€Stringä¸å¯å˜çš„å¥½å¤„</h4><p>ã€€ã€€å¯ä»¥å®ç°å¤šä¸ªå˜é‡å¼•ç”¨å †å†…å­˜ä¸­çš„åŒä¸€ä¸ªå­—ç¬¦ä¸²å®ä¾‹ï¼Œé¿å…åˆ›å»ºçš„å¼€é”€ã€‚</p><p>ã€€ã€€æˆ‘ä»¬çš„ç¨‹åºä¸­å¤§é‡ä½¿ç”¨äº†Stringå­—ç¬¦ä¸²ï¼Œæœ‰å¯èƒ½æ˜¯å‡ºäºå®‰å…¨æ€§è€ƒè™‘ã€‚</p><p>ã€€ã€€å¤§å®¶éƒ½çŸ¥é“HashMapä¸­keyä¸ºStringç±»å‹ï¼Œå¦‚æœå¯å˜å°†å˜çš„å¤šä¹ˆå¯æ€•ã€‚</p><p>ã€€ã€€å½“æˆ‘ä»¬åœ¨ä¼ å‚çš„æ—¶å€™ï¼Œä½¿ç”¨ä¸å¯å˜ç±»ä¸éœ€è¦å»è€ƒè™‘è°å¯èƒ½ä¼šä¿®æ”¹å…¶å†…éƒ¨çš„å€¼ï¼Œå¦‚æœä½¿ç”¨å¯å˜ç±»çš„è¯ï¼Œå¯èƒ½éœ€è¦æ¯æ¬¡è®°å¾—é‡æ–°æ‹·è´å‡ºé‡Œé¢çš„å€¼ï¼Œæ€§èƒ½ä¼šæœ‰ä¸€å®šçš„æŸå¤±ã€‚</p><h3 id="äº”ã€å­—ç¬¦ä¸²å¸¸é‡æ± "><a href="#äº”ã€å­—ç¬¦ä¸²å¸¸é‡æ± " class="headerlink" title="äº”ã€å­—ç¬¦ä¸²å¸¸é‡æ± "></a>äº”ã€å­—ç¬¦ä¸²å¸¸é‡æ± </h3><h4 id="5-1ã€å­—ç¬¦ä¸²å¸¸é‡æ± æ¦‚è¿°"><a href="#5-1ã€å­—ç¬¦ä¸²å¸¸é‡æ± æ¦‚è¿°" class="headerlink" title="5.1ã€å­—ç¬¦ä¸²å¸¸é‡æ± æ¦‚è¿°"></a>5.1ã€å­—ç¬¦ä¸²å¸¸é‡æ± æ¦‚è¿°</h4><h5 id="1ï¼‰å¸¸é‡æ± è¡¨ï¼ˆConstant-Pool-tableï¼‰"><a href="#1ï¼‰å¸¸é‡æ± è¡¨ï¼ˆConstant-Pool-tableï¼‰" class="headerlink" title="1ï¼‰å¸¸é‡æ± è¡¨ï¼ˆConstant_Pool tableï¼‰"></a>1ï¼‰å¸¸é‡æ± è¡¨ï¼ˆConstant_Pool tableï¼‰</h5><p>ã€€ã€€ã€€ã€€Classæ–‡ä»¶ä¸­å­˜å‚¨æ‰€æœ‰å¸¸é‡ï¼ˆåŒ…æ‹¬å­—ç¬¦ä¸²ï¼‰çš„tableã€‚<br>ã€€ã€€ã€€ã€€è¿™æ˜¯Classæ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œè¿˜ä¸æ˜¯è¿è¡Œæ—¶çš„å†…å®¹ï¼Œä¸è¦ç†è§£å®ƒæ˜¯ä¸ªæ± å­ï¼Œå…¶å®å°±æ˜¯Classæ–‡ä»¶ä¸­çš„å­—èŠ‚ç æŒ‡ä»¤ã€‚</p><h5 id="2ï¼‰è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime-Constant-Poolï¼‰"><a href="#2ï¼‰è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime-Constant-Poolï¼‰" class="headerlink" title="2ï¼‰è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰"></a>2ï¼‰è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰</h5><p>ã€€ã€€ã€€ã€€JVMå†…å­˜ä¸­æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼Œè¿™æ˜¯è¿è¡Œæ—¶çš„å†…å®¹<br>ã€€ã€€ã€€ã€€è¿™éƒ¨åˆ†å†…å®¹ï¼ˆç»å¤§éƒ¨åˆ†ï¼‰æ˜¯éšç€JVMè¿è¡Œæ—¶å€™ï¼Œä»å¸¸é‡æ± è½¬åŒ–è€Œæ¥ï¼Œæ¯ä¸ªClasså¯¹åº”ä¸€ä¸ªè¿è¡Œæ—¶å¸¸é‡æ± <br>ã€€ã€€ã€€ã€€ä¸Šä¸€å¥ä¸­è¯´ç»å¤§éƒ¨åˆ†æ˜¯å› ä¸ºï¼šé™¤äº† Classä¸­å¸¸é‡æ± å†…å®¹ï¼Œè¿˜å¯èƒ½åŒ…æ‹¬åŠ¨æ€ç”Ÿæˆå¹¶åŠ å…¥è¿™é‡Œçš„å†…å®¹</p><h5 id="3ï¼‰å­—ç¬¦ä¸²å¸¸é‡æ± ï¼ˆString-Poolï¼‰"><a href="#3ï¼‰å­—ç¬¦ä¸²å¸¸é‡æ± ï¼ˆString-Poolï¼‰" class="headerlink" title="3ï¼‰å­—ç¬¦ä¸²å¸¸é‡æ± ï¼ˆString Poolï¼‰"></a>3ï¼‰å­—ç¬¦ä¸²å¸¸é‡æ± ï¼ˆString Poolï¼‰</h5><p>ã€€ã€€ã€€ã€€è¿™éƒ¨åˆ†ä¹Ÿåœ¨æ–¹æ³•åŒºä¸­ï¼Œä½†ä¸Runtime Constant Poolä¸æ˜¯ä¸€ä¸ªæ¦‚å¿µï¼ŒString Poolæ˜¯JVMå®ä¾‹å…¨å±€å…±äº«çš„ï¼Œå…¨å±€åªæœ‰ä¸€ä¸ª<br>ã€€ã€€ã€€ã€€JVMè§„èŒƒè¦æ±‚è¿›å…¥è¿™é‡Œçš„Stringå®ä¾‹å«â€œè¢«é©»ç•™çš„interned stringâ€ï¼Œå„ä¸ªJVMå¯ä»¥æœ‰ä¸åŒçš„å®ç°ï¼ŒHotSpotæ˜¯è®¾ç½®äº†ä¸€ä¸ªå“ˆå¸Œè¡¨StringTableæ¥å¼•ç”¨å †ä¸­çš„å­—ç¬¦ä¸²å®ä¾‹ï¼Œè¢«å¼•ç”¨å°±æ˜¯è¢«é©»ç•™ã€‚</p><h4 id="5-2ã€äº«å…ƒæ¨¡å¼"><a href="#5-2ã€äº«å…ƒæ¨¡å¼" class="headerlink" title="5.2ã€äº«å…ƒæ¨¡å¼"></a>5.2ã€äº«å…ƒæ¨¡å¼</h4><p>ã€€ã€€å…¶å®å­—ç¬¦ä¸²å¸¸é‡æ± è¿™ä¸ªé—®é¢˜æ¶‰åŠåˆ°ä¸€ä¸ªè®¾è®¡æ¨¡å¼ï¼Œå«â€œäº«å…ƒæ¨¡å¼â€ï¼Œé¡¾åæ€ä¹‰ - - - &gt; å…±äº«å…ƒç´ æ¨¡å¼<br>ã€€ã€€ä¹Ÿå°±æ˜¯è¯´ï¼šä¸€ä¸ªç³»ç»Ÿä¸­å¦‚æœæœ‰å¤šå¤„ç”¨åˆ°äº†ç›¸åŒçš„ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥åªå­˜å‚¨ä¸€ä»½æ­¤å…ƒç´ ï¼Œè€Œè®©æ‰€æœ‰åœ°æ–¹éƒ½å¼•ç”¨è¿™ä¸€ä¸ªå…ƒç´ <br>ã€€ã€€Javaä¸­Stringéƒ¨åˆ†å°±æ˜¯æ ¹æ®äº«å…ƒæ¨¡å¼è®¾è®¡çš„ï¼Œè€Œé‚£ä¸ªå­˜å‚¨å…ƒç´ çš„åœ°æ–¹å°±å«åšâ€œå­—ç¬¦ä¸²å¸¸é‡æ±  - String Poolâ€</p><h4 id="5-3ã€è¯¦ç»†åˆ†æ"><a href="#5-3ã€è¯¦ç»†åˆ†æ" class="headerlink" title="5.3ã€è¯¦ç»†åˆ†æ"></a>5.3ã€è¯¦ç»†åˆ†æ</h4><p>ã€€ã€€ä¸¾ä¾‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> x  = <span class="number">10</span>;</span><br><span class="line">String y = <span class="string">"hello"</span>;</span><br></pre></td></tr></tbody></table></figure><p>ã€€ã€€1)é¦–å…ˆï¼Œ<code>10</code>å’Œ<code>"hello"</code>ä¼šåœ¨ç»è¿‡javacï¼ˆæˆ–è€…å…¶ä»–ç¼–è¯‘å™¨ï¼‰ç¼–è¯‘è¿‡åå˜ä¸ºClassæ–‡ä»¶ä¸­<code>constant_pool table</code>çš„å†…å®¹</p><p>ã€€ã€€2)å½“æˆ‘ä»¬çš„ç¨‹åºè¿è¡Œæ—¶ï¼Œä¹Ÿå°±æ˜¯è¯´JVMè¿è¡Œæ—¶ï¼Œæ¯ä¸ªClass<code>constant_pool table</code>ä¸­çš„å†…å®¹ä¼šè¢«åŠ è½½åˆ°JVMå†…å­˜ä¸­çš„æ–¹æ³•åŒºä¸­å„è‡ªClassçš„<code>Runtime Constant Poolã€‚</code></p><p>ã€€ã€€3)ä¸€ä¸ªæ²¡æœ‰è¢«String PoolåŒ…å«çš„Runtime Constant Poolä¸­çš„å­—ç¬¦ä¸²ï¼ˆè¿™é‡Œæ˜¯â€helloâ€ï¼‰ä¼šè¢«åŠ å…¥åˆ°String Poolä¸­ï¼ˆHosSpotä½¿ç”¨hashtableå¼•ç”¨æ–¹å¼ï¼‰ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼šã€€ã€€ã€€</p><p>ã€€ã€€ã€€ã€€ä¸€æ˜¯ï¼šåœ¨Java Heapä¸­æ ¹æ®â€helloâ€å­—é¢é‡createä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡<br>ã€€ã€€ã€€ã€€äºŒæ˜¯ï¼šå°†å­—é¢é‡â€helloâ€ä¸å­—ç¬¦ä¸²å¯¹è±¡çš„å¼•ç”¨åœ¨hashtableä¸­å…³è”èµ·æ¥ï¼Œé”® - å€¼ å½¢å¼æ˜¯ï¼šâ€helloâ€ = å¯¹è±¡çš„å¼•ç”¨åœ°å€ã€‚</p><p>ã€€ã€€ã€€å¦å¤–æ¥è¯´ï¼Œå½“ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å‡ºç°åœ¨Runtime Constant Poolä¸­æ—¶æ€ä¹ˆåˆ¤æ–­éœ€ä¸éœ€è¦åœ¨Java Heapä¸­åˆ›å»ºæ–°å¯¹è±¡å‘¢ï¼Ÿ</p><p>ã€€ã€€ç­–ç•¥æ˜¯è¿™æ ·ï¼šä¼šå…ˆå»æ ¹æ®equalsæ¥æ¯”è¾ƒRuntime Constant Poolä¸­çš„è¿™ä¸ªå­—ç¬¦ä¸²æ˜¯å¦å’ŒString Poolä¸­æŸä¸€ä¸ªæ˜¯ç›¸ç­‰çš„ï¼ˆä¹Ÿå°±æ˜¯æ‰¾æ˜¯å¦å·²ç»å­˜åœ¨ï¼‰ï¼Œå¦‚æœæœ‰é‚£ä¹ˆå°±ä¸åˆ›å»ºï¼Œç›´æ¥ä½¿ç”¨å…¶å¼•ç”¨ï¼›åä¹‹ï¼Œå¦‚ä¸Š3</p><p>ã€€ã€€å¦‚æ­¤ï¼Œå°±å®ç°äº†äº«å…ƒæ¨¡å¼ï¼Œæé«˜çš„å†…å­˜åˆ©ç”¨æ•ˆç‡ã€‚</p><p>ã€€ã€€ä¸¾ä¾‹ï¼š</p><p>ã€€ã€€ã€€ã€€ã€€ã€€ä½¿ç”¨String s = new String(â€œhelloâ€);ä¼šåˆ›å»ºå‡ ä¸ªå¯¹è±¡</p><p>ã€€ã€€ã€€ã€€ã€€ã€€ä¼šåˆ›å»º2ä¸ªå¯¹è±¡</p><p>ã€€ã€€ã€€ã€€ã€€ã€€é¦–å…ˆï¼Œå‡ºç°äº†å­—é¢é‡â€helloâ€ï¼Œé‚£ä¹ˆå»String Poolä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰ç›¸åŒå­—ç¬¦ä¸²å­˜åœ¨ï¼Œå› ä¸ºç¨‹åºå°±è¿™ä¸€è¡Œä»£ç æ‰€ä»¥è‚¯å®šæ²¡æœ‰ï¼Œé‚£ä¹ˆå°±åœ¨Java Heapä¸­ç”¨å­—é¢é‡â€helloâ€é¦–å…ˆåˆ›å»º1ä¸ªStringå¯¹è±¡ã€‚</p><p>ã€€ã€€ã€€ã€€ã€€ã€€æ¥ç€ï¼Œnew String(â€œhelloâ€)ï¼Œå…³é”®å­—newåˆåœ¨Java Heapä¸­åˆ›å»ºäº†1ä¸ªå¯¹è±¡ï¼Œç„¶åè°ƒç”¨æ¥æ”¶Stringå‚æ•°çš„æ„é€ å™¨è¿›è¡Œäº†åˆå§‹åŒ–ã€‚æœ€ç»ˆsçš„å¼•ç”¨æ˜¯è¿™ä¸ªStringå¯¹è±¡.</p>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2021/04/24/hello-world/"/>
      <url>/2021/04/24/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></tbody></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></tbody></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></tbody></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></tbody></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
